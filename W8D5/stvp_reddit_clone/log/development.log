  [1m[35m (277.7ms)[0m  [1m[35mCREATE DATABASE "stvp_reddit_clone_development" ENCODING = 'unicode'[0m
  [1m[35m (96.6ms)[0m  [1m[35mCREATE DATABASE "stvp_reddit_clone_test" ENCODING = 'unicode'[0m
  [1m[35m (251.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (47.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20220216100238)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (50.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying NOT NULL, "password_digest" character varying NOT NULL, "session_token" character varying, "moderator" boolean DEFAULT FALSE, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_username" ON "users" ("username")[0m
  [1m[36mActiveRecord::SchemaMigration Create (2.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220216100238"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (17.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-02-16 10:47:13.629651"], ["updated_at", "2022-02-16 10:47:13.629651"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (4.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (85.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve1"], ["LIMIT", 1]]
  [1m[36mUser Create (2.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "session_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "steve1"], ["password_digest", "$2a$12$GvIC8gwg5L7hdk/S.SWMruTHZoA0iE9MGDm0wSWokEYgY4YjZP202"], ["session_token", "PerWb_Y7lIBnbA"], ["created_at", "2022-02-16 11:01:22.381498"], ["updated_at", "2022-02-16 11:01:22.381498"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve2"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve2"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve2"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "session_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "steve2"], ["password_digest", "$2a$12$TmFHpIhufbhb3LdDJaxcROZPSGx.36hEDKpl7jwulMExhBrE5/fzS"], ["session_token", "c4lTuGkjszffWw"], ["created_at", "2022-02-16 11:13:43.976349"], ["updated_at", "2022-02-16 11:13:43.976349"]]
  [1m[36mTRANSACTION (4.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "steve2"], ["id", 2], ["LIMIT", 1]]
  [1m[36mUser Update (2.1ms)[0m  [1m[33mUPDATE "users" SET "session_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["session_token", "QV2j73wj072T8w"], ["updated_at", "2022-02-16 11:14:20.251920"], ["id", 2]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
Started GET "/session/new" for ::1 at 2022-02-16 19:26:14 +0700
  [1m[35m (43.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SessionsController#new as HTML
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.0ms | Allocations: 5071)



ActionView::MissingTemplate - Missing template sessions/new, application/new with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}. Searched in:
  * "/Users/tranlananh/Desktop/Code/daily_work_folder/stvp_reddit_clone/app/views"
  * "/Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/actiontext-6.1.4.6/app/views"
  * "/Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/actionmailbox-6.1.4.6/app/views":
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/04e08d8e7e394cb2/variables" for ::1 at 2022-02-16 19:26:15 +0700
Started GET "/session/new" for ::1 at 2022-02-16 19:26:36 +0700
Processing by SessionsController#new as HTML
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1974)



ActionView::MissingTemplate - Missing template sessions/new, application/new with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}. Searched in:
  * "/Users/tranlananh/Desktop/Code/daily_work_folder/stvp_reddit_clone/app/views"
  * "/Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/actiontext-6.1.4.6/app/views"
  * "/Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/actionmailbox-6.1.4.6/app/views":
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/216a1828bbff5e20/variables" for ::1 at 2022-02-16 19:26:37 +0700
Started GET "/session/new" for ::1 at 2022-02-16 19:26:38 +0700
Processing by SessionsController#new as HTML
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 1295)



ActionView::MissingTemplate - Missing template sessions/new, application/new with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}. Searched in:
  * "/Users/tranlananh/Desktop/Code/daily_work_folder/stvp_reddit_clone/app/views"
  * "/Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/actiontext-6.1.4.6/app/views"
  * "/Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/actionmailbox-6.1.4.6/app/views":
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/34b5d94780f283fb/variables" for ::1 at 2022-02-16 19:26:38 +0700
Started GET "/session/new" for ::1 at 2022-02-16 19:27:44 +0700
Processing by SessionsController#new as HTML
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms | Allocations: 1977)



ActionView::MissingTemplate - Missing template sessions/new, application/new with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}. Searched in:
  * "/Users/tranlananh/Desktop/Code/daily_work_folder/stvp_reddit_clone/app/views"
  * "/Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/actiontext-6.1.4.6/app/views"
  * "/Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/actionmailbox-6.1.4.6/app/views":
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/8eecb49fe1743a10/variables" for ::1 at 2022-02-16 19:27:44 +0700
Started GET "/session/new" for ::1 at 2022-02-16 19:27:45 +0700
Processing by SessionsController#new as HTML
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 1291)



ActionView::MissingTemplate - Missing template sessions/new, application/new with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}. Searched in:
  * "/Users/tranlananh/Desktop/Code/daily_work_folder/stvp_reddit_clone/app/views"
  * "/Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/actiontext-6.1.4.6/app/views"
  * "/Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/actionmailbox-6.1.4.6/app/views":
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/412d7b997dccd264/variables" for ::1 at 2022-02-16 19:27:45 +0700
Started GET "/session/new" for ::1 at 2022-02-16 19:29:30 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.9ms | Allocations: 402)
Completed 200 OK in 22ms (Views: 21.4ms | ActiveRecord: 0.0ms | Allocations: 7626)


Started GET "/session/new" for ::1 at 2022-02-16 19:46:32 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.8ms | Allocations: 228)
Completed 200 OK in 5ms (Views: 5.0ms | Allocations: 1688)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=u&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:46:38 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"u", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.2ms | Allocations: 76)
Completed 200 OK in 1ms (Views: 0.9ms | Allocations: 389)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=u&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:47:06 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"u", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 5.6ms | Allocations: 342)
Completed 200 OK in 18ms (Views: 17.4ms | Allocations: 1795)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=u&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:47:07 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"u", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.6ms | Allocations: 167)
Completed 200 OK in 2ms (Views: 1.8ms | Allocations: 477)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:47:11 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.6ms | Allocations: 167)
Completed 200 OK in 2ms (Views: 1.6ms | Allocations: 477)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:47:27 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.3ms | Allocations: 318)
Completed 200 OK in 6ms (Views: 5.5ms | Allocations: 1771)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:49:09 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.6ms | Allocations: 371)
Completed 200 OK in 11ms (Views: 10.9ms | Allocations: 1813)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:49:10 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.1ms | Allocations: 167)
Completed 200 OK in 4ms (Views: 3.8ms | Allocations: 477)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:49:53 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 2.5ms | Allocations: 370)
Completed 200 OK in 9ms (Views: 8.3ms | Allocations: 1812)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:49:54 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.5ms | Allocations: 167)
Completed 200 OK in 1ms (Views: 1.1ms | Allocations: 477)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:50:41 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.0ms | Allocations: 387)
Completed 200 OK in 10ms (Views: 9.5ms | Allocations: 1829)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:50:42 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.5ms | Allocations: 167)
Completed 200 OK in 2ms (Views: 1.4ms | Allocations: 477)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:50:50 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 2.2ms | Allocations: 385)
Completed 200 OK in 9ms (Views: 8.7ms | Allocations: 1827)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:50:51 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.7ms | Allocations: 167)
Completed 200 OK in 2ms (Views: 2.0ms | Allocations: 477)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:50:51 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.5ms | Allocations: 167)
Completed 200 OK in 3ms (Views: 2.6ms | Allocations: 476)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:50:58 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.7ms | Allocations: 385)
Completed 200 OK in 10ms (Views: 9.1ms | Allocations: 1827)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:50:59 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.6ms | Allocations: 167)
Completed 200 OK in 3ms (Views: 2.0ms | Allocations: 478)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:51:03 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.9ms | Allocations: 167)
Completed 200 OK in 3ms (Views: 2.1ms | Allocations: 476)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=as&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:51:06 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"as", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.6ms | Allocations: 167)
Completed 200 OK in 2ms (Views: 1.5ms | Allocations: 476)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=as&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:51:17 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"as", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 2.8ms | Allocations: 2600)
Completed 500 Internal Server Error in 9ms (Allocations: 4026)



NameError - undefined local variable or method `flahs' for #<ActionView::Base:0x007f7f92245298>:
  app/views/sessions/new.html.erb:3
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/a794be042291c4db/variables" for ::1 at 2022-02-16 19:51:17 +0700
Started POST "/__better_errors/a794be042291c4db/eval" for ::1 at 2022-02-16 19:51:22 +0700
Started POST "/__better_errors/a794be042291c4db/eval" for ::1 at 2022-02-16 19:51:31 +0700
Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=as&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:51:51 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"as", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 3.3ms | Allocations: 2622)
Completed 500 Internal Server Error in 9ms (Allocations: 4048)



NoMethodError - undefined method `each' for #<ActionDispatch::Flash::FlashNow:0x00007f7f8bbd5210>:
  app/views/sessions/new.html.erb:4
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/a7b766c49a2da4f8/variables" for ::1 at 2022-02-16 19:51:52 +0700
Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=as&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:51:52 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"as", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 2.0ms | Allocations: 2406)
Completed 500 Internal Server Error in 4ms (Allocations: 2690)



NoMethodError - undefined method `each' for #<ActionDispatch::Flash::FlashNow:0x00007f7f903f59c8>:
  app/views/sessions/new.html.erb:4
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/3d370f28162fa7f0/variables" for ::1 at 2022-02-16 19:51:53 +0700
Started GET "/session/new" for ::1 at 2022-02-16 19:51:58 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 3.9ms | Allocations: 2407)
Completed 500 Internal Server Error in 7ms (Allocations: 2690)



NoMethodError - undefined method `each' for #<ActionDispatch::Flash::FlashNow:0x00007f7f90108df0>:
  app/views/sessions/new.html.erb:4
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/e71833717f4d924c/variables" for ::1 at 2022-02-16 19:51:59 +0700
Started GET "/session/new" for ::1 at 2022-02-16 19:52:02 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 4.7ms | Allocations: 2407)
Completed 500 Internal Server Error in 6ms (Allocations: 2690)



NoMethodError - undefined method `each' for #<ActionDispatch::Flash::FlashNow:0x00007f7f921cefa8>:
  app/views/sessions/new.html.erb:4
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/318321ef50f58559/variables" for ::1 at 2022-02-16 19:52:03 +0700
Started POST "/__better_errors/318321ef50f58559/eval" for ::1 at 2022-02-16 19:52:07 +0700
Started POST "/__better_errors/318321ef50f58559/eval" for ::1 at 2022-02-16 19:52:14 +0700
Started POST "/__better_errors/318321ef50f58559/eval" for ::1 at 2022-02-16 19:52:16 +0700
Started GET "/session/new" for ::1 at 2022-02-16 19:52:48 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.8ms | Allocations: 2562)
Completed 500 Internal Server Error in 6ms (Allocations: 3994)



NoMethodError - undefined method `each' for #<ActionDispatch::Flash::FlashNow:0x00007f7f921777d0>:
  app/views/sessions/new.html.erb:3
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/c2ada51ddd3afd5d/variables" for ::1 at 2022-02-16 19:52:48 +0700
Started GET "/session/new" for ::1 at 2022-02-16 19:52:50 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 2.1ms | Allocations: 2400)
Completed 500 Internal Server Error in 3ms (Allocations: 2684)



NoMethodError - undefined method `each' for #<ActionDispatch::Flash::FlashNow:0x00007f7f92077d80>:
  app/views/sessions/new.html.erb:3
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/05b2d084d51877c5/variables" for ::1 at 2022-02-16 19:52:50 +0700
Started GET "/session/new" for ::1 at 2022-02-16 19:53:12 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 3.2ms | Allocations: 2585)
Completed 500 Internal Server Error in 12ms (Allocations: 4002)



NoMethodError - undefined method `each' for nil:NilClass:
  app/views/sessions/new.html.erb:3
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/092e0d3dedcb9160/variables" for ::1 at 2022-02-16 19:53:12 +0700
Started GET "/session/new" for ::1 at 2022-02-16 19:53:20 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.9ms | Allocations: 2387)
Completed 500 Internal Server Error in 3ms (Allocations: 2671)



NoMethodError - undefined method `each' for nil:NilClass:
  app/views/sessions/new.html.erb:3
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/a5cba2ae71053633/variables" for ::1 at 2022-02-16 19:53:20 +0700
Started GET "/session/new" for ::1 at 2022-02-16 19:53:21 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 2.2ms | Allocations: 2387)
Completed 500 Internal Server Error in 4ms (Allocations: 2670)



NoMethodError - undefined method `each' for nil:NilClass:
  app/views/sessions/new.html.erb:3
  app/controllers/sessions_controller.rb:4:in `new'

Started POST "/__better_errors/46f8bca5ab741a6d/variables" for ::1 at 2022-02-16 19:53:21 +0700
Started GET "/session/new" for ::1 at 2022-02-16 19:53:39 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.8ms | Allocations: 377)
Completed 200 OK in 8ms (Views: 7.6ms | Allocations: 1828)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:53:42 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.8ms | Allocations: 167)
Completed 200 OK in 2ms (Views: 1.7ms | Allocations: 476)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=&user%5Bpassword%5D=&Login=Submit" for ::1 at 2022-02-16 19:53:43 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 2.3ms | Allocations: 167)
Completed 200 OK in 6ms (Views: 5.1ms | Allocations: 475)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=&user%5Bpassword%5D=&Login=Submit" for ::1 at 2022-02-16 19:53:44 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.0ms | Allocations: 167)
Completed 200 OK in 3ms (Views: 2.6ms | Allocations: 475)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=&user%5Bpassword%5D=&Login=Submit" for ::1 at 2022-02-16 19:53:44 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.4ms | Allocations: 167)
Completed 200 OK in 1ms (Views: 1.1ms | Allocations: 475)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=&user%5Bpassword%5D=&Login=Submit" for ::1 at 2022-02-16 19:53:44 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.4ms | Allocations: 167)
Completed 200 OK in 1ms (Views: 1.0ms | Allocations: 475)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=&user%5Bpassword%5D=&Login=Submit" for ::1 at 2022-02-16 19:53:45 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.4ms | Allocations: 167)
Completed 200 OK in 1ms (Views: 0.9ms | Allocations: 475)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=&user%5Bpassword%5D=&Login=Submit" for ::1 at 2022-02-16 19:53:45 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.4ms | Allocations: 167)
Completed 200 OK in 1ms (Views: 1.1ms | Allocations: 475)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=steve1&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:54:27 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve1", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.8ms | Allocations: 167)
Completed 200 OK in 2ms (Views: 1.8ms | Allocations: 475)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=steve1&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:54:39 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve1", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 2.8ms | Allocations: 167)
Completed 200 OK in 5ms (Views: 4.9ms | Allocations: 475)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=steve2&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 19:54:48 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve2", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.7ms | Allocations: 167)
Completed 200 OK in 3ms (Views: 2.0ms | Allocations: 475)


Started GET "/" for ::1 at 2022-02-16 19:55:02 +0700
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-6.1.4.6/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-6.1.4.6/lib/rails/templates/rails/welcome/index.html.erb (Duration: 8.5ms | Allocations: 245)
Completed 200 OK in 11ms (Views: 9.6ms | Allocations: 919)


Started GET "/" for ::1 at 2022-02-16 20:11:16 +0700
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-6.1.4.6/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-6.1.4.6/lib/rails/templates/rails/welcome/index.html.erb (Duration: 48.3ms | Allocations: 256)
Completed 200 OK in 69ms (Views: 56.6ms | Allocations: 1837)


Started GET "/session/new" for ::1 at 2022-02-16 20:11:20 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 4.1ms | Allocations: 370)
Completed 200 OK in 21ms (Views: 19.4ms | Allocations: 1808)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=username&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 20:11:24 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"username", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.9ms | Allocations: 167)
Completed 200 OK in 3ms (Views: 2.8ms | Allocations: 477)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=steve1&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 20:11:32 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve1", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.0ms | Allocations: 167)
Completed 200 OK in 2ms (Views: 1.6ms | Allocations: 476)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 20:12:24 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.7ms | Allocations: 174)
Completed 200 OK in 3ms (Views: 2.3ms | Allocations: 638)


Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 20:13:16 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 2.3ms | Allocations: 375)
Completed 200 OK in 10ms (Views: 9.3ms | Allocations: 1827)


Started GET "/session?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 20:13:45 +0700
  
ActionController::RoutingError (No route matches [GET] "/session"):
  
Started GET "/session?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 20:14:31 +0700
  
ActionController::RoutingError (No route matches [GET] "/session"):
  
Started GET "/session/new?authenticity_token=[FILTERED]&user%5Busername%5D=a&user%5Bpassword%5D=[FILTERED]&Login=Submit" for ::1 at 2022-02-16 20:14:33 +0700
Processing by SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.4ms | Allocations: 372)
Completed 200 OK in 9ms (Views: 8.2ms | Allocations: 1830)


Started POST "/session" for ::1 at 2022-02-16 20:14:36 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 4ms (Allocations: 1871)



ActionController::InvalidAuthenticityToken - ActionController::InvalidAuthenticityToken:

Started POST "/__better_errors/a631f1df42dff915/variables" for ::1 at 2022-02-16 20:14:36 +0700
Started GET "/session/new" for ::1 at 2022-02-16 20:15:20 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 3.0ms | Allocations: 167)
Completed 200 OK in 6ms (Views: 4.7ms | Allocations: 476)


Started POST "/session" for ::1 at 2022-02-16 20:15:24 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"as", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 2ms (Allocations: 1860)



ActionController::InvalidAuthenticityToken - ActionController::InvalidAuthenticityToken:

Started POST "/__better_errors/c5a98714ba0e45a2/variables" for ::1 at 2022-02-16 20:15:24 +0700
Started GET "/session/new" for ::1 at 2022-02-16 20:18:25 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.4ms | Allocations: 173)
Completed 200 OK in 2ms (Views: 1.5ms | Allocations: 637)


Started POST "/session" for ::1 at 2022-02-16 20:18:39 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve1", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 2ms (Allocations: 1860)



ActionController::InvalidAuthenticityToken - ActionController::InvalidAuthenticityToken:

Started POST "/__better_errors/59e69aa1bbe1b5e0/variables" for ::1 at 2022-02-16 20:18:39 +0700
Started GET "/session" for ::1 at 2022-02-16 20:19:10 +0700
  
ActionController::RoutingError (No route matches [GET] "/session"):
  
Started GET "/session/new" for ::1 at 2022-02-16 22:34:12 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.8ms | Allocations: 173)
Completed 200 OK in 3ms (Views: 2.1ms | Allocations: 637)


Started GET "/session/new" for ::1 at 2022-02-16 22:34:12 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.7ms | Allocations: 167)
Completed 200 OK in 2ms (Views: 1.6ms | Allocations: 476)


Started POST "/session" for ::1 at 2022-02-16 22:34:14 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 4ms (Allocations: 1860)



ActionController::InvalidAuthenticityToken - ActionController::InvalidAuthenticityToken:

Started POST "/__better_errors/37f31780f014cb43/variables" for ::1 at 2022-02-16 22:34:15 +0700
Started GET "/session/new" for ::1 at 2022-02-16 22:35:37 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 1.3ms | Allocations: 378)
Completed 200 OK in 8ms (Views: 7.3ms | Allocations: 1838)


Started GET "/session/new" for ::1 at 2022-02-16 22:36:29 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.7ms | Allocations: 219)
Completed 200 OK in 3ms (Views: 2.0ms | Allocations: 682)


Started POST "/session" for ::1 at 2022-02-16 22:36:32 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "a"], ["LIMIT", 1]]
  ↳ app/models/user.rb:16:in `login_by_credentials'
  Rendering text template
  Rendered text template (Duration: 0.1ms | Allocations: 28)
Completed 200 OK in 103ms (Views: 1.8ms | ActiveRecord: 75.8ms | Allocations: 7317)


Started GET "/session/new" for ::1 at 2022-02-16 22:36:47 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.9ms | Allocations: 266)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.0ms | Allocations: 730)


Started POST "/session" for ::1 at 2022-02-16 22:36:50 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "a"], ["LIMIT", 1]]
  ↳ app/models/user.rb:16:in `login_by_credentials'
  Rendering sessions/new.html.erb
  Rendered sessions/new.html.erb (Duration: 0.7ms | Allocations: 102)
Completed 200 OK in 17ms (Views: 1.8ms | ActiveRecord: 4.6ms | Allocations: 2976)


Started POST "/session" for ::1 at 2022-02-16 22:37:03 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve1", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve1"], ["LIMIT", 1]]
  ↳ app/models/user.rb:16:in `login_by_credentials'
Redirected to http://localhost:3000/
Completed 302 Found in 301ms (ActiveRecord: 11.2ms | Allocations: 5675)


Started GET "/" for ::1 at 2022-02-16 22:37:03 +0700
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-6.1.4.6/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-6.1.4.6/lib/rails/templates/rails/welcome/index.html.erb (Duration: 6.8ms | Allocations: 244)
Completed 200 OK in 9ms (Views: 7.7ms | ActiveRecord: 0.0ms | Allocations: 855)


Started GET "/users/new" for ::1 at 2022-02-16 22:57:11 +0700
  [1m[35m (42.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#new as HTML
  Rendering users/new.html.erb
  Rendered shared/_errors.html.erb (Duration: 6.7ms | Allocations: 381)
  Rendered users/new.html.erb (Duration: 11.1ms | Allocations: 1157)
Completed 200 OK in 60ms (Views: 21.6ms | ActiveRecord: 12.4ms | Allocations: 11715)


Started POST "/users" for ::1 at 2022-02-16 22:57:18 +0700
Processing by UsersController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"seee", "password"=>"[FILTERED]"}, "Create"=>"Submit"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 1205)



NoMethodError - undefined method `save' for #<ActionController::Parameters:0x00007fbb2fac6628>:
  app/controllers/users_controller.rb:11:in `create'

Started POST "/__better_errors/532068b789e42aee/variables" for ::1 at 2022-02-16 22:57:18 +0700
Started GET "/users/new" for ::1 at 2022-02-16 22:57:42 +0700
Processing by UsersController#new as HTML
  Rendering users/new.html.erb
  Rendered shared/_errors.html.erb (Duration: 0.6ms | Allocations: 190)
  Rendered users/new.html.erb (Duration: 1.8ms | Allocations: 366)
Completed 200 OK in 22ms (Views: 3.1ms | ActiveRecord: 8.6ms | Allocations: 6248)


Started POST "/users" for ::1 at 2022-02-16 22:57:45 +0700
Processing by UsersController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Create"=>"Submit"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "a"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
Completed 500 Internal Server Error in 295ms (ActiveRecord: 5.6ms | Allocations: 7571)



NoMethodError - undefined method `<<' for nil:NilClass:
  app/controllers/users_controller.rb:15:in `create'

Started POST "/__better_errors/edaeaf038bad5fd9/variables" for ::1 at 2022-02-16 22:57:45 +0700
Started POST "/__better_errors/edaeaf038bad5fd9/eval" for ::1 at 2022-02-16 22:58:02 +0700
Started GET "/users/new" for ::1 at 2022-02-16 22:58:24 +0700
Processing by UsersController#new as HTML
  Rendering users/new.html.erb
  Rendered shared/_errors.html.erb (Duration: 0.5ms | Allocations: 190)
  Rendered users/new.html.erb (Duration: 1.0ms | Allocations: 366)
Completed 200 OK in 22ms (Views: 1.9ms | ActiveRecord: 9.7ms | Allocations: 6260)


Started POST "/users" for ::1 at 2022-02-16 22:58:27 +0700
Processing by UsersController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"a", "password"=>"[FILTERED]"}, "Create"=>"Submit"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "a"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
  Rendering users/new.html.erb
  Rendered shared/_errors.html.erb (Duration: 0.1ms | Allocations: 53)
  Rendered users/new.html.erb (Duration: 0.7ms | Allocations: 218)
Completed 200 OK in 295ms (Views: 1.6ms | ActiveRecord: 4.3ms | Allocations: 4938)


Started POST "/users" for ::1 at 2022-02-16 22:58:41 +0700
Processing by UsersController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve1", "password"=>"[FILTERED]"}, "Create"=>"Submit"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve1"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
  Rendering users/new.html.erb
  Rendered shared/_errors.html.erb (Duration: 0.1ms | Allocations: 53)
  Rendered users/new.html.erb (Duration: 0.5ms | Allocations: 218)
Completed 200 OK in 293ms (Views: 1.2ms | ActiveRecord: 3.5ms | Allocations: 4877)


Started POST "/users" for ::1 at 2022-02-16 22:58:55 +0700
Processing by UsersController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve3", "password"=>"[FILTERED]"}, "Create"=>"Submit"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve3"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "session_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "steve3"], ["password_digest", "$2a$12$Up19Mu/SIA5GZSxpV8jvwek2SiTzxqzRzsIzAT3XF6dZAClnTLVge"], ["session_token", "eWAfef1ZBz9pTQ"], ["created_at", "2022-02-16 15:58:55.301398"], ["updated_at", "2022-02-16 15:58:55.301398"]]
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 287ms (ActiveRecord: 6.5ms | Allocations: 3781)


Started GET "/" for ::1 at 2022-02-16 22:58:55 +0700
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-6.1.4.6/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-6.1.4.6/lib/rails/templates/rails/welcome/index.html.erb (Duration: 6.9ms | Allocations: 248)
Completed 200 OK in 11ms (Views: 8.0ms | ActiveRecord: 0.0ms | Allocations: 922)


  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DropUsersModerator (20220216162108)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (49.3ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "moderator"[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220216162108"]]
  [1m[36mTRANSACTION (8.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (41.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateSubs (20220216164805)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (93.3ms)[0m  [1m[35mCREATE TABLE "subs" ("id" bigserial primary key, "title" character varying NOT NULL, "user_id" integer NOT NULL, "description" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_subs_on_user_id" ON "subs" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220216164805"]]
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePosts (20220216165055)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (47.7ms)[0m  [1m[35mCREATE TABLE "posts" ("id" bigserial primary key, "title" character varying NOT NULL, "content" character varying, "url" character varying, "sub_id" integer NOT NULL, "user_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE INDEX "index_posts_on_sub_id" ON "posts" ("sub_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_posts_on_user_id" ON "posts" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220216165055"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mSub Load (46.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" ORDER BY "subs"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePostSubs (20220216170531)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (50.5ms)[0m  [1m[35mCREATE TABLE "post_subs" ("id" bigserial primary key, "sub_id" integer NOT NULL, "post_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220216170531"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to DropPostSubId (20220216170702)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "posts" DROP COLUMN "sub_id"[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220216170702"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSub Create (45.7ms)[0m  [1m[32mINSERT INTO "subs" ("title", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["title", "Sub One"], ["user_id", 1], ["created_at", "2022-02-16 17:28:49.473487"], ["updated_at", "2022-02-16 17:28:49.473487"]]
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSub Create (1.5ms)[0m  [1m[32mINSERT INTO "subs" ("title", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["title", "Sub Two"], ["user_id", 2], ["created_at", "2022-02-16 17:29:32.768372"], ["updated_at", "2022-02-16 17:29:32.768372"]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPost Load (42.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts"[0m
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mPostSub Load (1.6ms)[0m  [1m[34mSELECT "post_subs".* FROM "post_subs"[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPost Create (4.3ms)[0m  [1m[32mINSERT INTO "posts" ("title", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["title", "Post one"], ["user_id", 1], ["created_at", "2022-02-16 17:47:29.014973"], ["updated_at", "2022-02-16 17:47:29.014973"]]
  [1m[36mPostSub Create (5.3ms)[0m  [1m[32mINSERT INTO "post_subs" ("sub_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sub_id", 1], ["post_id", 1], ["created_at", "2022-02-16 17:47:29.027414"], ["updated_at", "2022-02-16 17:47:29.027414"]]
  [1m[36mPostSub Create (2.4ms)[0m  [1m[32mINSERT INTO "post_subs" ("sub_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sub_id", 2], ["post_id", 1], ["created_at", "2022-02-16 17:47:29.040855"], ["updated_at", "2022-02-16 17:47:29.040855"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts"[0m
  [1m[36mSub Load (40.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPost Create (1.6ms)[0m  [1m[32mINSERT INTO "posts" ("title", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["title", "Post two"], ["user_id", 2], ["created_at", "2022-02-17 03:00:03.998751"], ["updated_at", "2022-02-17 03:00:03.998751"]]
  [1m[36mPostSub Create (4.2ms)[0m  [1m[32mINSERT INTO "post_subs" ("sub_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sub_id", 1], ["post_id", 2], ["created_at", "2022-02-17 03:00:04.003325"], ["updated_at", "2022-02-17 03:00:04.003325"]]
  [1m[36mPostSub Create (0.5ms)[0m  [1m[32mINSERT INTO "post_subs" ("sub_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sub_id", 2], ["post_id", 2], ["created_at", "2022-02-17 03:00:04.010399"], ["updated_at", "2022-02-17 03:00:04.010399"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPostSub Load (0.9ms)[0m  [1m[34mSELECT "post_subs".* FROM "post_subs"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateComments (20220217030855)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (67.9ms)[0m  [1m[35mCREATE TABLE "comments" ("id" bigserial primary key, "content" character varying NOT NULL, "user_id" integer NOT NULL, "post_id" integer NOT NULL, "parent_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_comments_on_user_id" ON "comments" ("user_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_comments_on_post_id" ON "comments" ("post_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_comments_on_parent_id" ON "comments" ("parent_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220217030855"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPost Load (0.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mComment Create (4.3ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "parent content 1"], ["user_id", 1], ["post_id", 1], ["created_at", "2022-02-17 03:19:31.681896"], ["updated_at", "2022-02-17 03:19:31.681896"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPost Load (0.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mComment Create (0.9ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "child content 1"], ["user_id", 2], ["post_id", 1], ["parent_id", 1], ["created_at", "2022-02-17 03:20:28.280541"], ["updated_at", "2022-02-17 03:20:28.280541"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mComment Create (3.7ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "child content 2"], ["user_id", 1], ["post_id", 1], ["parent_id", 1], ["created_at", "2022-02-17 03:20:55.293700"], ["updated_at", "2022-02-17 03:20:55.293700"]]
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."parent_id" = $1[0m  [["parent_id", 1]]
  [1m[36mComment Load (0.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started GET "/" for ::1 at 2022-02-17 12:02:09 +0700
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m

Zeitwerk::NameError - expected file /Users/tranlananh/Desktop/Code/daily_work_folder/stvp_reddit_clone/app/controllers/subs_controller.rb to define constant SubsController, but didn't:

Started POST "/__better_errors/8f4ef1315491a505/variables" for ::1 at 2022-02-17 12:02:09 +0700
Started GET "/" for ::1 at 2022-02-17 12:03:00 +0700

Zeitwerk::NameError - expected file /Users/tranlananh/Desktop/Code/daily_work_folder/stvp_reddit_clone/app/controllers/subs_controller.rb to define constant SubsController, but didn't:

Started POST "/__better_errors/17cb3240e6e3459e/variables" for ::1 at 2022-02-17 12:03:00 +0700
Started GET "/" for ::1 at 2022-02-17 12:03:20 +0700
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-6.1.4.6/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-6.1.4.6/lib/rails/templates/rails/welcome/index.html.erb (Duration: 9.8ms | Allocations: 242)
Completed 200 OK in 13ms (Views: 11.2ms | ActiveRecord: 0.0ms | Allocations: 868)


Started GET "/" for ::1 at 2022-02-17 12:03:37 +0700

ActionController::RoutingError - uninitialized constant SubController:

Started POST "/__better_errors/eb46f5af2b1ac594/variables" for ::1 at 2022-02-17 12:03:38 +0700
  [1m[36mSub Load (0.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
Started GET "/" for ::1 at 2022-02-17 12:05:53 +0700

Zeitwerk::NameError - expected file /Users/tranlananh/Desktop/Code/daily_work_folder/stvp_reddit_clone/app/controllers/subs_controller.rb to define constant SubsController, but didn't:

Started POST "/__better_errors/8c4b89507ef75e77/variables" for ::1 at 2022-02-17 12:05:54 +0700
Started GET "/" for ::1 at 2022-02-17 12:06:10 +0700

TypeError - superclass must be a Class (Module given):
  app/controllers/subs_controller.rb:1:in `<top (required)>'

Started POST "/__better_errors/10676f18c201dee2/variables" for ::1 at 2022-02-17 12:06:10 +0700
Started POST "/__better_errors/10676f18c201dee2/eval" for ::1 at 2022-02-17 12:06:19 +0700
Started POST "/__better_errors/10676f18c201dee2/eval" for ::1 at 2022-02-17 12:06:21 +0700
Started POST "/__better_errors/10676f18c201dee2/eval" for ::1 at 2022-02-17 12:06:28 +0700
  [1m[36mSub Load (2.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/" for ::1 at 2022-02-17 12:06:54 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 20.9ms | Allocations: 5207)
Completed 200 OK in 32ms (Views: 14.8ms | ActiveRecord: 11.2ms | Allocations: 8692)


Started GET "/" for ::1 at 2022-02-17 12:07:05 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 6.1ms | Allocations: 1131)
Completed 200 OK in 11ms (Views: 9.1ms | ActiveRecord: 1.2ms | Allocations: 2593)


Started GET "/subs/1" for ::1 at 2022-02-17 12:07:06 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:7:in `show'
Completed 500 Internal Server Error in 25ms (ActiveRecord: 1.3ms | Allocations: 12856)



ActionView::MissingTemplate - Missing template subs/show, application/show with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}. Searched in:
  * "/Users/tranlananh/Desktop/Code/daily_work_folder/stvp_reddit_clone/app/views"
  * "/Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/actiontext-6.1.4.6/app/views"
  * "/Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/actionmailbox-6.1.4.6/app/views":
  app/controllers/subs_controller.rb:8:in `show'

Started POST "/__better_errors/2fc490822470c85d/variables" for ::1 at 2022-02-17 12:07:06 +0700
  [1m[36mSub Load (0.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" ORDER BY "subs"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPost Load (2.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
Started GET "/subs/1" for ::1 at 2022-02-17 12:18:14 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:7:in `show'
  Rendering subs/show.html.erb
  Rendered subs/show.html.erb (Duration: 2.8ms | Allocations: 2617)
Completed 500 Internal Server Error in 78ms (ActiveRecord: 15.7ms | Allocations: 8019)



NoMethodError - undefined method `content' for #<Sub:0x00007fbb35581b30>:
  app/views/subs/show.html.erb:5
  app/controllers/subs_controller.rb:8:in `show'

Started POST "/__better_errors/deef1b475d375c05/variables" for ::1 at 2022-02-17 12:18:14 +0700
Started POST "/__better_errors/deef1b475d375c05/eval" for ::1 at 2022-02-17 12:18:34 +0700
Started GET "/subs/1" for ::1 at 2022-02-17 12:18:50 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:7:in `show'
  Rendering subs/show.html.erb
  [1m[36mPost Load (2.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:13
  Rendered subs/show.html.erb (Duration: 100.9ms | Allocations: 28095)
Completed 200 OK in 113ms (Views: 88.0ms | ActiveRecord: 21.8ms | Allocations: 30260)


Started GET "/posts/1" for ::1 at 2022-02-17 12:18:53 +0700

Zeitwerk::NameError - expected file /Users/tranlananh/Desktop/Code/daily_work_folder/stvp_reddit_clone/app/controllers/posts_controller.rb to define constant PostsController, but didn't:

Started POST "/__better_errors/af1580d2eb2df238/variables" for ::1 at 2022-02-17 12:18:53 +0700
  [1m[36mSub Load (0.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" ORDER BY "subs"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/" for ::1 at 2022-02-17 12:39:46 +0700

SyntaxError - syntax error, unexpected tIDENTIFIER, expecting keyword_end
...n :require_current_user! except: [:index, :show]
...                         ^~~~~~:
  app/controllers/subs_controller.rb:2:in `'

Started POST "/__better_errors/7dd314b778536c32/variables" for ::1 at 2022-02-17 12:39:46 +0700
Started GET "/" for ::1 at 2022-02-17 12:40:14 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 121.0ms | Allocations: 7732)
Completed 200 OK in 130ms (Views: 125.0ms | ActiveRecord: 59.0ms | Allocations: 11224)


Started GET "/subs/1" for ::1 at 2022-02-17 12:40:16 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering subs/show.html.erb
  [1m[36mPost Load (3.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb (Duration: 32.2ms | Allocations: 13734)
Completed 200 OK in 42ms (Views: 30.6ms | ActiveRecord: 5.2ms | Allocations: 15172)


Started GET "/subs/new" for ::1 at 2022-02-17 12:40:18 +0700
Processing by SubsController#new as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "eWAfef1ZBz9pTQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering subs/new.html.erb
  Rendered shared/_errors.html.erb (Duration: 0.8ms | Allocations: 201)
  Rendered subs/new.html.erb (Duration: 2.9ms | Allocations: 683)
Completed 200 OK in 50ms (Views: 4.2ms | ActiveRecord: 15.0ms | Allocations: 13944)


Started POST "/subs" for ::1 at 2022-02-17 12:40:27 +0700
Processing by SubsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "sub"=>{"title"=>"hey", "description"=>"this is bad"}, "Create a new Sub"=>"Submit"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "eWAfef1ZBz9pTQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "eWAfef1ZBz9pTQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/subs_controller.rb:20:in `create'
  [1m[36mSub Create (43.4ms)[0m  [1m[32mINSERT INTO "subs" ("title", "user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "hey"], ["user_id", 3], ["description", "this is bad"], ["created_at", "2022-02-17 05:40:27.631051"], ["updated_at", "2022-02-17 05:40:27.631051"]]
  ↳ app/controllers/subs_controller.rb:20:in `create'
  [1m[36mTRANSACTION (42.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/subs_controller.rb:20:in `create'
Redirected to http://localhost:3000/subs/3
Completed 302 Found in 113ms (ActiveRecord: 89.6ms | Allocations: 5639)


Started GET "/subs/3" for ::1 at 2022-02-17 12:40:27 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering subs/show.html.erb
  [1m[36mPost Load (2.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb (Duration: 5.6ms | Allocations: 1070)
Completed 200 OK in 12ms (Views: 4.3ms | ActiveRecord: 4.2ms | Allocations: 2107)


Started GET "/subs/3" for ::1 at 2022-02-17 12:45:35 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering subs/show.html.erb
  [1m[36mPost Load (3.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb (Duration: 6.8ms | Allocations: 1294)
Completed 200 OK in 20ms (Views: 8.3ms | ActiveRecord: 4.9ms | Allocations: 3474)


Started GET "/subs/3" for ::1 at 2022-02-17 12:45:37 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering subs/show.html.erb
  [1m[36mPost Load (2.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb (Duration: 6.2ms | Allocations: 1070)
Completed 200 OK in 11ms (Views: 4.7ms | ActiveRecord: 3.5ms | Allocations: 2108)


Started GET "/subs/3" for ::1 at 2022-02-17 12:45:38 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mSub Load (3.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering subs/show.html.erb
  [1m[36mPost Load (3.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb (Duration: 8.6ms | Allocations: 1069)
Completed 200 OK in 19ms (Views: 6.2ms | ActiveRecord: 7.1ms | Allocations: 2105)


Started GET "/" for ::1 at 2022-02-17 12:45:41 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 10.4ms | Allocations: 1162)
Completed 200 OK in 13ms (Views: 11.4ms | ActiveRecord: 1.0ms | Allocations: 1620)


Started GET "/session/new" for ::1 at 2022-02-17 12:45:54 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered shared/_errors.html.erb (Duration: 1.0ms | Allocations: 343)
  Rendered sessions/new.html.erb (Duration: 3.5ms | Allocations: 797)
Completed 200 OK in 13ms (Views: 12.2ms | ActiveRecord: 0.0ms | Allocations: 2252)


Started POST "/session" for ::1 at 2022-02-17 12:46:00 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve1", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve1"], ["LIMIT", 1]]
  ↳ app/models/user.rb:16:in `login_by_credentials'
Redirected to http://localhost:3000/
Completed 302 Found in 284ms (ActiveRecord: 1.3ms | Allocations: 1245)


Started GET "/" for ::1 at 2022-02-17 12:46:00 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 8.5ms | Allocations: 1162)
Completed 200 OK in 12ms (Views: 10.5ms | ActiveRecord: 1.3ms | Allocations: 2027)


Started GET "/subs/1" for ::1 at 2022-02-17 12:46:33 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering subs/show.html.erb
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb (Duration: 4.5ms | Allocations: 1374)
Completed 200 OK in 14ms (Views: 6.7ms | ActiveRecord: 2.5ms | Allocations: 3553)


Started GET "/" for ::1 at 2022-02-17 12:48:14 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 17.2ms | Allocations: 1162)
Completed 200 OK in 31ms (Views: 27.9ms | ActiveRecord: 1.6ms | Allocations: 2624)


Started GET "/subs/3" for ::1 at 2022-02-17 12:48:18 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mSub Load (0.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering subs/show.html.erb
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb (Duration: 5.0ms | Allocations: 1293)
Completed 200 OK in 11ms (Views: 5.4ms | ActiveRecord: 2.0ms | Allocations: 2461)


Started GET "/subs/3" for ::1 at 2022-02-17 12:49:28 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mSub Load (0.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering subs/show.html.erb
  [1m[36mPost Load (3.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb (Duration: 7.9ms | Allocations: 1291)
Completed 200 OK in 17ms (Views: 10.3ms | ActiveRecord: 4.2ms | Allocations: 3469)


Started GET "/subs/3" for ::1 at 2022-02-17 12:51:46 +0700
  [1m[35m (3.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SubsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering subs/show.html.erb
  [1m[36mPost Load (1.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb (Duration: 45.0ms | Allocations: 19417)
Completed 200 OK in 101ms (Views: 42.2ms | ActiveRecord: 24.8ms | Allocations: 33379)


Started GET "/" for ::1 at 2022-02-17 12:51:51 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 9.8ms | Allocations: 1181)
Completed 200 OK in 16ms (Views: 13.5ms | ActiveRecord: 1.1ms | Allocations: 1650)


Started GET "/" for ::1 at 2022-02-17 12:52:01 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 5.4ms | Allocations: 1174)
Completed 200 OK in 11ms (Views: 8.4ms | ActiveRecord: 1.3ms | Allocations: 2656)


Started GET "/" for ::1 at 2022-02-17 12:52:01 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 4.0ms | Allocations: 1013)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 1.0ms | Allocations: 1351)


Started GET "/" for ::1 at 2022-02-17 12:52:02 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 11.9ms | Allocations: 1013)
Completed 200 OK in 14ms (Views: 10.7ms | ActiveRecord: 2.1ms | Allocations: 1350)


Started GET "/" for ::1 at 2022-02-17 12:52:02 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (2.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 10.1ms | Allocations: 1004)
Completed 200 OK in 11ms (Views: 8.6ms | ActiveRecord: 2.2ms | Allocations: 1332)


Started GET "/" for ::1 at 2022-02-17 12:52:15 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 4.7ms | Allocations: 1162)
Completed 200 OK in 11ms (Views: 9.3ms | ActiveRecord: 1.0ms | Allocations: 2630)


Started GET "/" for ::1 at 2022-02-17 12:52:16 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 5.3ms | Allocations: 1004)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 1.2ms | Allocations: 1333)


Started GET "/" for ::1 at 2022-02-17 12:52:17 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 9.6ms | Allocations: 1004)
Completed 200 OK in 11ms (Views: 8.5ms | ActiveRecord: 2.1ms | Allocations: 1332)


Started GET "/" for ::1 at 2022-02-17 12:52:17 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 4.4ms | Allocations: 1004)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 1.2ms | Allocations: 1332)


Started GET "/" for ::1 at 2022-02-17 12:52:17 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 6.4ms | Allocations: 1004)
Completed 200 OK in 8ms (Views: 6.6ms | ActiveRecord: 1.4ms | Allocations: 1332)


Started GET "/" for ::1 at 2022-02-17 12:52:18 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 5.1ms | Allocations: 1004)
Completed 200 OK in 7ms (Views: 4.7ms | ActiveRecord: 1.4ms | Allocations: 1332)


Started GET "/" for ::1 at 2022-02-17 12:53:37 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 5.8ms | Allocations: 1004)
Completed 200 OK in 9ms (Views: 6.2ms | ActiveRecord: 1.2ms | Allocations: 1332)


Started GET "/subs/1" for ::1 at 2022-02-17 12:53:38 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering subs/show.html.erb
  [1m[36mPost Load (3.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb (Duration: 12.8ms | Allocations: 4904)
Completed 200 OK in 20ms (Views: 11.7ms | ActiveRecord: 5.0ms | Allocations: 6070)


Started GET "/subs/new" for ::1 at 2022-02-17 12:53:40 +0700
Processing by SubsController#new as HTML
Redirected to http://localhost:3000/session/new
Filter chain halted as :require_current_user! rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.0ms | Allocations: 275)


Started GET "/session/new" for ::1 at 2022-02-17 12:53:41 +0700
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb
  Rendered shared/_errors.html.erb (Duration: 1.1ms | Allocations: 281)
  Rendered sessions/new.html.erb (Duration: 4.4ms | Allocations: 762)
Completed 200 OK in 8ms (Views: 7.4ms | ActiveRecord: 0.0ms | Allocations: 1643)


Started POST "/session" for ::1 at 2022-02-17 12:53:52 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve1", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve1"], ["LIMIT", 1]]
  ↳ app/models/user.rb:16:in `login_by_credentials'
Redirected to http://localhost:3000/
Completed 302 Found in 297ms (ActiveRecord: 8.2ms | Allocations: 7055)


Started GET "/" for ::1 at 2022-02-17 12:53:52 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 4.9ms | Allocations: 1008)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 1.0ms | Allocations: 1338)


Started GET "/subs/1" for ::1 at 2022-02-17 12:53:56 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering subs/show.html.erb
  [1m[36mPost Load (2.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb (Duration: 7.7ms | Allocations: 1150)
Completed 200 OK in 20ms (Views: 6.7ms | ActiveRecord: 3.4ms | Allocations: 2186)


Started GET "/subs/new" for ::1 at 2022-02-17 12:53:58 +0700
Processing by SubsController#new as HTML
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "PerWb_Y7lIBnbA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering subs/new.html.erb
  Rendered shared/_errors.html.erb (Duration: 0.2ms | Allocations: 59)
  Rendered subs/new.html.erb (Duration: 2.3ms | Allocations: 411)
Completed 200 OK in 15ms (Views: 3.8ms | ActiveRecord: 3.6ms | Allocations: 1869)


Started POST "/subs" for ::1 at 2022-02-17 12:54:16 +0700
Processing by SubsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "sub"=>{"title"=>"this is a new sub", "description"=>"this is the description..."}, "Create a new Sub"=>"Submit"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "PerWb_Y7lIBnbA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "PerWb_Y7lIBnbA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/subs_controller.rb:20:in `create'
  [1m[36mSub Create (1.6ms)[0m  [1m[32mINSERT INTO "subs" ("title", "user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "this is a new sub"], ["user_id", 1], ["description", "this is the description..."], ["created_at", "2022-02-17 05:54:16.110579"], ["updated_at", "2022-02-17 05:54:16.110579"]]
  ↳ app/controllers/subs_controller.rb:20:in `create'
  [1m[36mTRANSACTION (41.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/subs_controller.rb:20:in `create'
Redirected to http://localhost:3000/subs/4
Completed 302 Found in 83ms (ActiveRecord: 46.0ms | Allocations: 10555)


Started GET "/subs/4" for ::1 at 2022-02-17 12:54:16 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mSub Load (0.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering subs/show.html.erb
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 4]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb (Duration: 3.4ms | Allocations: 1072)
Completed 200 OK in 8ms (Views: 3.0ms | ActiveRecord: 2.3ms | Allocations: 2111)


Started GET "/" for ::1 at 2022-02-17 12:54:27 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (2.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 12.0ms | Allocations: 1047)
Completed 200 OK in 15ms (Views: 12.5ms | ActiveRecord: 2.2ms | Allocations: 1375)


Started GET "/" for ::1 at 2022-02-17 13:04:30 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 33.6ms | Allocations: 4588)
Completed 200 OK in 43ms (Views: 40.7ms | ActiveRecord: 18.1ms | Allocations: 6059)


Started GET "/" for ::1 at 2022-02-17 13:04:32 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 8.1ms | Allocations: 1046)
Completed 200 OK in 10ms (Views: 7.4ms | ActiveRecord: 1.9ms | Allocations: 1375)


Started GET "/" for ::1 at 2022-02-17 13:04:33 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 4.3ms | Allocations: 1046)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 1.2ms | Allocations: 1374)


Started GET "/subs/3" for ::1 at 2022-02-17 13:04:35 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering subs/show.html.erb
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb (Duration: 7.0ms | Allocations: 1296)
Completed 200 OK in 19ms (Views: 7.0ms | ActiveRecord: 6.6ms | Allocations: 2631)


Started GET "/" for ::1 at 2022-02-17 13:04:40 +0700
Processing by SubsController#index as HTML
  Rendering subs/index.html.erb
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb (Duration: 14.3ms | Allocations: 1047)
Completed 200 OK in 16ms (Views: 13.7ms | ActiveRecord: 2.1ms | Allocations: 1376)


Started GET "/" for ::1 at 2022-02-17 13:06:07 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 7.9ms | Allocations: 1216)
  [1m[36mUser Load (9.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "PerWb_Y7lIBnbA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "PerWb_Y7lIBnbA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 132.9ms | Allocations: 26257)
Completed 200 OK in 138ms (Views: 125.0ms | ActiveRecord: 11.9ms | Allocations: 27312)


Started GET "/" for ::1 at 2022-02-17 13:06:27 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 8.4ms | Allocations: 1219)
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "PerWb_Y7lIBnbA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "PerWb_Y7lIBnbA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.7ms | Allocations: 4190)
Completed 200 OK in 26ms (Views: 20.6ms | ActiveRecord: 4.4ms | Allocations: 5243)


Started DELETE "/session" for ::1 at 2022-02-17 13:06:29 +0700
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "PerWb_Y7lIBnbA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "steve1"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Update (13.4ms)[0m  [1m[33mUPDATE "users" SET "session_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["session_token", "jl9OK7QoOOUqCw"], ["updated_at", "2022-02-17 06:06:29.770210"], ["id", 1]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
Redirected to http://localhost:3000/session/new
Completed 302 Found in 36ms (ActiveRecord: 20.2ms | Allocations: 4584)


Started GET "/session/new" for ::1 at 2022-02-17 13:06:29 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 1.2ms | Allocations: 341)
  Rendered sessions/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 788)
  Rendered layout layouts/application.html.erb (Duration: 6.0ms | Allocations: 2177)
Completed 200 OK in 9ms (Views: 8.5ms | ActiveRecord: 0.0ms | Allocations: 2990)


Started GET "/session/new" for ::1 at 2022-02-17 13:11:05 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 1.3ms | Allocations: 330)
  Rendered sessions/new.html.erb within layouts/application (Duration: 3.2ms | Allocations: 819)
  Rendered layout layouts/application.html.erb (Duration: 9.2ms | Allocations: 2476)
Completed 200 OK in 15ms (Views: 14.4ms | ActiveRecord: 0.0ms | Allocations: 3505)


Started GET "/users/new" for ::1 at 2022-02-17 13:11:06 +0700
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.3ms | Allocations: 188)
  Rendered users/new.html.erb within layouts/application (Duration: 1.2ms | Allocations: 566)
  Rendered layout layouts/application.html.erb (Duration: 5.8ms | Allocations: 1954)
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms | Allocations: 2844)


Started GET "/session/new" for ::1 at 2022-02-17 13:11:07 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.4ms | Allocations: 188)
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.0ms | Allocations: 387)
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | Allocations: 1777)
Completed 200 OK in 7ms (Views: 6.1ms | ActiveRecord: 0.0ms | Allocations: 2054)


Started GET "/users/new" for ::1 at 2022-02-17 13:11:08 +0700
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.6ms | Allocations: 188)
  Rendered users/new.html.erb within layouts/application (Duration: 1.4ms | Allocations: 380)
  Rendered layout layouts/application.html.erb (Duration: 7.7ms | Allocations: 1765)
Completed 200 OK in 9ms (Views: 8.9ms | ActiveRecord: 0.0ms | Allocations: 2077)


Started GET "/" for ::1 at 2022-02-17 13:11:14 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 18.5ms | Allocations: 1216)
  Rendered layout layouts/application.html.erb (Duration: 28.1ms | Allocations: 2737)
Completed 200 OK in 42ms (Views: 38.1ms | ActiveRecord: 2.6ms | Allocations: 3569)


Started GET "/" for ::1 at 2022-02-17 13:12:24 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 9.4ms | Allocations: 1058)
  Rendered layout layouts/application.html.erb (Duration: 30.7ms | Allocations: 6061)
Completed 200 OK in 36ms (Views: 32.3ms | ActiveRecord: 1.6ms | Allocations: 6357)


Started GET "/" for ::1 at 2022-02-17 13:12:48 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 4.3ms | Allocations: 1058)
  Rendered layout layouts/application.html.erb (Duration: 31.9ms | Allocations: 6101)
Completed 200 OK in 34ms (Views: 31.6ms | ActiveRecord: 1.3ms | Allocations: 6396)


Started GET "/" for ::1 at 2022-02-17 13:12:56 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 6.8ms | Allocations: 1059)
  Rendered layout layouts/application.html.erb (Duration: 30.7ms | Allocations: 7602)
Completed 200 OK in 32ms (Views: 29.9ms | ActiveRecord: 1.6ms | Allocations: 7897)


Started GET "/subs/1" for ::1 at 2022-02-17 13:12:59 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 7.3ms | Allocations: 1384)
  Rendered layout layouts/application.html.erb (Duration: 10.8ms | Allocations: 2941)
Completed 200 OK in 17ms (Views: 10.0ms | ActiveRecord: 3.1ms | Allocations: 4073)


Started GET "/subs/1" for ::1 at 2022-02-17 13:13:06 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 4.3ms | Allocations: 1155)
  Rendered layout layouts/application.html.erb (Duration: 27.8ms | Allocations: 6159)
Completed 200 OK in 35ms (Views: 28.4ms | ActiveRecord: 2.6ms | Allocations: 7162)


Started GET "/posts/1" for ::1 at 2022-02-17 13:13:13 +0700

Zeitwerk::NameError - expected file /Users/tranlananh/Desktop/Code/daily_work_folder/stvp_reddit_clone/app/controllers/posts_controller.rb to define constant PostsController, but didn't:

Started POST "/__better_errors/4f0d4a7ccade91cd/variables" for ::1 at 2022-02-17 13:13:13 +0700
Started GET "/" for ::1 at 2022-02-17 13:28:45 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 87.4ms | Allocations: 4469)
  Rendered layout layouts/application.html.erb (Duration: 91.0ms | Allocations: 5985)
Completed 200 OK in 93ms (Views: 92.5ms | ActiveRecord: 22.2ms | Allocations: 6279)


Started GET "/subs" for ::1 at 2022-02-17 13:28:48 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 12.5ms | Allocations: 1058)
  Rendered layout layouts/application.html.erb (Duration: 15.3ms | Allocations: 2573)
Completed 200 OK in 17ms (Views: 14.0ms | ActiveRecord: 2.5ms | Allocations: 2869)


Started GET "/subs/1" for ::1 at 2022-02-17 13:28:51 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 6.0ms | Allocations: 1160)
  Rendered layout layouts/application.html.erb (Duration: 12.8ms | Allocations: 2676)
Completed 200 OK in 21ms (Views: 12.2ms | ActiveRecord: 4.7ms | Allocations: 3848)


Started GET "/posts/1" for ::1 at 2022-02-17 13:28:54 +0700

ActionController::RoutingError - uninitialized constant PostsController:

Started POST "/__better_errors/d9e273e53cf4c40c/variables" for ::1 at 2022-02-17 13:28:54 +0700
Started GET "/subs/1" for ::1 at 2022-02-17 13:28:56 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (4.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 10.2ms | Allocations: 1155)
  Rendered layout layouts/application.html.erb (Duration: 15.3ms | Allocations: 2671)
Completed 200 OK in 25ms (Views: 13.8ms | ActiveRecord: 6.2ms | Allocations: 3672)


Started GET "/subs/new" for ::1 at 2022-02-17 13:28:58 +0700
Processing by SubsController#new as HTML
Redirected to http://localhost:3000/session/new
Filter chain halted as :require_current_user! rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 288)


Started GET "/session/new" for ::1 at 2022-02-17 13:28:58 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 1.1ms | Allocations: 188)
  Rendered sessions/new.html.erb within layouts/application (Duration: 2.5ms | Allocations: 387)
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | Allocations: 1775)
Completed 200 OK in 7ms (Views: 7.0ms | ActiveRecord: 0.0ms | Allocations: 2051)


Started POST "/session" for ::1 at 2022-02-17 13:29:09 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve2", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve2"], ["LIMIT", 1]]
  ↳ app/models/user.rb:16:in `login_by_credentials'
Redirected to http://localhost:3000/
Completed 302 Found in 291ms (ActiveRecord: 1.8ms | Allocations: 1139)


Started GET "/" for ::1 at 2022-02-17 13:29:09 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 3.7ms | Allocations: 1058)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.4ms | Allocations: 3758)
Completed 200 OK in 14ms (Views: 11.0ms | ActiveRecord: 2.1ms | Allocations: 4052)


Started GET "/subs/1" for ::1 at 2022-02-17 13:29:18 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (5.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 10.5ms | Allocations: 1155)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.8ms | Allocations: 3848)
Completed 200 OK in 23ms (Views: 11.7ms | ActiveRecord: 7.9ms | Allocations: 4849)


  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started GET "/subs/1" for ::1 at 2022-02-17 15:36:30 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 23.8ms | Allocations: 13870)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 46.7ms | Allocations: 21974)
Completed 200 OK in 133ms (Views: 46.6ms | ActiveRecord: 63.5ms | Allocations: 32377)


Started GET "/posts/1" for ::1 at 2022-02-17 15:36:35 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 9.9ms | Allocations: 4717)
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.5ms | Allocations: 7417)
Completed 200 OK in 26ms (Views: 15.1ms | ActiveRecord: 4.9ms | Allocations: 9108)


Started GET "/posts/1/edit" for ::1 at 2022-02-17 15:36:49 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 16ms (ActiveRecord: 4.4ms | Allocations: 4038)


Started GET "/posts/1" for ::1 at 2022-02-17 15:36:49 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 4.5ms | Allocations: 1180)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.7ms | Allocations: 3873)
Completed 200 OK in 17ms (Views: 10.6ms | ActiveRecord: 3.8ms | Allocations: 4879)


Started GET "/posts/1/edit" for ::1 at 2022-02-17 15:36:51 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (5.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 20ms (ActiveRecord: 9.0ms | Allocations: 2782)


Started GET "/posts/1" for ::1 at 2022-02-17 15:36:51 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 3.9ms | Allocations: 1180)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.2ms | Allocations: 3873)
Completed 200 OK in 17ms (Views: 10.0ms | ActiveRecord: 3.9ms | Allocations: 4878)


Started DELETE "/session" for ::1 at 2022-02-17 15:36:56 +0700
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "QV2j73wj072T8w"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "steve2"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Update (4.8ms)[0m  [1m[33mUPDATE "users" SET "session_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["session_token", "XFtkjF_8m3TQIg"], ["updated_at", "2022-02-17 08:36:56.246608"], ["id", 2]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
Redirected to http://localhost:3000/session/new
Completed 302 Found in 26ms (ActiveRecord: 11.8ms | Allocations: 4471)


Started GET "/session/new" for ::1 at 2022-02-17 15:36:56 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 1.0ms | Allocations: 340)
  Rendered sessions/new.html.erb within layouts/application (Duration: 3.3ms | Allocations: 827)
  Rendered layout layouts/application.html.erb (Duration: 6.0ms | Allocations: 2215)
Completed 200 OK in 9ms (Views: 8.9ms | ActiveRecord: 0.0ms | Allocations: 3028)


Started POST "/session" for ::1 at 2022-02-17 15:37:02 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve1", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve1"], ["LIMIT", 1]]
  ↳ app/models/user.rb:16:in `login_by_credentials'
Redirected to http://localhost:3000/
Completed 302 Found in 286ms (ActiveRecord: 1.2ms | Allocations: 1240)


Started GET "/" for ::1 at 2022-02-17 15:37:03 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 4.6ms | Allocations: 1216)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "jl9OK7QoOOUqCw"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "jl9OK7QoOOUqCw"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.5ms | Allocations: 3916)
Completed 200 OK in 16ms (Views: 12.9ms | ActiveRecord: 2.3ms | Allocations: 4342)


Started DELETE "/session" for ::1 at 2022-02-17 15:37:07 +0700
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "jl9OK7QoOOUqCw"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "steve1"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Update (2.1ms)[0m  [1m[33mUPDATE "users" SET "session_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["session_token", "XNKN5b9_oP2JsA"], ["updated_at", "2022-02-17 08:37:07.577995"], ["id", 1]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mTRANSACTION (41.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
Redirected to http://localhost:3000/session/new
Completed 302 Found in 63ms (ActiveRecord: 48.9ms | Allocations: 4290)


Started GET "/session/new" for ::1 at 2022-02-17 15:37:07 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 1.2ms | Allocations: 198)
  Rendered sessions/new.html.erb within layouts/application (Duration: 2.2ms | Allocations: 397)
  Rendered layout layouts/application.html.erb (Duration: 7.8ms | Allocations: 1786)
Completed 200 OK in 9ms (Views: 9.0ms | ActiveRecord: 0.0ms | Allocations: 2064)


Started POST "/session" for ::1 at 2022-02-17 15:37:12 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve1", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve1"], ["LIMIT", 1]]
  ↳ app/models/user.rb:16:in `login_by_credentials'
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.3ms | Allocations: 52)
  Rendered sessions/new.html.erb within layouts/application (Duration: 2.5ms | Allocations: 239)
  Rendered layout layouts/application.html.erb (Duration: 10.1ms | Allocations: 1624)
Completed 200 OK in 314ms (Views: 12.3ms | ActiveRecord: 1.7ms | Allocations: 2918)


Started POST "/session" for ::1 at 2022-02-17 15:37:24 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve"], ["LIMIT", 1]]
  ↳ app/models/user.rb:16:in `login_by_credentials'
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.1ms | Allocations: 52)
  Rendered sessions/new.html.erb within layouts/application (Duration: 0.8ms | Allocations: 239)
  Rendered layout layouts/application.html.erb (Duration: 4.4ms | Allocations: 1623)
Completed 200 OK in 14ms (Views: 5.1ms | ActiveRecord: 2.6ms | Allocations: 2881)


Started POST "/session" for ::1 at 2022-02-17 15:37:30 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve1", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve1"], ["LIMIT", 1]]
  ↳ app/models/user.rb:16:in `login_by_credentials'
Redirected to http://localhost:3000/
Completed 302 Found in 284ms (ActiveRecord: 1.2ms | Allocations: 1142)


Started GET "/" for ::1 at 2022-02-17 15:37:30 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 5.6ms | Allocations: 1058)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.8ms | Allocations: 3751)
Completed 200 OK in 20ms (Views: 16.6ms | ActiveRecord: 2.4ms | Allocations: 4047)


Started GET "/subs/1" for ::1 at 2022-02-17 15:37:33 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (7.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 11.2ms | Allocations: 1157)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.7ms | Allocations: 3850)
Completed 200 OK in 23ms (Views: 10.6ms | ActiveRecord: 10.0ms | Allocations: 4852)


Started GET "/posts/1" for ::1 at 2022-02-17 15:37:36 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (3.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 8.8ms | Allocations: 1186)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 22.5ms | Allocations: 3886)
Completed 200 OK in 28ms (Views: 18.0ms | ActiveRecord: 6.6ms | Allocations: 4892)


Started GET "/posts/1/edit" for ::1 at 2022-02-17 15:37:40 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (3.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  Rendered posts/edit.html.erb within layouts/application (Duration: 19.0ms | Allocations: 8674)
  Rendered layout layouts/application.html.erb (Duration: 19.2ms | Allocations: 8758)
Completed 500 Internal Server Error in 41ms (ActiveRecord: 5.8ms | Allocations: 11790)



ActionView::MissingTemplate - Missing partial /_form with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}. Searched in:
  * "/Users/tranlananh/Desktop/Code/daily_work_folder/stvp_reddit_clone/app/views"
  * "/Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/actiontext-6.1.4.6/app/views"
  * "/Users/tranlananh/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/actionmailbox-6.1.4.6/app/views":
  app/views/posts/edit.html.erb:1
  app/controllers/posts_controller.rb:33:in `edit'

Started POST "/__better_errors/83fc1eb50929a54c/variables" for ::1 at 2022-02-17 15:37:40 +0700
  [1m[36mSub Load (6.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Sub Load (0.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/posts/1/edit" for ::1 at 2022-02-17 15:38:22 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 9.9ms | Allocations: 2340)
  Rendered posts/edit.html.erb within layouts/application (Duration: 11.0ms | Allocations: 2678)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | Allocations: 5264)
Completed 200 OK in 38ms (Views: 17.8ms | ActiveRecord: 11.0ms | Allocations: 8944)


Started GET "/posts/1?authenticity_token=[FILTERED]&post%5Btitle%5D=Post+one&post%5Bcontent%5D=this+is+the+content+of+sub+1&post%5Burl%5D=popping.com&post%5Bsub_ids%5D%5B%5D=1&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 15:38:58 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"Post one", "content"=>"this is the content of sub 1", "url"=>"popping.com", "sub_ids"=>["1", "4"]}, "id"=>"1"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 5.0ms | Allocations: 1408)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | Allocations: 4108)
Completed 200 OK in 22ms (Views: 12.8ms | ActiveRecord: 3.8ms | Allocations: 5244)


Started GET "/subs/1" for ::1 at 2022-02-17 15:39:00 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 5.3ms | Allocations: 1378)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.4ms | Allocations: 4078)
Completed 200 OK in 26ms (Views: 17.4ms | ActiveRecord: 4.2ms | Allocations: 5611)


Started GET "/posts/1" for ::1 at 2022-02-17 15:39:07 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 5.8ms | Allocations: 1186)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | Allocations: 3886)
Completed 200 OK in 18ms (Views: 8.8ms | ActiveRecord: 4.7ms | Allocations: 4892)


Started GET "/posts/1/edit" for ::1 at 2022-02-17 15:39:11 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (4.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 9.2ms | Allocations: 1908)
  Rendered posts/edit.html.erb within layouts/application (Duration: 9.5ms | Allocations: 2023)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.1ms | Allocations: 4333)
Completed 200 OK in 31ms (Views: 9.2ms | ActiveRecord: 12.3ms | Allocations: 7256)


Started GET "/posts/1?authenticity_token=[FILTERED]&post%5Btitle%5D=Post+one&post%5Bcontent%5D=this+is+the+content+of+sub+1&post%5Burl%5D=popping.com&post%5Bsub_ids%5D%5B%5D=1&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 15:39:38 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"Post one", "content"=>"this is the content of sub 1", "url"=>"popping.com", "sub_ids"=>["1", "4"]}, "id"=>"1"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 7.4ms | Allocations: 1180)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.9ms | Allocations: 3873)
Completed 200 OK in 21ms (Views: 14.4ms | ActiveRecord: 3.5ms | Allocations: 4878)


Started GET "/posts/new" for ::1 at 2022-02-17 15:40:23 +0700
Processing by PostsController#new as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  Rendered posts/_form.html.erb (Duration: 20.4ms | Allocations: 6921)
  Rendered posts/new.html.erb within layouts/application (Duration: 21.8ms | Allocations: 7128)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 29.2ms | Allocations: 9444)
Completed 200 OK in 34ms (Views: 28.3ms | ActiveRecord: 2.8ms | Allocations: 10774)


Started POST "/posts" for ::1 at 2022-02-17 15:40:37 +0700
Processing by PostsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com", "sub_ids"=>["3", "4"]}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.2ms | Allocations: 1907)



ArgumentError - wrong number of arguments (given 0, expected 1..2):
  app/controllers/posts_controller.rb:50:in `post_params'
  app/controllers/posts_controller.rb:15:in `create'

Started POST "/__better_errors/5810ef2529a8bb16/variables" for ::1 at 2022-02-17 15:40:38 +0700
Started POST "/__better_errors/5810ef2529a8bb16/eval" for ::1 at 2022-02-17 15:40:45 +0700
Started POST "/__better_errors/5810ef2529a8bb16/eval" for ::1 at 2022-02-17 15:40:51 +0700
Started POST "/__better_errors/5810ef2529a8bb16/eval" for ::1 at 2022-02-17 15:42:43 +0700
Started POST "/__better_errors/5810ef2529a8bb16/eval" for ::1 at 2022-02-17 15:42:50 +0700
Started POST "/__better_errors/5810ef2529a8bb16/eval" for ::1 at 2022-02-17 15:43:00 +0700
Started POST "/__better_errors/5810ef2529a8bb16/eval" for ::1 at 2022-02-17 15:45:09 +0700
Started POST "/__better_errors/5810ef2529a8bb16/eval" for ::1 at 2022-02-17 15:45:47 +0700
Started POST "/posts" for ::1 at 2022-02-17 15:46:10 +0700
Processing by PostsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com", "sub_ids"=>["3", "4"]}}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" IN ($1, $2)[0m  [["id", 3], ["id", 4]]
  ↳ app/controllers/posts_controller.rb:15:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/posts_controller.rb:17:in `create'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:17:in `create'
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:17:in `create'
  [1m[36mPost Create (2.6ms)[0m  [1m[32mINSERT INTO "posts" ("title", "content", "url", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "post 2"], ["content", "content 2..."], ["url", "2.com"], ["user_id", 1], ["created_at", "2022-02-17 08:46:10.758731"], ["updated_at", "2022-02-17 08:46:10.758731"]]
  ↳ app/controllers/posts_controller.rb:17:in `create'
  [1m[36mPostSub Create (1.8ms)[0m  [1m[32mINSERT INTO "post_subs" ("sub_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sub_id", 3], ["post_id", 3], ["created_at", "2022-02-17 08:46:10.764120"], ["updated_at", "2022-02-17 08:46:10.764120"]]
  ↳ app/controllers/posts_controller.rb:17:in `create'
  [1m[36mPostSub Create (1.5ms)[0m  [1m[32mINSERT INTO "post_subs" ("sub_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sub_id", 4], ["post_id", 3], ["created_at", "2022-02-17 08:46:10.769423"], ["updated_at", "2022-02-17 08:46:10.769423"]]
  ↳ app/controllers/posts_controller.rb:17:in `create'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/posts_controller.rb:17:in `create'
Redirected to http://localhost:3000/posts/3
Completed 302 Found in 171ms (ActiveRecord: 39.5ms | Allocations: 42142)


Started GET "/posts/3" for ::1 at 2022-02-17 15:46:10 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 5.9ms | Allocations: 1492)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.1ms | Allocations: 4195)
Completed 200 OK in 27ms (Views: 14.1ms | ActiveRecord: 5.0ms | Allocations: 5475)


Started GET "/posts/3/edit" for ::1 at 2022-02-17 15:46:19 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 8.2ms | Allocations: 1919)
  Rendered posts/edit.html.erb within layouts/application (Duration: 8.4ms | Allocations: 2034)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | Allocations: 4344)
Completed 200 OK in 28ms (Views: 10.6ms | ActiveRecord: 7.5ms | Allocations: 7436)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+2...&post%5Burl%5D=2.com&post%5Bsub_ids%5D%5B%5D=1&post%5Bsub_ids%5D%5B%5D=2" for ::1 at 2022-02-17 15:46:25 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com", "sub_ids"=>["1", "2"]}, "id"=>"3"}
  [1m[36mPost Load (2.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 6.4ms | Allocations: 1184)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.4ms | Allocations: 3878)
Completed 200 OK in 24ms (Views: 13.1ms | ActiveRecord: 5.4ms | Allocations: 4885)


Started GET "/posts/3/edit" for ::1 at 2022-02-17 15:46:30 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 6.6ms | Allocations: 1911)
  Rendered posts/edit.html.erb within layouts/application (Duration: 6.9ms | Allocations: 2026)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.0ms | Allocations: 4336)
Completed 200 OK in 26ms (Views: 10.8ms | ActiveRecord: 7.3ms | Allocations: 7262)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+2...&post%5Burl%5D=2.com&post%5Bsub_ids%5D%5B%5D=1" for ::1 at 2022-02-17 15:46:35 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com", "sub_ids"=>["1"]}, "id"=>"3"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 5.3ms | Allocations: 1184)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.9ms | Allocations: 3878)
Completed 200 OK in 18ms (Views: 10.9ms | ActiveRecord: 3.6ms | Allocations: 4885)


Started GET "/posts/3/edit" for ::1 at 2022-02-17 15:46:40 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 9.2ms | Allocations: 1911)
  Rendered posts/edit.html.erb within layouts/application (Duration: 9.6ms | Allocations: 2026)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.7ms | Allocations: 4337)
Completed 200 OK in 33ms (Views: 12.2ms | ActiveRecord: 8.0ms | Allocations: 7264)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+3...&post%5Burl%5D=2.com&post%5Bsub_ids%5D%5B%5D=1&post%5Bsub_ids%5D%5B%5D=3&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 15:46:49 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 3...", "url"=>"2.com", "sub_ids"=>["1", "3", "4"]}, "id"=>"3"}
  [1m[36mPost Load (0.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 6.0ms | Allocations: 1184)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.2ms | Allocations: 3879)
Completed 200 OK in 18ms (Views: 10.5ms | ActiveRecord: 4.0ms | Allocations: 4886)


Started GET "/posts/3/edit" for ::1 at 2022-02-17 15:49:37 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 29.6ms | Allocations: 13715)
  Rendered posts/edit.html.erb within layouts/application (Duration: 29.9ms | Allocations: 13830)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 35.2ms | Allocations: 16147)
Completed 200 OK in 99ms (Views: 23.0ms | ActiveRecord: 44.3ms | Allocations: 34827)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+2...&post%5Burl%5D=3.com&post%5Bsub_ids%5D%5B%5D=1&post%5Bsub_ids%5D%5B%5D=3&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 15:49:44 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"3.com", "sub_ids"=>["1", "3", "4"]}, "id"=>"3"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 5.5ms | Allocations: 1481)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.1ms | Allocations: 4175)
Completed 200 OK in 19ms (Views: 12.8ms | ActiveRecord: 3.6ms | Allocations: 5182)


Started GET "/posts/3/edit" for ::1 at 2022-02-17 15:49:53 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (3.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 10.0ms | Allocations: 1911)
  Rendered posts/edit.html.erb within layouts/application (Duration: 10.5ms | Allocations: 2026)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.1ms | Allocations: 4336)
Completed 200 OK in 33ms (Views: 12.4ms | ActiveRecord: 9.8ms | Allocations: 7262)


Started GET "/posts/3/edit" for ::1 at 2022-02-17 15:51:08 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 35.5ms | Allocations: 13733)
  Rendered posts/edit.html.erb within layouts/application (Duration: 36.3ms | Allocations: 13848)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 41.7ms | Allocations: 16165)
Completed 200 OK in 103ms (Views: 30.5ms | ActiveRecord: 31.2ms | Allocations: 34665)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+2...&post%5Burl%5D=2.com&post%5Bsub_ids%5D%5B%5D=3&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 15:51:11 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com", "sub_ids"=>["3", "4"]}, "id"=>"3"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 4.0ms | Allocations: 1481)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.4ms | Allocations: 4175)
Completed 200 OK in 22ms (Views: 10.7ms | ActiveRecord: 3.5ms | Allocations: 5182)


Started GET "/posts/3/edit" for ::1 at 2022-02-17 15:51:19 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (2.9ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 9.5ms | Allocations: 1911)
  Rendered posts/edit.html.erb within layouts/application (Duration: 9.8ms | Allocations: 2026)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.7ms | Allocations: 4336)
Completed 200 OK in 32ms (Views: 10.5ms | ActiveRecord: 12.1ms | Allocations: 7262)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+2...&post%5Burl%5D=2.com&post%5Bsub_ids%5D%5B%5D=3&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 15:51:21 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com", "sub_ids"=>["3", "4"]}, "id"=>"3"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 3.4ms | Allocations: 1184)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 9.9ms | Allocations: 3878)
Completed 200 OK in 19ms (Views: 8.5ms | ActiveRecord: 3.3ms | Allocations: 4885)


Started GET "/posts/3/edit" for ::1 at 2022-02-17 15:53:33 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 10.7ms | Allocations: 1911)
  Rendered posts/edit.html.erb within layouts/application (Duration: 11.1ms | Allocations: 2026)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.8ms | Allocations: 4336)
Completed 200 OK in 33ms (Views: 14.4ms | ActiveRecord: 11.0ms | Allocations: 7262)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+2...&post%5Burl%5D=2.com&post%5Bsub_ids%5D%5B%5D=3&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 16:10:57 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com", "sub_ids"=>["3", "4"]}, "id"=>"3"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 10.5ms | Allocations: 1445)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 27.8ms | Allocations: 4421)
Completed 200 OK in 163ms (Views: 59.1ms | ActiveRecord: 66.7ms | Allocations: 9466)


Started GET "/posts/3/edit" for ::1 at 2022-02-17 16:11:01 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (98.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (4.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 13.0ms | Allocations: 2325)
  Rendered posts/edit.html.erb within layouts/application (Duration: 15.1ms | Allocations: 2659)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.3ms | Allocations: 4975)
Completed 200 OK in 160ms (Views: 16.9ms | ActiveRecord: 108.8ms | Allocations: 8038)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+2...&post%5Burl%5D=2.com.vn&post%5Bsub_ids%5D%5B%5D=1" for ::1 at 2022-02-17 16:11:13 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com.vn", "sub_ids"=>["1"]}, "id"=>"3"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 4.6ms | Allocations: 1189)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.9ms | Allocations: 3883)
Completed 200 OK in 25ms (Views: 12.5ms | ActiveRecord: 4.5ms | Allocations: 4891)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+2...&post%5Burl%5D=2.com.vn&post%5Bsub_ids%5D%5B%5D=1" for ::1 at 2022-02-17 16:11:23 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com.vn", "sub_ids"=>["1"]}, "id"=>"3"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 5.9ms | Allocations: 1186)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.7ms | Allocations: 3880)
Completed 200 OK in 20ms (Views: 11.2ms | ActiveRecord: 4.8ms | Allocations: 4887)


Started GET "/posts/3/edit" for ::1 at 2022-02-17 16:11:34 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (5.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 9.6ms | Allocations: 1911)
  Rendered posts/edit.html.erb within layouts/application (Duration: 10.1ms | Allocations: 2026)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.0ms | Allocations: 4336)
Completed 200 OK in 34ms (Views: 13.8ms | ActiveRecord: 11.1ms | Allocations: 7262)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+2...&post%5Burl%5D=2.com&post%5Bsub_ids%5D%5B%5D=3&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 16:12:29 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com", "sub_ids"=>["3", "4"]}, "id"=>"3"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 4.0ms | Allocations: 1186)
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.0ms | Allocations: 3880)
Completed 200 OK in 18ms (Views: 9.2ms | ActiveRecord: 5.6ms | Allocations: 4887)


Started GET "/posts/3/edit" for ::1 at 2022-02-17 16:14:27 +0700

SyntaxError - syntax error, unexpected '(', expecting ')'
...f @post.try(:update_attributes(post_params))
...                              ^
/Users/tranlananh/Desktop/Code/daily_work_folder/stvp_reddit_clone/app/controllers/posts_controller.rb:55: syntax error, unexpected keyword_end, expecting end-of-input:
  app/controllers/posts_controller.rb:41:in `'

Started POST "/__better_errors/f598d5b28e044170/variables" for ::1 at 2022-02-17 16:14:27 +0700
Started GET "/posts/3/edit" for ::1 at 2022-02-17 16:22:02 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (2.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 35.2ms | Allocations: 13718)
  Rendered posts/edit.html.erb within layouts/application (Duration: 35.4ms | Allocations: 13833)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 42.9ms | Allocations: 16150)
Completed 200 OK in 169ms (Views: 27.9ms | ActiveRecord: 100.7ms | Allocations: 38260)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+2...&post%5Burl%5D=2.com&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 16:22:05 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com", "sub_ids"=>["4"]}, "id"=>"3"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 12.3ms | Allocations: 1488)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.6ms | Allocations: 4183)
Completed 200 OK in 25ms (Views: 16.5ms | ActiveRecord: 3.8ms | Allocations: 5191)


Started GET "/posts/3/edit" for ::1 at 2022-02-17 16:22:25 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 8.8ms | Allocations: 1911)
  Rendered posts/edit.html.erb within layouts/application (Duration: 9.0ms | Allocations: 2026)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.0ms | Allocations: 4336)
Completed 200 OK in 33ms (Views: 14.1ms | ActiveRecord: 6.4ms | Allocations: 7263)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+2...&post%5Burl%5D=2.com&post%5Bsub_ids%5D%5B%5D=3&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 16:22:37 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com", "sub_ids"=>["3", "4"]}, "id"=>"3"}
  [1m[36mPost Load (2.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 4.4ms | Allocations: 1186)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.3ms | Allocations: 3880)
Completed 200 OK in 20ms (Views: 10.2ms | ActiveRecord: 4.9ms | Allocations: 4887)


Started GET "/posts/3/edit" for ::1 at 2022-02-17 16:23:24 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 9.5ms | Allocations: 1911)
  Rendered posts/edit.html.erb within layouts/application (Duration: 9.9ms | Allocations: 2026)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.1ms | Allocations: 4336)
Completed 200 OK in 35ms (Views: 14.0ms | ActiveRecord: 8.0ms | Allocations: 7262)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+2...&post%5Burl%5D=2.com&post%5Bsub_ids%5D%5B%5D=3&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 16:23:31 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com", "sub_ids"=>["3", "4"]}, "id"=>"3"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (3.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 7.4ms | Allocations: 1186)
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.6ms | Allocations: 3880)
Completed 200 OK in 25ms (Views: 13.3ms | ActiveRecord: 6.1ms | Allocations: 4887)


  [1m[36mPost Load (2.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPost Update (1.9ms)[0m  [1m[33mUPDATE "posts" SET "title" = $1, "content" = $2, "updated_at" = $3 WHERE "posts"."id" = $4[0m  [["title", "edited post 1"], ["content", "added content"], ["updated_at", "2022-02-17 09:30:28.722984"], ["id", 1]]
  [1m[36mTRANSACTION (121.6ms)[0m  [1m[35mCOMMIT[0m
Started GET "/posts/3/edit" for ::1 at 2022-02-17 16:31:07 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 21.8ms | Allocations: 12864)
  Rendered posts/edit.html.erb within layouts/application (Duration: 23.5ms | Allocations: 13208)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 31.1ms | Allocations: 15795)
Completed 200 OK in 146ms (Views: 32.9ms | ActiveRecord: 65.2ms | Allocations: 36888)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+2...&post%5Burl%5D=2.com&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 16:31:11 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com", "sub_ids"=>["4"]}, "id"=>"3"}
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (3.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 14.8ms | Allocations: 1739)
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 26.1ms | Allocations: 4440)
Completed 200 OK in 32ms (Views: 22.7ms | ActiveRecord: 6.7ms | Allocations: 5578)


Started GET "/posts/3/edit" for ::1 at 2022-02-17 16:31:15 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 7.0ms | Allocations: 1912)
  Rendered posts/edit.html.erb within layouts/application (Duration: 7.3ms | Allocations: 2027)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.3ms | Allocations: 4337)
Completed 200 OK in 33ms (Views: 13.1ms | ActiveRecord: 9.8ms | Allocations: 7264)


Started GET "/posts/3?authenticity_token=[FILTERED]&post%5Btitle%5D=post+2&post%5Bcontent%5D=content+2...&post%5Burl%5D=2.com.vn&post%5Bsub_ids%5D%5B%5D=3&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 16:31:20 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"post 2", "content"=>"content 2...", "url"=>"2.com.vn", "sub_ids"=>["3", "4"]}, "id"=>"3"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 5.2ms | Allocations: 1186)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.1ms | Allocations: 3880)
Completed 200 OK in 18ms (Views: 9.7ms | ActiveRecord: 3.9ms | Allocations: 4887)


  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  [1m[36mSub Load (2.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  [1m[36mPostSub Destroy (0.4ms)[0m  [1m[31mDELETE FROM "post_subs" WHERE "post_subs"."post_id" = $1 AND "post_subs"."sub_id" = $2[0m  [["post_id", 1], ["sub_id", 2]]
  [1m[36mPostSub Create (2.5ms)[0m  [1m[32mINSERT INTO "post_subs" ("sub_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sub_id", 4], ["post_id", 1], ["created_at", "2022-02-17 09:34:11.428737"], ["updated_at", "2022-02-17 09:34:11.428737"]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  [1m[36mPost Update (54.4ms)[0m  [1m[33mUPDATE "posts" SET "title" = $1, "updated_at" = $2 WHERE "posts"."id" = $3[0m  [["title", nil], ["updated_at", "2022-02-17 09:36:08.192207"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSub Load (0.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  [1m[36mPost Update (1.7ms)[0m  [1m[33mUPDATE "posts" SET "title" = $1, "updated_at" = $2 WHERE "posts"."id" = $3[0m  [["title", "edit number 2"], ["updated_at", "2022-02-17 09:36:08.192207"], ["id", 1]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
Started GET "/subs" for ::1 at 2022-02-17 16:36:48 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 32.8ms | Allocations: 7874)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 50.3ms | Allocations: 15899)
Completed 200 OK in 59ms (Views: 52.9ms | ActiveRecord: 19.2ms | Allocations: 18752)


Started GET "/subs/1" for ::1 at 2022-02-17 16:36:49 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (3.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 26.2ms | Allocations: 13908)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 35.1ms | Allocations: 16609)
Completed 200 OK in 48ms (Views: 33.9ms | ActiveRecord: 6.1ms | Allocations: 17843)


Started GET "/posts/1" for ::1 at 2022-02-17 16:36:52 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 8.4ms | Allocations: 4484)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.9ms | Allocations: 7186)
Completed 200 OK in 23ms (Views: 15.2ms | ActiveRecord: 3.8ms | Allocations: 8496)


Started GET "/posts/1/edit" for ::1 at 2022-02-17 16:36:54 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (2.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 10.3ms | Allocations: 1916)
  Rendered posts/edit.html.erb within layouts/application (Duration: 10.6ms | Allocations: 2031)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.6ms | Allocations: 4341)
Completed 200 OK in 43ms (Views: 11.1ms | ActiveRecord: 10.0ms | Allocations: 8520)


Started GET "/posts/1?authenticity_token=[FILTERED]&post%5Btitle%5D=edit+number+2&post%5Bcontent%5D=added+content&post%5Burl%5D=&post%5Bsub_ids%5D%5B%5D=1&post%5Bsub_ids%5D%5B%5D=2&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 16:36:58 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"edit number 2", "content"=>"added content", "url"=>"", "sub_ids"=>["1", "2", "4"]}, "id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 6.1ms | Allocations: 1183)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.2ms | Allocations: 3877)
Completed 200 OK in 17ms (Views: 8.9ms | ActiveRecord: 4.8ms | Allocations: 4883)


Started GET "/posts/1/edit" for ::1 at 2022-02-17 16:37:01 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 7.0ms | Allocations: 1909)
  Rendered posts/edit.html.erb within layouts/application (Duration: 7.6ms | Allocations: 2024)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.3ms | Allocations: 4334)
Completed 200 OK in 34ms (Views: 13.4ms | ActiveRecord: 11.1ms | Allocations: 7259)


Started GET "/posts/1?authenticity_token=[FILTERED]&post%5Btitle%5D=edit+number+2&post%5Bcontent%5D=added+content&post%5Burl%5D=&post%5Bsub_ids%5D%5B%5D=1" for ::1 at 2022-02-17 16:37:03 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"edit number 2", "content"=>"added content", "url"=>"", "sub_ids"=>["1"]}, "id"=>"1"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 4.7ms | Allocations: 1183)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.8ms | Allocations: 3877)
Completed 200 OK in 21ms (Views: 14.4ms | ActiveRecord: 4.0ms | Allocations: 4883)


Started GET "/posts/1/edit" for ::1 at 2022-02-17 16:40:11 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (2.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 35.8ms | Allocations: 13712)
  Rendered posts/edit.html.erb within layouts/application (Duration: 36.1ms | Allocations: 13827)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 49.1ms | Allocations: 16146)
Completed 200 OK in 135ms (Views: 35.6ms | ActiveRecord: 50.4ms | Allocations: 34803)


Started GET "/posts/1?authenticity_token=[FILTERED]&post%5Btitle%5D=edit+number+2&post%5Bcontent%5D=added+content&post%5Burl%5D=&post%5Bsub_ids%5D%5B%5D=1&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 16:40:13 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"edit number 2", "content"=>"added content", "url"=>"", "sub_ids"=>["1", "4"]}, "id"=>"1"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 5.3ms | Allocations: 1480)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.0ms | Allocations: 4174)
Completed 200 OK in 20ms (Views: 11.6ms | ActiveRecord: 4.3ms | Allocations: 5180)


Started GET "/posts/1/edit" for ::1 at 2022-02-17 16:40:18 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (3.0ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 10.1ms | Allocations: 1910)
  Rendered posts/edit.html.erb within layouts/application (Duration: 10.9ms | Allocations: 2025)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.1ms | Allocations: 4335)
Completed 200 OK in 30ms (Views: 11.7ms | ActiveRecord: 8.8ms | Allocations: 7260)


Started GET "/posts/1?authenticity_token=[FILTERED]&post%5Btitle%5D=edit+number+2&post%5Bcontent%5D=added+content&post%5Burl%5D=&post%5Bsub_ids%5D%5B%5D=1" for ::1 at 2022-02-17 16:40:21 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"edit number 2", "content"=>"added content", "url"=>"", "sub_ids"=>["1"]}, "id"=>"1"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 5.1ms | Allocations: 1183)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | Allocations: 3877)
Completed 200 OK in 19ms (Views: 11.4ms | ActiveRecord: 3.7ms | Allocations: 4883)


Started GET "/posts/1/edit" for ::1 at 2022-02-17 16:53:39 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 7.8ms | Allocations: 1914)
  Rendered posts/edit.html.erb within layouts/application (Duration: 8.1ms | Allocations: 2029)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.1ms | Allocations: 4339)
Completed 200 OK in 94ms (Views: 10.2ms | ActiveRecord: 64.7ms | Allocations: 10588)


Started GET "/posts/1?authenticity_token=[FILTERED]&post%5Btitle%5D=edit+number+2&post%5Bcontent%5D=added+content&post%5Burl%5D=&post%5Bsub_ids%5D%5B%5D=1&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 16:53:43 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"edit number 2", "content"=>"added content", "url"=>"", "sub_ids"=>["1", "4"]}, "id"=>"1"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 5.4ms | Allocations: 1188)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | Allocations: 3882)
Completed 200 OK in 21ms (Views: 13.4ms | ActiveRecord: 3.5ms | Allocations: 4888)


Started GET "/posts/1/edit" for ::1 at 2022-02-17 17:00:21 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (2.1ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 19.7ms | Allocations: 12442)
  Rendered posts/edit.html.erb within layouts/application (Duration: 20.2ms | Allocations: 12557)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 26.3ms | Allocations: 14874)
Completed 200 OK in 133ms (Views: 24.1ms | ActiveRecord: 62.7ms | Allocations: 35329)


Started GET "/posts/1?authenticity_token=[FILTERED]&post%5Btitle%5D=edit+number+2&post%5Bcontent%5D=added+content&post%5Burl%5D=&post%5Bsub_ids%5D%5B%5D=1&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 17:00:23 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"edit number 2", "content"=>"added content", "url"=>"", "sub_ids"=>["1", "4"]}, "id"=>"1"}
  [1m[36mPost Load (2.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 6.2ms | Allocations: 1485)
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.7ms | Allocations: 4179)
Completed 200 OK in 29ms (Views: 13.1ms | ActiveRecord: 7.1ms | Allocations: 5185)


Started GET "/posts/1?authenticity_token=[FILTERED]&post%5Btitle%5D=edit+number+2&post%5Bcontent%5D=added+content&post%5Burl%5D=&post%5Bsub_ids%5D%5B%5D=1&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 17:01:01 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"edit number 2", "content"=>"added content", "url"=>"", "sub_ids"=>["1", "4"]}, "id"=>"1"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 32.8ms | Allocations: 14364)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 68.2ms | Allocations: 22910)
Completed 200 OK in 101ms (Views: 49.1ms | ActiveRecord: 35.3ms | Allocations: 30867)


Started GET "/posts/1/edit" for ::1 at 2022-02-17 17:01:04 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (2.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:28
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/_form.html.erb:29
  Rendered posts/_form.html.erb (Duration: 8.7ms | Allocations: 1912)
  Rendered posts/edit.html.erb within layouts/application (Duration: 9.1ms | Allocations: 2027)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.4ms | Allocations: 4338)
Completed 200 OK in 39ms (Views: 14.6ms | ActiveRecord: 10.5ms | Allocations: 8513)


Started GET "/posts/1?authenticity_token=[FILTERED]&post%5Btitle%5D=edit+number+2&post%5Bcontent%5D=added+content&post%5Burl%5D=&post%5Bsub_ids%5D%5B%5D=1&post%5Bsub_ids%5D%5B%5D=4" for ::1 at 2022-02-17 17:01:05 +0700
Processing by PostsController#show as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"edit number 2", "content"=>"added content", "url"=>"", "sub_ids"=>["1", "4"]}, "id"=>"1"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 8.5ms | Allocations: 1183)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 23.2ms | Allocations: 3877)
Completed 200 OK in 29ms (Views: 21.4ms | ActiveRecord: 4.2ms | Allocations: 4883)


Started GET "/posts/1/edit" for ::1 at 2022-02-17 17:43:05 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (2.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:33
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/_form.html.erb:34
  Rendered posts/_form.html.erb (Duration: 27.8ms | Allocations: 12861)
  Rendered posts/edit.html.erb within layouts/application (Duration: 30.0ms | Allocations: 13204)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 38.6ms | Allocations: 15791)
Completed 200 OK in 152ms (Views: 39.0ms | ActiveRecord: 64.9ms | Allocations: 36882)


Started PATCH "/posts/1" for ::1 at 2022-02-17 17:43:09 +0700
Processing by PostsController#update as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"edit number 2", "content"=>"added content", "url"=>"", "sub_ids"=>["4"]}, "id"=>"1"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:40:in `update'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/posts_controller.rb:41:in `update'
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/posts_controller.rb:41:in `update'
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/controllers/posts_controller.rb:41:in `update'
  [1m[36mPostSub Destroy (1.1ms)[0m  [1m[31mDELETE FROM "post_subs" WHERE "post_subs"."post_id" = $1 AND "post_subs"."sub_id" = $2[0m  [["post_id", 1], ["sub_id", 1]]
  ↳ app/controllers/posts_controller.rb:41:in `update'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:41:in `update'
  [1m[36mPost Update (1.4ms)[0m  [1m[33mUPDATE "posts" SET "url" = $1, "updated_at" = $2 WHERE "posts"."id" = $3[0m  [["url", ""], ["updated_at", "2022-02-17 10:43:09.962690"], ["id", 1]]
  ↳ app/controllers/posts_controller.rb:41:in `update'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/posts_controller.rb:41:in `update'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 49ms (ActiveRecord: 20.0ms | Allocations: 8655)


Started GET "/posts/1" for ::1 at 2022-02-17 17:43:10 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 4.8ms | Allocations: 1395)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.7ms | Allocations: 4097)
Completed 200 OK in 21ms (Views: 11.2ms | ActiveRecord: 4.7ms | Allocations: 5235)


Started GET "/posts/1/edit" for ::1 at 2022-02-17 17:43:14 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:27:in `edit'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:30:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/edit.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:33
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "subs"."id" FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/_form.html.erb:34
  Rendered posts/_form.html.erb (Duration: 7.6ms | Allocations: 1909)
  Rendered posts/edit.html.erb within layouts/application (Duration: 8.0ms | Allocations: 2024)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.8ms | Allocations: 4334)
Completed 200 OK in 26ms (Views: 10.3ms | ActiveRecord: 7.1ms | Allocations: 7261)


Started PATCH "/posts/1" for ::1 at 2022-02-17 17:43:30 +0700
Processing by PostsController#update as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"edit number 2", "content"=>"added content from steeve", "url"=>"new.com.vn", "sub_ids"=>["1", "2", "3", "4"]}, "id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:40:in `update'
  [1m[36mTRANSACTION (5.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/posts_controller.rb:41:in `update'
  [1m[36mSub Load (3.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" IN ($1, $2, $3, $4)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 4]]
  ↳ app/controllers/posts_controller.rb:41:in `update'
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/controllers/posts_controller.rb:41:in `update'
  [1m[36mPostSub Create (1.5ms)[0m  [1m[32mINSERT INTO "post_subs" ("sub_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sub_id", 1], ["post_id", 1], ["created_at", "2022-02-17 10:43:30.259811"], ["updated_at", "2022-02-17 10:43:30.259811"]]
  ↳ app/controllers/posts_controller.rb:41:in `update'
  [1m[36mPostSub Create (1.3ms)[0m  [1m[32mINSERT INTO "post_subs" ("sub_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sub_id", 2], ["post_id", 1], ["created_at", "2022-02-17 10:43:30.263835"], ["updated_at", "2022-02-17 10:43:30.263835"]]
  ↳ app/controllers/posts_controller.rb:41:in `update'
  [1m[36mPostSub Create (1.4ms)[0m  [1m[32mINSERT INTO "post_subs" ("sub_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sub_id", 3], ["post_id", 1], ["created_at", "2022-02-17 10:43:30.268600"], ["updated_at", "2022-02-17 10:43:30.268600"]]
  ↳ app/controllers/posts_controller.rb:41:in `update'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:41:in `update'
  [1m[36mPost Update (1.3ms)[0m  [1m[33mUPDATE "posts" SET "content" = $1, "url" = $2, "updated_at" = $3 WHERE "posts"."id" = $4[0m  [["content", "added content from steeve"], ["url", "new.com.vn"], ["updated_at", "2022-02-17 10:43:30.275562"], ["id", 1]]
  ↳ app/controllers/posts_controller.rb:41:in `update'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/posts_controller.rb:41:in `update'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 52ms (ActiveRecord: 20.5ms | Allocations: 15345)


Started GET "/posts/1" for ::1 at 2022-02-17 17:43:30 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 3.8ms | Allocations: 1268)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.3ms | Allocations: 3962)
Completed 200 OK in 35ms (Views: 10.6ms | ActiveRecord: 3.7ms | Allocations: 4969)


Started DELETE "/session" for ::1 at 2022-02-17 17:43:40 +0700
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XNKN5b9_oP2JsA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "steve1"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Update (1.6ms)[0m  [1m[33mUPDATE "users" SET "session_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["session_token", "JTWSyWyIlkO-xA"], ["updated_at", "2022-02-17 10:43:41.014002"], ["id", 1]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mTRANSACTION (43.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
Redirected to http://localhost:3000/session/new
Completed 302 Found in 64ms (ActiveRecord: 49.9ms | Allocations: 4469)


Started GET "/session/new" for ::1 at 2022-02-17 17:43:41 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 1.2ms | Allocations: 341)
  Rendered sessions/new.html.erb within layouts/application (Duration: 3.2ms | Allocations: 828)
  Rendered layout layouts/application.html.erb (Duration: 7.4ms | Allocations: 2216)
Completed 200 OK in 11ms (Views: 10.3ms | ActiveRecord: 0.0ms | Allocations: 3029)


Started GET "/subs" for ::1 at 2022-02-17 17:43:43 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 4.9ms | Allocations: 1217)
  Rendered layout layouts/application.html.erb (Duration: 8.1ms | Allocations: 2737)
Completed 200 OK in 13ms (Views: 11.4ms | ActiveRecord: 1.1ms | Allocations: 3617)


Started GET "/subs/1" for ::1 at 2022-02-17 17:43:45 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 8.3ms | Allocations: 3174)
  Rendered layout layouts/application.html.erb (Duration: 11.5ms | Allocations: 4695)
Completed 200 OK in 20ms (Views: 10.8ms | ActiveRecord: 3.8ms | Allocations: 5930)


Started GET "/posts/2" for ::1 at 2022-02-17 17:43:48 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 6.3ms | Allocations: 1186)
  Rendered layout layouts/application.html.erb (Duration: 10.9ms | Allocations: 2707)
Completed 200 OK in 23ms (Views: 14.3ms | ActiveRecord: 3.8ms | Allocations: 3714)


Started GET "/subs/1" for ::1 at 2022-02-17 17:43:58 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (2.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 5.8ms | Allocations: 1157)
  Rendered layout layouts/application.html.erb (Duration: 10.7ms | Allocations: 2673)
Completed 200 OK in 17ms (Views: 9.8ms | ActiveRecord: 3.4ms | Allocations: 3677)


Started GET "/posts/2" for ::1 at 2022-02-17 17:44:02 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 4.8ms | Allocations: 1180)
  Rendered layout layouts/application.html.erb (Duration: 9.4ms | Allocations: 2695)
Completed 200 OK in 14ms (Views: 8.9ms | ActiveRecord: 2.4ms | Allocations: 3700)


Started GET "/subs/1" for ::1 at 2022-02-17 17:44:08 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 7.0ms | Allocations: 1157)
  Rendered layout layouts/application.html.erb (Duration: 11.5ms | Allocations: 2672)
Completed 200 OK in 18ms (Views: 10.2ms | ActiveRecord: 3.4ms | Allocations: 3674)


Started GET "/posts/1" for ::1 at 2022-02-17 17:44:10 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 9.4ms | Allocations: 1269)
  Rendered layout layouts/application.html.erb (Duration: 12.5ms | Allocations: 2784)
Completed 200 OK in 17ms (Views: 10.5ms | ActiveRecord: 3.4ms | Allocations: 3791)


  [1m[36mComment Load (3.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" ORDER BY "comments"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/posts/1" for ::1 at 2022-02-17 20:43:01 +0700
  [1m[35m (3.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (45.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 25.1ms | Allocations: 15683)
  Rendered layout layouts/application.html.erb (Duration: 25.3ms | Allocations: 15767)
Completed 500 Internal Server Error in 90ms (ActiveRecord: 48.7ms | Allocations: 23471)



NoMethodError - undefined method `new_post_comment' for #<ActionView::Base:0x007fa647a7d1f0>:
  app/views/posts/show.html.erb:18
  app/controllers/posts_controller.rb:5:in `show'

Started POST "/__better_errors/9f65d3587890e6ba/variables" for ::1 at 2022-02-17 20:43:01 +0700
Started GET "/posts/1" for ::1 at 2022-02-17 20:44:47 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 38.5ms | Allocations: 14736)
  Rendered layout layouts/application.html.erb (Duration: 51.9ms | Allocations: 18092)
Completed 200 OK in 98ms (Views: 44.4ms | ActiveRecord: 31.3ms | Allocations: 26659)


Started GET "/posts/1" for ::1 at 2022-02-17 20:44:59 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 5.2ms | Allocations: 1557)
  Rendered layout layouts/application.html.erb (Duration: 8.5ms | Allocations: 3345)
Completed 200 OK in 17ms (Views: 10.6ms | ActiveRecord: 3.0ms | Allocations: 5104)


Started GET "/posts/1/comments/new" for ::1 at 2022-02-17 20:45:05 +0700
Processing by CommentsController#new as HTML
  Parameters: {"post_id"=>"1"}
Redirected to http://localhost:3000/session/new
Filter chain halted as :require_current_user! rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 338)


Started GET "/session/new" for ::1 at 2022-02-17 20:45:05 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 1.5ms | Allocations: 330)
  Rendered sessions/new.html.erb within layouts/application (Duration: 4.4ms | Allocations: 817)
  Rendered layout layouts/application.html.erb (Duration: 8.8ms | Allocations: 2205)
Completed 200 OK in 12ms (Views: 11.5ms | ActiveRecord: 0.0ms | Allocations: 3021)


Started POST "/session" for ::1 at 2022-02-17 20:45:11 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve1", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  [1m[36mUser Load (42.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve1"], ["LIMIT", 1]]
  ↳ app/models/user.rb:16:in `login_by_credentials'
Redirected to http://localhost:3000/
Completed 302 Found in 343ms (ActiveRecord: 49.7ms | Allocations: 6894)


Started GET "/" for ::1 at 2022-02-17 20:45:12 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 5.4ms | Allocations: 1216)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.0ms | Allocations: 4024)
Completed 200 OK in 17ms (Views: 14.4ms | ActiveRecord: 2.2ms | Allocations: 4904)


Started GET "/subs/1" for ::1 at 2022-02-17 20:45:17 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 11.5ms | Allocations: 4719)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.7ms | Allocations: 7420)
Completed 200 OK in 33ms (Views: 18.3ms | ActiveRecord: 4.1ms | Allocations: 8655)


Started GET "/posts/1" for ::1 at 2022-02-17 20:45:19 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (6.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 11.3ms | Allocations: 1303)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.4ms | Allocations: 4004)
Completed 200 OK in 25ms (Views: 13.7ms | ActiveRecord: 8.6ms | Allocations: 5013)


Started GET "/posts/1/comments/new" for ::1 at 2022-02-17 20:45:22 +0700
Processing by CommentsController#new as HTML
  Parameters: {"post_id"=>"1"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering comments/new.html.erb within layouts/application
  Rendered comments/new.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2528)
  Rendered layout layouts/application.html.erb (Duration: 3.2ms | Allocations: 2612)
Completed 500 Internal Server Error in 44ms (ActiveRecord: 8.0ms | Allocations: 16178)



NoMethodError - undefined method `id' for nil:NilClass:
  app/views/comments/new.html.erb:7
  app/controllers/comments_controller.rb:13:in `new'

Started POST "/__better_errors/814a4a76435aa16d/variables" for ::1 at 2022-02-17 20:45:22 +0700
Started GET "/posts/1/comments/new" for ::1 at 2022-02-17 20:46:57 +0700
Processing by CommentsController#new as HTML
  Parameters: {"post_id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:12:in `new'
  Rendering layout layouts/application.html.erb
  Rendering comments/new.html.erb within layouts/application
  Rendered comments/new.html.erb within layouts/application (Duration: 0.9ms | Allocations: 107)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 6.5ms | Allocations: 2424)
Completed 200 OK in 70ms (Views: 7.6ms | ActiveRecord: 24.6ms | Allocations: 23997)


Started POST "/comments" for ::1 at 2022-02-17 20:47:02 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"content"=>"hey", "post_id"=>"1"}}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (5.2ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "hey"], ["user_id", 1], ["post_id", 1], ["created_at", "2022-02-17 13:47:02.603210"], ["updated_at", "2022-02-17 13:47:02.603210"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 35ms (ActiveRecord: 14.7ms | Allocations: 5733)


Started GET "/posts/1" for ::1 at 2022-02-17 20:47:02 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 38.2ms | Allocations: 14476)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 49.3ms | Allocations: 17177)
Completed 200 OK in 57ms (Views: 38.0ms | ActiveRecord: 14.9ms | Allocations: 18482)


  [1m[36mComment Load (0.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" ORDER BY "comments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPost Load (0.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mComment Load (0.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  [1m[36mPost Load (0.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mComment Load (0.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
Started GET "/posts/1" for ::1 at 2022-02-17 21:37:21 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.9ms | Allocations: 2888)
  Rendered posts/show.html.erb within layouts/application (Duration: 27.3ms | Allocations: 16584)
  Rendered layout layouts/application.html.erb (Duration: 27.6ms | Allocations: 16668)
Completed 500 Internal Server Error in 132ms (ActiveRecord: 64.4ms | Allocations: 36948)



NameError - undefined local variable or method `comment_by_parent_id' for #<ActionView::Base:0x007fa64789ccc8>:
  app/views/comments/_comment.html.erb:3
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/e85ae31191d0daf0/variables" for ::1 at 2022-02-17 21:37:22 +0700
Started POST "/__better_errors/e85ae31191d0daf0/eval" for ::1 at 2022-02-17 21:37:38 +0700
Started GET "/" for ::1 at 2022-02-17 21:38:37 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 11.2ms | Allocations: 1219)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 35.4ms | Allocations: 9323)
Completed 200 OK in 39ms (Views: 34.7ms | ActiveRecord: 3.5ms | Allocations: 10202)


Started GET "/subs/1" for ::1 at 2022-02-17 21:38:39 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 10.1ms | Allocations: 4715)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.1ms | Allocations: 7416)
Completed 200 OK in 25ms (Views: 15.7ms | ActiveRecord: 4.7ms | Allocations: 8649)


Started GET "/posts/1" for ::1 at 2022-02-17 21:38:41 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (3.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 2.9ms | Allocations: 2755)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.4ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 11.9ms | Allocations: 4188)
Completed 500 Internal Server Error in 23ms (ActiveRecord: 7.4ms | Allocations: 5968)



NameError - undefined local variable or method `comment_by_parent_id' for #<ActionView::Base:0x007fa64796d7d8>:
  app/views/comments/_comment.html.erb:3
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/ded533b2a68b872e/variables" for ::1 at 2022-02-17 21:38:42 +0700
Started GET "/posts/1" for ::1 at 2022-02-17 21:42:12 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.6ms | Allocations: 352)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.9ms | Allocations: 2134)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.0ms | Allocations: 5103)
Completed 200 OK in 39ms (Views: 22.2ms | ActiveRecord: 6.8ms | Allocations: 7664)


Started GET "/comments/1" for ::1 at 2022-02-17 21:42:17 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 11.1ms | Allocations: 1422)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.1ms | Allocations: 3979)
Completed 200 OK in 28ms (Views: 20.3ms | ActiveRecord: 3.5ms | Allocations: 5690)


Started POST "/comments?reply=true" for ::1 at 2022-02-17 21:42:34 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"1", "post_id"=>"1", "content"=>"good child 1 -1"}, "reply"=>"true"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
[31mUnpermitted parameter: :parent_id[0m
  [1m[36mPost Load (2.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (3.4ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "good child 1 -1"], ["user_id", 1], ["post_id", 1], ["created_at", "2022-02-17 14:42:34.593409"], ["updated_at", "2022-02-17 14:42:34.593409"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 26ms (ActiveRecord: 9.9ms | Allocations: 5755)


Started GET "/posts/1" for ::1 at 2022-02-17 21:42:34 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 133)
  Rendered posts/show.html.erb within layouts/application (Duration: 6.1ms | Allocations: 1508)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.4ms | Allocations: 4209)
Completed 200 OK in 24ms (Views: 12.4ms | ActiveRecord: 5.7ms | Allocations: 6029)


  [1m[36mComment Load (0.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
Started GET "/posts/1" for ::1 at 2022-02-17 21:44:36 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (6.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 135)
  Rendered posts/show.html.erb within layouts/application (Duration: 37.1ms | Allocations: 14676)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 62.8ms | Allocations: 23203)
Completed 200 OK in 118ms (Views: 39.2ms | ActiveRecord: 48.0ms | Allocations: 41171)


Started GET "/comments/1" for ::1 at 2022-02-17 21:44:40 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 6.1ms | Allocations: 1228)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | Allocations: 3784)
Completed 200 OK in 24ms (Views: 13.1ms | ActiveRecord: 4.4ms | Allocations: 5106)


Started POST "/comments?reply=true" for ::1 at 2022-02-17 21:44:48 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"1", "post_id"=>"1", "content"=>"best child 1-1"}, "reply"=>"true"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.4ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "best child 1-1"], ["user_id", 1], ["post_id", 1], ["parent_id", 1], ["created_at", "2022-02-17 14:44:48.709503"], ["updated_at", "2022-02-17 14:44:48.709503"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 25ms (ActiveRecord: 6.9ms | Allocations: 5741)


Started GET "/posts/1" for ::1 at 2022-02-17 21:44:48 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 132)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.0ms | Allocations: 1500)
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.8ms | Allocations: 4194)
Completed 200 OK in 32ms (Views: 17.7ms | ActiveRecord: 6.5ms | Allocations: 6027)


  [1m[36mComment Load (0.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
Started GET "/posts/1" for ::1 at 2022-02-17 23:37:19 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 3.1ms | Allocations: 2899)
  Rendered posts/show.html.erb within layouts/application (Duration: 16.7ms | Allocations: 4665)
  Rendered layout layouts/application.html.erb (Duration: 17.4ms | Allocations: 4749)
Completed 500 Internal Server Error in 84ms (ActiveRecord: 40.0ms | Allocations: 10599)



NameError - undefined local variable or method `sub_comment' for #<ActionView::Base:0x007fa647b05438>:
  app/views/comments/_comment.html.erb:3
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/f37a54fe6b4f9ec8/variables" for ::1 at 2022-02-17 23:37:19 +0700
Started POST "/__better_errors/f37a54fe6b4f9ec8/eval" for ::1 at 2022-02-17 23:38:00 +0700
Started GET "/posts/1" for ::1 at 2022-02-17 23:38:16 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 4.8ms | Allocations: 2972)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.1ms | Allocations: 4921)
  Rendered layout layouts/application.html.erb (Duration: 12.3ms | Allocations: 5005)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 6.0ms | Allocations: 7564)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:3
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/076ee4371df3c149/variables" for ::1 at 2022-02-17 23:38:16 +0700
  [1m[36mComment Load (9.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (2.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started GET "/posts/1" for ::1 at 2022-02-17 23:39:57 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 2.2ms | Allocations: 2964)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.5ms | Allocations: 4914)
  Rendered layout layouts/application.html.erb (Duration: 8.8ms | Allocations: 4998)
Completed 500 Internal Server Error in 25ms (ActiveRecord: 5.2ms | Allocations: 7562)



NameError - undefined local variable or method `all_comments' for #<ActionView::Base:0x007fa647c3dda0>:
  app/views/comments/_comment.html.erb:3
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/2b8f71bf2b8c6680/variables" for ::1 at 2022-02-17 23:39:57 +0700
Started GET "/posts/1" for ::1 at 2022-02-17 23:40:15 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (4.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 3.4ms | Allocations: 2972)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.4ms | Allocations: 4920)
  Rendered layout layouts/application.html.erb (Duration: 11.8ms | Allocations: 5004)
Completed 500 Internal Server Error in 33ms (ActiveRecord: 9.1ms | Allocations: 7568)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:3
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/ae873601647658b0/variables" for ::1 at 2022-02-17 23:40:15 +0700
  [1m[36mComment Load (8.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started POST "/__better_errors/ae873601647658b0/eval" for ::1 at 2022-02-17 23:40:36 +0700
Started GET "/posts/1" for ::1 at 2022-02-17 23:42:03 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 2.7ms | Allocations: 2972)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.4ms | Allocations: 4926)
  Rendered layout layouts/application.html.erb (Duration: 12.8ms | Allocations: 5010)
Completed 500 Internal Server Error in 34ms (ActiveRecord: 5.7ms | Allocations: 7573)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:3
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/176f32b0ca09a2dc/variables" for ::1 at 2022-02-17 23:42:03 +0700
  [1m[36mComment Load (2.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started GET "/posts/1" for ::1 at 2022-02-17 23:43:13 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 3.6ms | Allocations: 2972)
  Rendered posts/show.html.erb within layouts/application (Duration: 13.7ms | Allocations: 4918)
  Rendered layout layouts/application.html.erb (Duration: 14.0ms | Allocations: 5002)
Completed 500 Internal Server Error in 34ms (ActiveRecord: 4.8ms | Allocations: 7560)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:3
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/78fee8d5ffde8a2d/variables" for ::1 at 2022-02-17 23:43:13 +0700
  [1m[36mComment Load (2.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (4.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started GET "/posts/1" for ::1 at 2022-02-17 23:44:07 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 3.0ms | Allocations: 2971)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.5ms | Allocations: 4921)
  Rendered layout layouts/application.html.erb (Duration: 9.9ms | Allocations: 5005)
Completed 500 Internal Server Error in 25ms (ActiveRecord: 4.8ms | Allocations: 7568)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:6
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/7f3b5db49ce78347/variables" for ::1 at 2022-02-17 23:44:07 +0700
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started POST "/__better_errors/7f3b5db49ce78347/eval" for ::1 at 2022-02-17 23:44:42 +0700
Started POST "/__better_errors/7f3b5db49ce78347/eval" for ::1 at 2022-02-17 23:44:50 +0700
Started POST "/__better_errors/7f3b5db49ce78347/eval" for ::1 at 2022-02-17 23:44:58 +0700
Started GET "/posts/1" for ::1 at 2022-02-17 23:45:36 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (4.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.8ms | Allocations: 3119)
  Rendered comments/_comment.html.erb (Duration: 2.7ms | Allocations: 3441)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.4ms | Allocations: 5388)
  Rendered layout layouts/application.html.erb (Duration: 8.6ms | Allocations: 5472)
Completed 500 Internal Server Error in 23ms (ActiveRecord: 6.9ms | Allocations: 8035)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:3
  app/views/comments/_comment.html.erb:7
  app/views/comments/_comment.html.erb:6
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/ca4af276e779e23b/variables" for ::1 at 2022-02-17 23:45:36 +0700
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (4.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started GET "/posts" for ::1 at 2022-02-17 23:45:39 +0700
  
ActionController::RoutingError (No route matches [GET] "/posts"):
  
Started GET "/" for ::1 at 2022-02-17 23:45:42 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 10.7ms | Allocations: 1215)
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 39.5ms | Allocations: 4191)
Completed 200 OK in 48ms (Views: 41.4ms | ActiveRecord: 5.3ms | Allocations: 5071)


Started GET "/subs/1" for ::1 at 2022-02-17 23:45:44 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 7.2ms | Allocations: 4717)
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | Allocations: 7419)
Completed 200 OK in 24ms (Views: 13.5ms | ActiveRecord: 4.6ms | Allocations: 8654)


Started GET "/posts/1" for ::1 at 2022-02-17 23:45:46 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 2.1ms | Allocations: 3119)
  Rendered comments/_comment.html.erb (Duration: 2.5ms | Allocations: 3236)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.5ms | Allocations: 4617)
  Rendered layout layouts/application.html.erb (Duration: 11.0ms | Allocations: 4701)
Completed 500 Internal Server Error in 23ms (ActiveRecord: 5.1ms | Allocations: 6509)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:3
  app/views/comments/_comment.html.erb:7
  app/views/comments/_comment.html.erb:6
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/f4154a5d057f903e/variables" for ::1 at 2022-02-17 23:45:47 +0700
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started POST "/__better_errors/f4154a5d057f903e/variables" for ::1 at 2022-02-17 23:45:57 +0700
Started POST "/__better_errors/f4154a5d057f903e/eval" for ::1 at 2022-02-17 23:46:08 +0700
Started POST "/__better_errors/f4154a5d057f903e/eval" for ::1 at 2022-02-17 23:46:21 +0700
Started POST "/__better_errors/f4154a5d057f903e/eval" for ::1 at 2022-02-17 23:46:26 +0700
Started POST "/__better_errors/f4154a5d057f903e/variables" for ::1 at 2022-02-17 23:46:47 +0700
Started POST "/__better_errors/f4154a5d057f903e/eval" for ::1 at 2022-02-17 23:46:59 +0700
Started POST "/__better_errors/f4154a5d057f903e/variables" for ::1 at 2022-02-17 23:47:04 +0700
Started POST "/__better_errors/f4154a5d057f903e/variables" for ::1 at 2022-02-17 23:47:05 +0700
Started POST "/__better_errors/f4154a5d057f903e/variables" for ::1 at 2022-02-17 23:47:05 +0700
Started POST "/__better_errors/f4154a5d057f903e/variables" for ::1 at 2022-02-17 23:47:06 +0700
Started POST "/__better_errors/f4154a5d057f903e/variables" for ::1 at 2022-02-17 23:47:08 +0700
Started GET "/posts/1" for ::1 at 2022-02-17 23:50:49 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 3119)
  Rendered comments/_comment.html.erb (Duration: 2.4ms | Allocations: 3514)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.0ms | Allocations: 5465)
  Rendered layout layouts/application.html.erb (Duration: 9.3ms | Allocations: 5549)
Completed 500 Internal Server Error in 24ms (ActiveRecord: 3.2ms | Allocations: 8112)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:3
  app/views/comments/_comment.html.erb:8
  app/views/comments/_comment.html.erb:6
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/a7ab13636cf11383/variables" for ::1 at 2022-02-17 23:50:49 +0700
  [1m[36mComment Load (2.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (0.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started GET "/posts/1" for ::1 at 2022-02-17 23:50:50 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 4.5ms | Allocations: 3119)
  Rendered comments/_comment.html.erb (Duration: 4.9ms | Allocations: 3265)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.2ms | Allocations: 4642)
  Rendered layout layouts/application.html.erb (Duration: 10.9ms | Allocations: 4726)
Completed 500 Internal Server Error in 20ms (ActiveRecord: 4.5ms | Allocations: 6533)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:3
  app/views/comments/_comment.html.erb:8
  app/views/comments/_comment.html.erb:6
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/7725594555b1dcd2/variables" for ::1 at 2022-02-17 23:50:50 +0700
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (0.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started GET "/posts/1" for ::1 at 2022-02-17 23:52:07 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 3.7ms | Allocations: 3119)
  Rendered comments/_comment.html.erb (Duration: 5.7ms | Allocations: 3512)
  Rendered posts/show.html.erb within layouts/application (Duration: 13.4ms | Allocations: 5463)
  Rendered layout layouts/application.html.erb (Duration: 13.7ms | Allocations: 5547)
Completed 500 Internal Server Error in 25ms (ActiveRecord: 3.8ms | Allocations: 8110)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:3
  app/views/comments/_comment.html.erb:8
  app/views/comments/_comment.html.erb:6
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/3e0ea2b14ff2fa1c/variables" for ::1 at 2022-02-17 23:52:07 +0700
  [1m[36mComment Load (11.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (3.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started POST "/__better_errors/3e0ea2b14ff2fa1c/variables" for ::1 at 2022-02-17 23:52:11 +0700
Started POST "/__better_errors/3e0ea2b14ff2fa1c/variables" for ::1 at 2022-02-17 23:52:12 +0700
Started POST "/__better_errors/3e0ea2b14ff2fa1c/eval" for ::1 at 2022-02-17 23:52:15 +0700
Started POST "/__better_errors/3e0ea2b14ff2fa1c/eval" for ::1 at 2022-02-17 23:52:30 +0700
Started POST "/__better_errors/3e0ea2b14ff2fa1c/eval" for ::1 at 2022-02-17 23:52:35 +0700
Started POST "/__better_errors/3e0ea2b14ff2fa1c/eval" for ::1 at 2022-02-17 23:52:38 +0700
Started POST "/__better_errors/3e0ea2b14ff2fa1c/variables" for ::1 at 2022-02-17 23:52:45 +0700
Started POST "/__better_errors/3e0ea2b14ff2fa1c/eval" for ::1 at 2022-02-17 23:52:49 +0700
Started POST "/__better_errors/3e0ea2b14ff2fa1c/eval" for ::1 at 2022-02-17 23:52:51 +0700
Started POST "/__better_errors/3e0ea2b14ff2fa1c/variables" for ::1 at 2022-02-17 23:52:55 +0700
Started POST "/__better_errors/3e0ea2b14ff2fa1c/variables" for ::1 at 2022-02-17 23:53:05 +0700
Started POST "/__better_errors/3e0ea2b14ff2fa1c/eval" for ::1 at 2022-02-17 23:53:26 +0700
Started POST "/__better_errors/3e0ea2b14ff2fa1c/variables" for ::1 at 2022-02-17 23:53:31 +0700
Started POST "/__better_errors/3e0ea2b14ff2fa1c/variables" for ::1 at 2022-02-17 23:53:59 +0700
Started POST "/__better_errors/3e0ea2b14ff2fa1c/eval" for ::1 at 2022-02-17 23:54:08 +0700
Started GET "/posts/1" for ::1 at 2022-02-17 23:55:05 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 2.4ms | Allocations: 3119)
  Rendered comments/_comment.html.erb (Duration: 3.7ms | Allocations: 3513)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.1ms | Allocations: 5464)
  Rendered layout layouts/application.html.erb (Duration: 12.5ms | Allocations: 5548)
Completed 500 Internal Server Error in 35ms (ActiveRecord: 4.3ms | Allocations: 8111)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:3
  app/views/comments/_comment.html.erb:8
  app/views/comments/_comment.html.erb:6
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/3bad1b75c323eb24/variables" for ::1 at 2022-02-17 23:55:05 +0700
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started POST "/__better_errors/3bad1b75c323eb24/variables" for ::1 at 2022-02-17 23:55:14 +0700
Started POST "/__better_errors/3bad1b75c323eb24/eval" for ::1 at 2022-02-17 23:55:26 +0700
Started POST "/__better_errors/3bad1b75c323eb24/eval" for ::1 at 2022-02-17 23:55:35 +0700
Started POST "/__better_errors/3bad1b75c323eb24/eval" for ::1 at 2022-02-17 23:55:48 +0700
Started GET "/posts/1" for ::1 at 2022-02-17 23:56:44 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (3.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 4.3ms | Allocations: 3094)
  Rendered posts/show.html.erb within layouts/application (Duration: 14.0ms | Allocations: 5046)
  Rendered layout layouts/application.html.erb (Duration: 14.4ms | Allocations: 5131)
Completed 500 Internal Server Error in 35ms (ActiveRecord: 7.1ms | Allocations: 7695)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check 
<% if all_comments[sub_comment.id].empty? %>
    <%= <a href="<%=comment_url(sub_comment) %>"><%= sub_comment.content %></a> %>
 <% else %>
    <% all_comments[sub_comment.id].each do |el| %>
    <%= <a href="<%=comment_url(sub_comment) %>"><%= sub_comment.content %></a> %>
    <%= render '/comments/comment', all_comments:all_comments, sub_comment:el%>
    <% end %>
<% end %>:
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/1aba7f3555a08a7d/variables" for ::1 at 2022-02-17 23:56:44 +0700
Started POST "/__better_errors/1aba7f3555a08a7d/variables" for ::1 at 2022-02-17 23:57:04 +0700
Started POST "/__better_errors/1aba7f3555a08a7d/variables" for ::1 at 2022-02-17 23:57:06 +0700
Started POST "/__better_errors/1aba7f3555a08a7d/variables" for ::1 at 2022-02-17 23:57:08 +0700
Started GET "/posts/1" for ::1 at 2022-02-17 23:58:04 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.9ms | Allocations: 3118)
  Rendered posts/show.html.erb within layouts/application (Duration: 19.4ms | Allocations: 5065)
  Rendered layout layouts/application.html.erb (Duration: 19.7ms | Allocations: 5150)
Completed 500 Internal Server Error in 36ms (ActiveRecord: 3.7ms | Allocations: 7711)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check 
<% if all_comments[sub_comment.id].empty? %>
    <%= "<a href="<%=comment_url(sub_comment) %>"><%= sub_comment.content %></a>" %>
 <% else %>
    <% all_comments[sub_comment.id].each do |el| %>
    <%= "<a href="<%=comment_url(sub_comment) %>"><%= sub_comment.content %></a>" %>
    <%= render '/comments/comment', all_comments:all_comments, sub_comment:el%>
    <% end %>
<% end %>:
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/d700ca61745ee688/variables" for ::1 at 2022-02-17 23:58:05 +0700
Started GET "/posts/1" for ::1 at 2022-02-17 23:58:06 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 4.0ms | Allocations: 3104)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.7ms | Allocations: 4479)
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | Allocations: 4564)
Completed 500 Internal Server Error in 23ms (ActiveRecord: 2.9ms | Allocations: 6373)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check 
<% if all_comments[sub_comment.id].empty? %>
    <%= "<a href="<%=comment_url(sub_comment) %>"><%= sub_comment.content %></a>" %>
 <% else %>
    <% all_comments[sub_comment.id].each do |el| %>
    <%= "<a href="<%=comment_url(sub_comment) %>"><%= sub_comment.content %></a>" %>
    <%= render '/comments/comment', all_comments:all_comments, sub_comment:el%>
    <% end %>
<% end %>:
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/7d0013bc5efbd426/variables" for ::1 at 2022-02-17 23:58:06 +0700
Started GET "/posts/1" for ::1 at 2022-02-17 23:59:38 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 5.4ms | Allocations: 3097)
  Rendered posts/show.html.erb within layouts/application (Duration: 17.5ms | Allocations: 5044)
  Rendered layout layouts/application.html.erb (Duration: 18.1ms | Allocations: 5129)
Completed 500 Internal Server Error in 42ms (ActiveRecord: 5.8ms | Allocations: 7695)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check 
<% if all_comments[sub_comment.id].empty? %>
    <%= "<a href='#{<%=comment_url(sub_comment)} %>'>#{sub_comment.content}</a>".html_safe %>
 <% else %>
    <% all_comments[sub_comment.id].each do |el| %>
    <%= "<a href='#{<%=comment_url(sub_comment)} %>'>#{sub_comment.content}</a>".html_safe %>
    <%= render '/comments/comment', all_comments:all_comments, sub_comment:el%>
    <% end %>
<% end %>:
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/3f9cb2ecddfab499/variables" for ::1 at 2022-02-17 23:59:38 +0700
Started GET "/posts/1" for ::1 at 2022-02-18 00:03:48 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (2.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (3.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.7ms | Allocations: 3119)
  Rendered comments/_comment.html.erb (Duration: 2.8ms | Allocations: 3514)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.3ms | Allocations: 5467)
  Rendered layout layouts/application.html.erb (Duration: 12.7ms | Allocations: 5551)
Completed 500 Internal Server Error in 34ms (ActiveRecord: 8.2ms | Allocations: 8115)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:3
  app/views/comments/_comment.html.erb:8
  app/views/comments/_comment.html.erb:6
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/1442cb5d2f0e5c7c/variables" for ::1 at 2022-02-18 00:03:48 +0700
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started GET "/" for ::1 at 2022-02-18 00:10:53 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (3.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 164.9ms | Allocations: 4647)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 187.1ms | Allocations: 7831)
Completed 200 OK in 195ms (Views: 194.6ms | ActiveRecord: 32.8ms | Allocations: 8882)


Started GET "/subs/1" for ::1 at 2022-02-18 00:10:56 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 5.5ms | Allocations: 1388)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | Allocations: 4090)
Completed 200 OK in 21ms (Views: 11.9ms | ActiveRecord: 4.9ms | Allocations: 5229)


Started GET "/posts/1" for ::1 at 2022-02-18 00:10:59 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 2.4ms | Allocations: 3119)
  Rendered comments/_comment.html.erb (Duration: 3.9ms | Allocations: 3530)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.6ms | Allocations: 5481)
  Rendered layout layouts/application.html.erb (Duration: 12.9ms | Allocations: 5565)
Completed 500 Internal Server Error in 27ms (ActiveRecord: 7.4ms | Allocations: 7913)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:3
  app/views/comments/_comment.html.erb:10
  app/views/comments/_comment.html.erb:7
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/eed67a8273823ae8/variables" for ::1 at 2022-02-18 00:10:59 +0700
  [1m[36mComment Load (3.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (5.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started POST "/__better_errors/eed67a8273823ae8/variables" for ::1 at 2022-02-18 00:11:16 +0700
Started GET "/posts/1" for ::1 at 2022-02-18 00:13:04 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.7ms | Allocations: 3119)
  Rendered comments/_comment.html.erb (Duration: 2.8ms | Allocations: 3536)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.8ms | Allocations: 5483)
  Rendered layout layouts/application.html.erb (Duration: 9.2ms | Allocations: 5567)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 4.0ms | Allocations: 8130)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:3
  app/views/comments/_comment.html.erb:10
  app/views/comments/_comment.html.erb:7
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/d7d12e89531c0194/variables" for ::1 at 2022-02-18 00:13:05 +0700
  [1m[36mComment Load (6.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (2.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started GET "/posts/1" for ::1 at 2022-02-18 00:14:59 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 3.8ms | Allocations: 3002)
  Rendered comments/_comment.html.erb (Duration: 5.4ms | Allocations: 3419)
  Rendered posts/show.html.erb within layouts/application (Duration: 50.4ms | Allocations: 18520)
  Rendered layout layouts/application.html.erb (Duration: 50.7ms | Allocations: 18604)
Completed 500 Internal Server Error in 121ms (ActiveRecord: 46.0ms | Allocations: 37272)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:3
  app/views/comments/_comment.html.erb:10
  app/views/comments/_comment.html.erb:7
  app/views/posts/show.html.erb:31
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:7:in `show'

Started POST "/__better_errors/e9e7919f37dc983c/variables" for ::1 at 2022-02-18 00:15:00 +0700
  [1m[36mComment Load (2.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (8.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started GET "/posts/1" for ::1 at 2022-02-18 00:36:53 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 294)
  Rendered comments/_comment.html.erb (Duration: 0.1ms | Allocations: 42)
  Rendered comments/_comment.html.erb (Duration: 0.1ms | Allocations: 42)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.4ms | Allocations: 2588)
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 65.6ms | Allocations: 16842)
Completed 200 OK in 156ms (Views: 54.6ms | ActiveRecord: 79.9ms | Allocations: 22689)


Started GET "/posts/1" for ::1 at 2022-02-18 00:37:25 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (3.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.0ms | Allocations: 287)
  Rendered comments/_comment.html.erb (Duration: 0.1ms | Allocations: 42)
  Rendered comments/_comment.html.erb (Duration: 0.1ms | Allocations: 42)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.7ms | Allocations: 2566)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.2ms | Allocations: 5535)
Completed 200 OK in 36ms (Views: 19.8ms | ActiveRecord: 7.0ms | Allocations: 8119)


Started GET "/comments/1" for ::1 at 2022-02-18 00:37:57 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 7.2ms | Allocations: 1411)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | Allocations: 3968)
Completed 200 OK in 21ms (Views: 14.1ms | ActiveRecord: 3.4ms | Allocations: 5679)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 00:38:04 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"1", "post_id"=>"1", "content"=>"best child 1-10"}, "reply"=>"true"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (2.8ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "best child 1-10"], ["user_id", 1], ["post_id", 1], ["parent_id", 1], ["created_at", "2022-02-17 17:38:04.425349"], ["updated_at", "2022-02-17 17:38:04.425349"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 23ms (ActiveRecord: 8.4ms | Allocations: 5740)


Started GET "/posts/1" for ::1 at 2022-02-18 00:38:04 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.1ms | Allocations: 43)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 42)
  Rendered comments/_comment.html.erb (Duration: 0.1ms | Allocations: 42)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.3ms | Allocations: 1754)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.3ms | Allocations: 4455)
Completed 200 OK in 25ms (Views: 12.2ms | ActiveRecord: 6.6ms | Allocations: 6301)


Started GET "/comments/4" for ::1 at 2022-02-18 00:38:10 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 4.2ms | Allocations: 1061)
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.5ms | Allocations: 3618)
Completed 200 OK in 22ms (Views: 14.6ms | ActiveRecord: 4.5ms | Allocations: 4643)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 00:38:18 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"4", "post_id"=>"1", "content"=>"hey hey hey"}, "reply"=>"true"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (4.9ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "hey hey hey"], ["user_id", 1], ["post_id", 1], ["parent_id", 4], ["created_at", "2022-02-17 17:38:18.957643"], ["updated_at", "2022-02-17 17:38:18.957643"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 22ms (ActiveRecord: 9.7ms | Allocations: 4526)


Started GET "/posts/1" for ::1 at 2022-02-18 00:38:19 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 43)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 42)
  Rendered comments/_comment.html.erb (Duration: 0.1ms | Allocations: 42)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.9ms | Allocations: 1751)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.7ms | Allocations: 4452)
Completed 200 OK in 24ms (Views: 12.9ms | ActiveRecord: 4.8ms | Allocations: 6313)


Started GET "/posts/1" for ::1 at 2022-02-18 00:38:52 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.1ms | Allocations: 287)
  Rendered comments/_comment.html.erb (Duration: 0.1ms | Allocations: 42)
  Rendered comments/_comment.html.erb (Duration: 0.1ms | Allocations: 42)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.3ms | Allocations: 2569)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 23.8ms | Allocations: 5542)
Completed 200 OK in 38ms (Views: 26.4ms | ActiveRecord: 4.9ms | Allocations: 8160)


Started GET "/posts/1" for ::1 at 2022-02-18 00:39:42 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (3.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 6.2ms | Allocations: 3108)
  Rendered posts/show.html.erb within layouts/application (Duration: 15.6ms | Allocations: 5059)
  Rendered layout layouts/application.html.erb (Duration: 15.8ms | Allocations: 5144)
Completed 500 Internal Server Error in 35ms (ActiveRecord: 5.8ms | Allocations: 7736)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check <%= def comment_tree(comment) %>
    <li>
<a href="<%= comment_url(comment) %>"><%= comment.content %></a>
        <% unless all_comments[comment.id].empty? %>
        <% all_comments[comment.id].each do |sub| %>
        <ul>
        <%= comment_tree(sub) %>
        </ul>
        <% end %>
        <% end %>
    </li>
<% end %>:
  app/views/posts/show.html.erb:30
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:7:in `show'

Started POST "/__better_errors/a59dd093c28c2c0e/variables" for ::1 at 2022-02-18 00:39:43 +0700
Started GET "/posts/1" for ::1 at 2022-02-18 00:42:47 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 2.8ms | Allocations: 3158)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.5ms | Allocations: 5114)
  Rendered layout layouts/application.html.erb (Duration: 9.8ms | Allocations: 5198)
Completed 500 Internal Server Error in 29ms (ActiveRecord: 3.7ms | Allocations: 7790)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:8:in `comment_tree'
  app/views/comments/_comment.html.erb:11:in `block in comment_tree'
  app/views/comments/_comment.html.erb:9:in `comment_tree'
  app/views/comments/_comment.html.erb:21
  app/views/posts/show.html.erb:30
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:7:in `show'

Started POST "/__better_errors/59464790e4deb64c/variables" for ::1 at 2022-02-18 00:42:48 +0700
  [1m[36mComment Load (2.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started POST "/__better_errors/59464790e4deb64c/variables" for ::1 at 2022-02-18 00:44:37 +0700
Started GET "/posts/1" for ::1 at 2022-02-18 00:45:19 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (4.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 4.3ms | Allocations: 3131)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.7ms | Allocations: 5083)
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | Allocations: 5167)
Completed 500 Internal Server Error in 30ms (ActiveRecord: 6.6ms | Allocations: 7757)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:9:in `comment_tree'
  app/views/comments/_comment.html.erb:11:in `block in comment_tree'
  app/views/comments/_comment.html.erb:9:in `comment_tree'
  app/views/comments/_comment.html.erb:20
  app/views/posts/show.html.erb:30
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:7:in `show'

Started POST "/__better_errors/5b629c8cf6a14ff9/variables" for ::1 at 2022-02-18 00:45:20 +0700
  [1m[36mComment Load (15.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (4.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started POST "/__better_errors/5b629c8cf6a14ff9/variables" for ::1 at 2022-02-18 00:45:24 +0700
Started POST "/__better_errors/5b629c8cf6a14ff9/variables" for ::1 at 2022-02-18 00:45:31 +0700
Started POST "/__better_errors/5b629c8cf6a14ff9/variables" for ::1 at 2022-02-18 00:45:35 +0700
Started POST "/__better_errors/5b629c8cf6a14ff9/variables" for ::1 at 2022-02-18 00:45:36 +0700
Started POST "/__better_errors/5b629c8cf6a14ff9/variables" for ::1 at 2022-02-18 00:45:38 +0700
Started POST "/__better_errors/5b629c8cf6a14ff9/eval" for ::1 at 2022-02-18 00:45:51 +0700
Started POST "/__better_errors/5b629c8cf6a14ff9/eval" for ::1 at 2022-02-18 00:46:04 +0700
Started POST "/__better_errors/5b629c8cf6a14ff9/eval" for ::1 at 2022-02-18 00:46:10 +0700
Started POST "/__better_errors/5b629c8cf6a14ff9/eval" for ::1 at 2022-02-18 00:46:34 +0700
Started POST "/__better_errors/5b629c8cf6a14ff9/eval" for ::1 at 2022-02-18 00:46:38 +0700
Started POST "/__better_errors/5b629c8cf6a14ff9/eval" for ::1 at 2022-02-18 00:46:48 +0700
Started POST "/__better_errors/5b629c8cf6a14ff9/eval" for ::1 at 2022-02-18 00:46:49 +0700
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."parent_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["parent_id", 1], ["LIMIT", 11]]
Started GET "/posts/1" for ::1 at 2022-02-18 00:47:53 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 2.5ms | Allocations: 3129)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.8ms | Allocations: 5083)
  Rendered layout layouts/application.html.erb (Duration: 9.1ms | Allocations: 5167)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 4.0ms | Allocations: 7757)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:9:in `comment_tree'
  app/views/comments/_comment.html.erb:11:in `block in comment_tree'
  app/views/comments/_comment.html.erb:9:in `comment_tree'
  app/views/comments/_comment.html.erb:20
  app/views/posts/show.html.erb:30
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:7:in `show'

Started POST "/__better_errors/2343e6e41a079865/variables" for ::1 at 2022-02-18 00:47:54 +0700
  [1m[36mComment Load (6.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started GET "/posts/1" for ::1 at 2022-02-18 00:47:54 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.7ms | Allocations: 2870)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.6ms | Allocations: 4248)
  Rendered layout layouts/application.html.erb (Duration: 5.8ms | Allocations: 4332)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 5.0ms | Allocations: 6166)



RuntimeError - can't add a new key into hash during iteration:
  app/models/post.rb:8:in `block in comment_by_parent_id'
  app/views/comments/_comment.html.erb:9:in `comment_tree'
  app/views/comments/_comment.html.erb:11:in `block in comment_tree'
  app/views/comments/_comment.html.erb:9:in `comment_tree'
  app/views/comments/_comment.html.erb:20
  app/views/posts/show.html.erb:30
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:7:in `show'

Started POST "/__better_errors/bdf81e933b5470c9/variables" for ::1 at 2022-02-18 00:47:55 +0700
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mSub Load (3.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started GET "/posts/1" for ::1 at 2022-02-18 00:49:48 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 2.6ms | Allocations: 3216)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.5ms | Allocations: 5168)
  Rendered layout layouts/application.html.erb (Duration: 10.7ms | Allocations: 5252)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 4.3ms | Allocations: 7842)



ActionController::UrlGenerationError - No route matches {:action=>"show", :controller=>"comments", :id=>nil}, missing required keys: [:id]:
  app/views/comments/_comment.html.erb:7:in `comment_tree'
  app/views/comments/_comment.html.erb:20
  app/views/posts/show.html.erb:30
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:7:in `show'

Started POST "/__better_errors/cac72768442a7eb6/variables" for ::1 at 2022-02-18 00:49:48 +0700
Started GET "/posts/1" for ::1 at 2022-02-18 00:49:55 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.2ms | Allocations: 462)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 109)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 13.2ms | Allocations: 2834)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 22.4ms | Allocations: 5804)
Completed 200 OK in 35ms (Views: 23.8ms | ActiveRecord: 5.8ms | Allocations: 8420)


Started GET "/posts/1" for ::1 at 2022-02-18 00:51:01 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.0ms | Allocations: 481)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 109)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.6ms | Allocations: 2855)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.4ms | Allocations: 5825)
Completed 200 OK in 37ms (Views: 19.2ms | ActiveRecord: 6.9ms | Allocations: 8443)


Started GET "/comments/2" for ::1 at 2022-02-18 00:51:06 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 7.2ms | Allocations: 1242)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.2ms | Allocations: 3798)
Completed 200 OK in 26ms (Views: 18.7ms | ActiveRecord: 4.3ms | Allocations: 5353)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 00:51:14 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"2", "post_id"=>"1", "content"=>"baby content 1"}, "reply"=>"true"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.4ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "baby content 1"], ["user_id", 1], ["post_id", 1], ["parent_id", 2], ["created_at", "2022-02-17 17:51:14.078659"], ["updated_at", "2022-02-17 17:51:14.078659"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 19ms (ActiveRecord: 5.7ms | Allocations: 4526)


Started GET "/posts/1" for ::1 at 2022-02-18 00:51:14 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 233)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 109)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.2ms | Allocations: 2037)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.3ms | Allocations: 4738)
Completed 200 OK in 24ms (Views: 11.5ms | ActiveRecord: 4.7ms | Allocations: 6615)


Started GET "/comments/9" for ::1 at 2022-02-18 00:51:16 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 4.6ms | Allocations: 1061)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.1ms | Allocations: 3617)
Completed 200 OK in 21ms (Views: 14.5ms | ActiveRecord: 3.8ms | Allocations: 4642)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 00:51:24 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"9", "post_id"=>"1", "content"=>"small littele basbsda"}, "reply"=>"true"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (2.8ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "small littele basbsda"], ["user_id", 1], ["post_id", 1], ["parent_id", 9], ["created_at", "2022-02-17 17:51:24.183749"], ["updated_at", "2022-02-17 17:51:24.183749"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (41.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 63ms (ActiveRecord: 47.4ms | Allocations: 4526)


Started GET "/posts/1" for ::1 at 2022-02-18 00:51:24 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 263)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 109)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 6.5ms | Allocations: 2063)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.6ms | Allocations: 4765)
Completed 200 OK in 20ms (Views: 10.2ms | ActiveRecord: 4.9ms | Allocations: 6656)


Started GET "/posts/1" for ::1 at 2022-02-18 00:53:35 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 3.4ms | Allocations: 541)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 109)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.6ms | Allocations: 2916)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 22.2ms | Allocations: 5889)
Completed 200 OK in 33ms (Views: 23.1ms | ActiveRecord: 5.1ms | Allocations: 8537)


Started GET "/posts/1" for ::1 at 2022-02-18 00:53:38 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.0ms | Allocations: 263)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 109)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.6ms | Allocations: 2064)
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.4ms | Allocations: 4766)
Completed 200 OK in 32ms (Views: 16.0ms | ActiveRecord: 7.0ms | Allocations: 6658)


Started GET "/posts/1" for ::1 at 2022-02-18 00:53:50 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 542)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 109)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.4ms | Allocations: 2916)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.2ms | Allocations: 5885)
Completed 200 OK in 35ms (Views: 22.2ms | ActiveRecord: 5.9ms | Allocations: 8533)


Started GET "/comments/7" for ::1 at 2022-02-18 00:53:57 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 6.7ms | Allocations: 1241)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.3ms | Allocations: 3798)
Completed 200 OK in 25ms (Views: 13.8ms | ActiveRecord: 4.1ms | Allocations: 5353)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 00:54:02 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"7", "post_id"=>"1", "content"=>"bad child"}, "reply"=>"true"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.5ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "bad child"], ["user_id", 1], ["post_id", 1], ["parent_id", 7], ["created_at", "2022-02-17 17:54:02.657384"], ["updated_at", "2022-02-17 17:54:02.657384"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (42.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 60ms (ActiveRecord: 47.5ms | Allocations: 4526)


Started GET "/posts/1" for ::1 at 2022-02-18 00:54:02 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 293)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 109)
  Rendered comments/_comment.html.erb (Duration: 0.1ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.5ms | Allocations: 2097)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.7ms | Allocations: 4799)
Completed 200 OK in 21ms (Views: 11.2ms | ActiveRecord: 4.9ms | Allocations: 6707)


Started GET "/comments/1" for ::1 at 2022-02-18 00:54:08 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 4.5ms | Allocations: 1061)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.8ms | Allocations: 3617)
Completed 200 OK in 24ms (Views: 11.7ms | ActiveRecord: 4.8ms | Allocations: 4642)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 00:54:13 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"1", "post_id"=>"1", "content"=>"kkkk"}, "reply"=>"true"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (4.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.5ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "kkkk"], ["user_id", 1], ["post_id", 1], ["parent_id", 1], ["created_at", "2022-02-17 17:54:13.839798"], ["updated_at", "2022-02-17 17:54:13.839798"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 26ms (ActiveRecord: 10.9ms | Allocations: 4526)


Started GET "/posts/1" for ::1 at 2022-02-18 00:54:13 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 324)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 109)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.5ms | Allocations: 2124)
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.6ms | Allocations: 4826)
Completed 200 OK in 31ms (Views: 16.1ms | ActiveRecord: 8.6ms | Allocations: 6748)


Started GET "/posts/1" for ::1 at 2022-02-18 07:54:48 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (45.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (3.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (3.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 3.0ms | Allocations: 603)
  Rendered comments/_comment.html.erb (Duration: 1.1ms | Allocations: 109)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 23.1ms | Allocations: 2985)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 43.1ms | Allocations: 5960)
Completed 200 OK in 426ms (Views: 48.4ms | ActiveRecord: 219.6ms | Allocations: 11922)


Started GET "/comments/10" for ::1 at 2022-02-18 07:54:53 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"10"}
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 7.5ms | Allocations: 1241)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.4ms | Allocations: 3797)
Completed 200 OK in 28ms (Views: 20.6ms | ActiveRecord: 4.0ms | Allocations: 5357)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 07:54:59 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"10", "post_id"=>"1", "content"=>"kute"}, "reply"=>"true"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (177.9ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "kute"], ["user_id", 1], ["post_id", 1], ["parent_id", 10], ["created_at", "2022-02-18 00:54:59.470871"], ["updated_at", "2022-02-18 00:54:59.470871"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (125.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 339ms (ActiveRecord: 310.3ms | Allocations: 4527)


Started GET "/posts/1" for ::1 at 2022-02-18 07:54:59 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.0ms | Allocations: 354)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 109)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 24.4ms | Allocations: 2158)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 33.8ms | Allocations: 4860)
Completed 200 OK in 45ms (Views: 30.9ms | ActiveRecord: 7.3ms | Allocations: 6797)


Started GET "/comments/13" for ::1 at 2022-02-18 07:55:03 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"13"}
  [1m[36mComment Load (65.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (22.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 26.8ms | Allocations: 1061)
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 40.2ms | Allocations: 3618)
Completed 200 OK in 117ms (Views: 14.3ms | ActiveRecord: 92.5ms | Allocations: 4644)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 07:55:10 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"13", "post_id"=>"1", "content"=>"oh no"}, "reply"=>"true"}
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (3.5ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "oh no"], ["user_id", 1], ["post_id", 1], ["parent_id", 13], ["created_at", "2022-02-18 00:55:10.354875"], ["updated_at", "2022-02-18 00:55:10.354875"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 31ms (ActiveRecord: 13.4ms | Allocations: 4526)


Started GET "/posts/1" for ::1 at 2022-02-18 07:55:10 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 384)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 109)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 6.8ms | Allocations: 2184)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.0ms | Allocations: 4885)
Completed 200 OK in 27ms (Views: 14.3ms | ActiveRecord: 5.6ms | Allocations: 6836)


Started GET "/comments/4" for ::1 at 2022-02-18 07:55:22 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 4.3ms | Allocations: 1061)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.7ms | Allocations: 3618)
Completed 200 OK in 18ms (Views: 9.9ms | ActiveRecord: 3.4ms | Allocations: 4644)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 07:55:28 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"4", "post_id"=>"1", "content"=>"1.1"}, "reply"=>"true"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.5ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "1.1"], ["user_id", 1], ["post_id", 1], ["parent_id", 4], ["created_at", "2022-02-18 00:55:28.493103"], ["updated_at", "2022-02-18 00:55:28.493103"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 21ms (ActiveRecord: 6.6ms | Allocations: 4526)


Started GET "/posts/1" for ::1 at 2022-02-18 07:55:28 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 384)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 140)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.8ms | Allocations: 2215)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.1ms | Allocations: 4916)
Completed 200 OK in 26ms (Views: 13.2ms | ActiveRecord: 6.0ms | Allocations: 6881)


Started GET "/comments/4" for ::1 at 2022-02-18 07:55:34 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mComment Load (2.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (4.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 8.1ms | Allocations: 1061)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.6ms | Allocations: 3617)
Completed 200 OK in 27ms (Views: 12.2ms | ActiveRecord: 9.0ms | Allocations: 4643)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 07:55:38 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"4", "post_id"=>"1", "content"=>"1.2"}, "reply"=>"true"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (2.6ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "1.2"], ["user_id", 1], ["post_id", 1], ["parent_id", 4], ["created_at", "2022-02-18 00:55:38.968130"], ["updated_at", "2022-02-18 00:55:38.968130"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 23ms (ActiveRecord: 8.0ms | Allocations: 4526)


Started GET "/posts/1" for ::1 at 2022-02-18 07:55:39 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 384)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.2ms | Allocations: 2246)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.0ms | Allocations: 4947)
Completed 200 OK in 24ms (Views: 12.7ms | ActiveRecord: 6.1ms | Allocations: 6926)


Started GET "/comments/15" for ::1 at 2022-02-18 07:55:42 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"15"}
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 4.6ms | Allocations: 1061)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.7ms | Allocations: 3618)
Completed 200 OK in 22ms (Views: 13.3ms | ActiveRecord: 3.9ms | Allocations: 4644)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 07:55:48 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"15", "post_id"=>"1", "content"=>"1.1.1"}, "reply"=>"true"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (7.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (7.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (3.3ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "1.1.1"], ["user_id", 1], ["post_id", 1], ["parent_id", 15], ["created_at", "2022-02-18 00:55:48.130589"], ["updated_at", "2022-02-18 00:55:48.130589"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 43ms (ActiveRecord: 20.9ms | Allocations: 4526)


Started GET "/posts/1" for ::1 at 2022-02-18 07:55:48 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 384)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 201)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.9ms | Allocations: 2276)
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 22.3ms | Allocations: 4978)
Completed 200 OK in 32ms (Views: 15.6ms | ActiveRecord: 9.8ms | Allocations: 6972)


Started GET "/comments/16" for ::1 at 2022-02-18 07:55:51 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"16"}
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 5.5ms | Allocations: 1061)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.0ms | Allocations: 3617)
Completed 200 OK in 22ms (Views: 10.3ms | ActiveRecord: 3.6ms | Allocations: 4642)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 07:55:54 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"16", "post_id"=>"1", "content"=>"1.2.1"}, "reply"=>"true"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (4.2ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "1.2.1"], ["user_id", 1], ["post_id", 1], ["parent_id", 16], ["created_at", "2022-02-18 00:55:54.928460"], ["updated_at", "2022-02-18 00:55:54.928460"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 26ms (ActiveRecord: 11.0ms | Allocations: 4526)


Started GET "/posts/1" for ::1 at 2022-02-18 07:55:54 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 384)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 231)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.2ms | Allocations: 2306)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.1ms | Allocations: 5008)
Completed 200 OK in 28ms (Views: 14.3ms | ActiveRecord: 6.2ms | Allocations: 7017)


Started GET "/comments/17" for ::1 at 2022-02-18 07:55:57 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"17"}
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 4.3ms | Allocations: 1061)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | Allocations: 3617)
Completed 200 OK in 17ms (Views: 10.5ms | ActiveRecord: 2.8ms | Allocations: 4642)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 07:56:02 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"17", "post_id"=>"1", "content"=>"1.1.1.1"}, "reply"=>"true"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.5ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "1.1.1.1"], ["user_id", 1], ["post_id", 1], ["parent_id", 17], ["created_at", "2022-02-18 00:56:02.443691"], ["updated_at", "2022-02-18 00:56:02.443691"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 20ms (ActiveRecord: 8.1ms | Allocations: 4526)


Started GET "/posts/1" for ::1 at 2022-02-18 07:56:02 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.7ms | Allocations: 384)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 261)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.0ms | Allocations: 2336)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.9ms | Allocations: 5037)
Completed 200 OK in 25ms (Views: 14.2ms | ActiveRecord: 4.3ms | Allocations: 7061)


Started GET "/comments/19" for ::1 at 2022-02-18 07:56:04 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"19"}
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 5.3ms | Allocations: 1061)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.9ms | Allocations: 3618)
Completed 200 OK in 22ms (Views: 11.2ms | ActiveRecord: 5.6ms | Allocations: 4644)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 07:56:09 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"19", "post_id"=>"1", "content"=>"1.1.1.1.1"}, "reply"=>"true"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.6ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "1.1.1.1.1"], ["user_id", 1], ["post_id", 1], ["parent_id", 19], ["created_at", "2022-02-18 00:56:09.299968"], ["updated_at", "2022-02-18 00:56:09.299968"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (25.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 48ms (ActiveRecord: 31.3ms | Allocations: 4526)


Started GET "/posts/1" for ::1 at 2022-02-18 07:56:09 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 384)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 291)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.8ms | Allocations: 2366)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.0ms | Allocations: 5068)
Completed 200 OK in 25ms (Views: 15.5ms | ActiveRecord: 4.1ms | Allocations: 7108)


Started GET "/comments/20" for ::1 at 2022-02-18 07:56:12 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"20"}
  [1m[36mComment Load (2.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 4.9ms | Allocations: 1061)
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.5ms | Allocations: 3618)
Completed 200 OK in 24ms (Views: 12.2ms | ActiveRecord: 6.0ms | Allocations: 4643)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 07:56:19 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"20", "post_id"=>"1", "content"=>"1.1.1.1.1.1"}, "reply"=>"true"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.4ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "1.1.1.1.1.1"], ["user_id", 1], ["post_id", 1], ["parent_id", 20], ["created_at", "2022-02-18 00:56:19.677603"], ["updated_at", "2022-02-18 00:56:19.677603"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 22ms (ActiveRecord: 9.5ms | Allocations: 4526)


Started GET "/posts/1" for ::1 at 2022-02-18 07:56:19 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 384)
  Rendered comments/_comment.html.erb (Duration: 1.2ms | Allocations: 321)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.3ms | Allocations: 2396)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | Allocations: 5097)
Completed 200 OK in 23ms (Views: 13.7ms | ActiveRecord: 3.9ms | Allocations: 7152)


Started GET "/comments/20" for ::1 at 2022-02-18 07:56:26 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"20"}
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (5.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 10.4ms | Allocations: 1061)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.1ms | Allocations: 3618)
Completed 200 OK in 23ms (Views: 12.0ms | ActiveRecord: 7.7ms | Allocations: 4643)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 07:56:39 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"20", "post_id"=>"1", "content"=>"1.1.1.1.1.2"}, "reply"=>"true"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.5ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "1.1.1.1.1.2"], ["user_id", 1], ["post_id", 1], ["parent_id", 20], ["created_at", "2022-02-18 00:56:39.946546"], ["updated_at", "2022-02-18 00:56:39.946546"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 21ms (ActiveRecord: 6.3ms | Allocations: 4526)


Started GET "/posts/1" for ::1 at 2022-02-18 07:56:39 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 384)
  Rendered comments/_comment.html.erb (Duration: 1.0ms | Allocations: 352)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.7ms | Allocations: 2427)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.3ms | Allocations: 5128)
Completed 200 OK in 26ms (Views: 15.1ms | ActiveRecord: 4.2ms | Allocations: 7197)


Started GET "/comments/17" for ::1 at 2022-02-18 07:56:48 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"17"}
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (3.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 7.1ms | Allocations: 1061)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.2ms | Allocations: 3618)
Completed 200 OK in 25ms (Views: 16.5ms | ActiveRecord: 5.5ms | Allocations: 4644)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 07:56:54 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"17", "post_id"=>"1", "content"=>"1.1.1.2"}, "reply"=>"true"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.7ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "1.1.1.2"], ["user_id", 1], ["post_id", 1], ["parent_id", 17], ["created_at", "2022-02-18 00:56:54.123355"], ["updated_at", "2022-02-18 00:56:54.123355"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 21ms (ActiveRecord: 8.1ms | Allocations: 4527)


Started GET "/posts/1" for ::1 at 2022-02-18 07:56:54 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 384)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 383)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.9ms | Allocations: 2458)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.5ms | Allocations: 5160)
Completed 200 OK in 24ms (Views: 11.9ms | ActiveRecord: 5.6ms | Allocations: 7243)


Started GET "/posts/new" for ::1 at 2022-02-18 08:00:15 +0700
Processing by PostsController#new as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:33
  Rendered posts/_form.html.erb (Duration: 5.7ms | Allocations: 1618)
  Rendered posts/new.html.erb within layouts/application (Duration: 10.1ms | Allocations: 1960)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.3ms | Allocations: 4276)
Completed 200 OK in 24ms (Views: 17.7ms | ActiveRecord: 2.3ms | Allocations: 5608)


Started POST "/posts" for ::1 at 2022-02-18 08:01:00 +0700
Processing by PostsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"this is the news from USA", "content"=>"Tier X is good for getting your feet wet, just to raise 'comfort level' with some of the general concepts and terminology. That said, if you haven't finished it already, aim to finish by March 1, or you'll be scrimping this year on time to learn 'beyond the basics'.  If your goal is proficiency, I would go with App Academy Open or Full Stack Open (their 2020 version will be available next month) paired with CS50, the followup CS50 course on full stack development, plus at least 6 progressively more involved development projects (both so you have practical experience building the types of things you'd like someone to hire you to build, and so you have examples of you doing so that you can show prospective employers).", "url"=>"tx.com", "sub_ids"=>["1", "2"]}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/posts_controller.rb:17:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/posts_controller.rb:19:in `create'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:19:in `create'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:19:in `create'
  [1m[36mPost Create (1.4ms)[0m  [1m[32mINSERT INTO "posts" ("title", "content", "url", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "this is the news from USA"], ["content", "Tier X is good for getting your feet wet, just to raise 'comfort level' with some of the general concepts and terminology. That said, if you haven't finished it already, aim to finish by March 1, or you'll be scrimping this year on time to learn 'beyond the basics'.  If your goal is proficiency, I would go with App Academy Open or Full Stack Open (their 2020 version will be available next month) paired with CS50, the followup CS50 course on full stack development, plus at least 6 progressively more involved development projects (both so you have practical experience building the types of things you'd like someone to hire you to build, and so you have examples of you doing so that you can show prospective employers)."], ["url", "tx.com"], ["user_id", 1], ["created_at", "2022-02-18 01:01:00.114186"], ["updated_at", "2022-02-18 01:01:00.114186"]]
  ↳ app/controllers/posts_controller.rb:19:in `create'
  [1m[36mPostSub Create (3.3ms)[0m  [1m[32mINSERT INTO "post_subs" ("sub_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sub_id", 1], ["post_id", 4], ["created_at", "2022-02-18 01:01:00.118739"], ["updated_at", "2022-02-18 01:01:00.118739"]]
  ↳ app/controllers/posts_controller.rb:19:in `create'
  [1m[36mPostSub Create (1.4ms)[0m  [1m[32mINSERT INTO "post_subs" ("sub_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sub_id", 2], ["post_id", 4], ["created_at", "2022-02-18 01:01:00.124857"], ["updated_at", "2022-02-18 01:01:00.124857"]]
  ↳ app/controllers/posts_controller.rb:19:in `create'
  [1m[36mTRANSACTION (42.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/posts_controller.rb:19:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 105ms (ActiveRecord: 63.2ms | Allocations: 17454)


Started GET "/posts/4" for ::1 at 2022-02-18 08:01:00 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 4.8ms | Allocations: 1218)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | Allocations: 3913)
Completed 200 OK in 22ms (Views: 12.0ms | ActiveRecord: 4.9ms | Allocations: 5658)


Started GET "/posts/4/comments/new" for ::1 at 2022-02-18 08:01:09 +0700
Processing by CommentsController#new as HTML
  Parameters: {"post_id"=>"4"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:12:in `new'
  Rendering layout layouts/application.html.erb
  Rendering comments/new.html.erb within layouts/application
  Rendered comments/new.html.erb within layouts/application (Duration: 2.1ms | Allocations: 260)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.5ms | Allocations: 2575)
Completed 200 OK in 27ms (Views: 11.9ms | ActiveRecord: 3.7ms | Allocations: 4633)


Started POST "/comments" for ::1 at 2022-02-18 08:01:22 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"content"=>"this is a good news", "post_id"=>"4"}}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.5ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "this is a good news"], ["user_id", 1], ["post_id", 4], ["created_at", "2022-02-18 01:01:22.254967"], ["updated_at", "2022-02-18 01:01:22.254967"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 25ms (ActiveRecord: 7.3ms | Allocations: 4510)


Started GET "/posts/4" for ::1 at 2022-02-18 08:01:22 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 80)
  Rendered posts/show.html.erb within layouts/application (Duration: 6.4ms | Allocations: 1406)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.5ms | Allocations: 4108)
Completed 200 OK in 23ms (Views: 11.8ms | ActiveRecord: 5.6ms | Allocations: 5869)


Started GET "/posts/4/comments/new" for ::1 at 2022-02-18 08:01:56 +0700
Processing by CommentsController#new as HTML
  Parameters: {"post_id"=>"4"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (4.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:12:in `new'
  Rendering layout layouts/application.html.erb
  Rendering comments/new.html.erb within layouts/application
  Rendered comments/new.html.erb within layouts/application (Duration: 0.4ms | Allocations: 105)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | Allocations: 2420)
Completed 200 OK in 19ms (Views: 6.5ms | ActiveRecord: 5.2ms | Allocations: 4355)


Started POST "/comments" for ::1 at 2022-02-18 08:02:06 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"content"=>"this is a good news 2", "post_id"=>"4"}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.7ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "this is a good news 2"], ["user_id", 1], ["post_id", 4], ["created_at", "2022-02-18 01:02:06.523383"], ["updated_at", "2022-02-18 01:02:06.523383"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 24ms (ActiveRecord: 9.8ms | Allocations: 4510)


Started GET "/posts/4" for ::1 at 2022-02-18 08:02:06 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 6.1ms | Allocations: 1585)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.3ms | Allocations: 4287)
Completed 200 OK in 22ms (Views: 12.6ms | ActiveRecord: 4.5ms | Allocations: 6061)


Started GET "/posts/4" for ::1 at 2022-02-18 08:05:34 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (3.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.2ms | Allocations: 379)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.9ms | Allocations: 2461)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.6ms | Allocations: 5431)
Completed 200 OK in 36ms (Views: 21.8ms | ActiveRecord: 8.2ms | Allocations: 7962)


Started GET "/posts/4" for ::1 at 2022-02-18 08:05:37 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 79)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.4ms | Allocations: 1586)
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.4ms | Allocations: 4288)
Completed 200 OK in 29ms (Views: 16.1ms | ActiveRecord: 5.8ms | Allocations: 6063)


Started GET "/posts/4" for ::1 at 2022-02-18 08:06:16 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 379)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.7ms | Allocations: 2369)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.3ms | Allocations: 5338)
Completed 200 OK in 32ms (Views: 21.5ms | ActiveRecord: 4.6ms | Allocations: 7864)


Started GET "/posts/4" for ::1 at 2022-02-18 08:07:14 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.3ms | Allocations: 379)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 80)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.2ms | Allocations: 2373)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.6ms | Allocations: 5343)
Completed 200 OK in 32ms (Views: 18.9ms | ActiveRecord: 5.6ms | Allocations: 7874)


Started GET "/posts/4/comments/new" for ::1 at 2022-02-18 08:07:17 +0700
Processing by CommentsController#new as HTML
  Parameters: {"post_id"=>"4"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:12:in `new'
  Rendering layout layouts/application.html.erb
  Rendering comments/new.html.erb within layouts/application
  Rendered comments/new.html.erb within layouts/application (Duration: 0.8ms | Allocations: 254)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 8.0ms | Allocations: 2570)
Completed 200 OK in 21ms (Views: 10.2ms | ActiveRecord: 2.0ms | Allocations: 5043)


Started POST "/comments" for ::1 at 2022-02-18 08:07:23 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"content"=>"good new 3", "post_id"=>"4"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (3.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (3.0ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "good new 3"], ["user_id", 1], ["post_id", 4], ["created_at", "2022-02-18 01:07:23.517631"], ["updated_at", "2022-02-18 01:07:23.517631"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 25ms (ActiveRecord: 9.9ms | Allocations: 4510)


Started GET "/posts/4" for ::1 at 2022-02-18 08:07:23 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.1ms | Allocations: 1684)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.7ms | Allocations: 4386)
Completed 200 OK in 30ms (Views: 16.5ms | ActiveRecord: 4.4ms | Allocations: 6174)


Started GET "/comments/24" for ::1 at 2022-02-18 08:07:25 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"24"}
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 6.7ms | Allocations: 1242)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.1ms | Allocations: 3799)
Completed 200 OK in 19ms (Views: 13.0ms | ActiveRecord: 3.5ms | Allocations: 4949)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:07:35 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"24", "post_id"=>"4", "content"=>"no bad news"}, "reply"=>"true"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (2.0ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "no bad news"], ["user_id", 1], ["post_id", 4], ["parent_id", 24], ["created_at", "2022-02-18 01:07:35.121525"], ["updated_at", "2022-02-18 01:07:35.121525"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 19ms (ActiveRecord: 7.6ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:07:35 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 111)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 80)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.7ms | Allocations: 1714)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.0ms | Allocations: 4416)
Completed 200 OK in 26ms (Views: 12.5ms | ActiveRecord: 4.7ms | Allocations: 6221)


Started GET "/comments/27" for ::1 at 2022-02-18 08:07:37 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 3.7ms | Allocations: 1061)
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.0ms | Allocations: 3617)
Completed 200 OK in 21ms (Views: 14.5ms | ActiveRecord: 4.1ms | Allocations: 4642)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:07:43 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"27", "post_id"=>"4", "content"=>"good news indeed"}, "reply"=>"true"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (2.2ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "good news indeed"], ["user_id", 1], ["post_id", 4], ["parent_id", 27], ["created_at", "2022-02-18 01:07:43.823844"], ["updated_at", "2022-02-18 01:07:43.823844"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 27ms (ActiveRecord: 9.1ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:07:43 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 141)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered posts/show.html.erb within layouts/application (Duration: 6.9ms | Allocations: 1741)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.9ms | Allocations: 4443)
Completed 200 OK in 22ms (Views: 12.2ms | ActiveRecord: 4.4ms | Allocations: 6263)


Started GET "/comments/28" for ::1 at 2022-02-18 08:07:45 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"28"}
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 3.7ms | Allocations: 1061)
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.1ms | Allocations: 3617)
Completed 200 OK in 22ms (Views: 15.9ms | ActiveRecord: 3.9ms | Allocations: 4642)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:07:51 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"28", "post_id"=>"4", "content"=>"no000"}, "reply"=>"true"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (2.2ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "no000"], ["user_id", 1], ["post_id", 4], ["parent_id", 28], ["created_at", "2022-02-18 01:07:51.445576"], ["updated_at", "2022-02-18 01:07:51.445576"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 19ms (ActiveRecord: 6.8ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:07:51 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.4ms | Allocations: 1771)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.5ms | Allocations: 4473)
Completed 200 OK in 24ms (Views: 11.3ms | ActiveRecord: 5.8ms | Allocations: 6308)


Started GET "/comments/29" for ::1 at 2022-02-18 08:07:53 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (4.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 9.6ms | Allocations: 1061)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.1ms | Allocations: 3618)
Completed 200 OK in 22ms (Views: 12.3ms | ActiveRecord: 6.6ms | Allocations: 4643)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:07:57 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"29", "post_id"=>"4", "content"=>"impossibe"}, "reply"=>"true"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.4ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "impossibe"], ["user_id", 1], ["post_id", 4], ["parent_id", 29], ["created_at", "2022-02-18 01:07:57.989065"], ["updated_at", "2022-02-18 01:07:57.989065"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 22ms (ActiveRecord: 6.9ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:07:58 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 201)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.8ms | Allocations: 1801)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.5ms | Allocations: 4503)
Completed 200 OK in 25ms (Views: 14.9ms | ActiveRecord: 4.4ms | Allocations: 6353)


Started GET "/comments/30" for ::1 at 2022-02-18 08:07:59 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"30"}
  [1m[36mComment Load (0.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 3.8ms | Allocations: 1061)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.1ms | Allocations: 3618)
Completed 200 OK in 16ms (Views: 10.7ms | ActiveRecord: 2.9ms | Allocations: 4644)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:08:04 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"30", "post_id"=>"4", "content"=>"how was that"}, "reply"=>"true"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (6.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.4ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "how was that"], ["user_id", 1], ["post_id", 4], ["parent_id", 30], ["created_at", "2022-02-18 01:08:04.719870"], ["updated_at", "2022-02-18 01:08:04.719870"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 23ms (ActiveRecord: 11.3ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:08:04 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 231)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 80)
  Rendered posts/show.html.erb within layouts/application (Duration: 6.3ms | Allocations: 1831)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.0ms | Allocations: 4533)
Completed 200 OK in 25ms (Views: 14.3ms | ActiveRecord: 4.6ms | Allocations: 6397)


Started GET "/comments/31" for ::1 at 2022-02-18 08:08:10 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"31"}
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (2.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 6.6ms | Allocations: 1061)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.7ms | Allocations: 3617)
Completed 200 OK in 24ms (Views: 13.4ms | ActiveRecord: 4.8ms | Allocations: 4643)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:08:20 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"31", "post_id"=>"4", "content"=>"i dont think it is good"}, "reply"=>"true"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (2.2ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "i dont think it is good"], ["user_id", 1], ["post_id", 4], ["parent_id", 31], ["created_at", "2022-02-18 01:08:20.209823"], ["updated_at", "2022-02-18 01:08:20.209823"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 24ms (ActiveRecord: 8.6ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:08:20 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 261)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 80)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.1ms | Allocations: 1861)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.3ms | Allocations: 4563)
Completed 200 OK in 23ms (Views: 12.1ms | ActiveRecord: 5.0ms | Allocations: 6442)


Started DELETE "/session" for ::1 at 2022-02-18 08:08:22 +0700
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "JTWSyWyIlkO-xA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "steve1"], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Update (2.5ms)[0m  [1m[33mUPDATE "users" SET "session_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["session_token", "J50bivTRD5ZbZQ"], ["updated_at", "2022-02-18 01:08:23.000493"], ["id", 1]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mTRANSACTION (40.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
Redirected to http://localhost:3000/session/new
Completed 302 Found in 61ms (ActiveRecord: 47.7ms | Allocations: 4468)


Started GET "/session/new" for ::1 at 2022-02-18 08:08:23 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 1.3ms | Allocations: 341)
  Rendered sessions/new.html.erb within layouts/application (Duration: 3.2ms | Allocations: 833)
  Rendered layout layouts/application.html.erb (Duration: 5.9ms | Allocations: 2222)
Completed 200 OK in 10ms (Views: 9.6ms | ActiveRecord: 0.0ms | Allocations: 3030)


Started GET "/subs" for ::1 at 2022-02-18 08:08:25 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 4.6ms | Allocations: 1219)
  Rendered layout layouts/application.html.erb (Duration: 7.8ms | Allocations: 2740)
Completed 200 OK in 12ms (Views: 9.5ms | ActiveRecord: 1.2ms | Allocations: 3621)


Started GET "/subs/1" for ::1 at 2022-02-18 08:08:27 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 7.3ms | Allocations: 3217)
  Rendered layout layouts/application.html.erb (Duration: 10.5ms | Allocations: 4738)
Completed 200 OK in 19ms (Views: 11.5ms | ActiveRecord: 2.4ms | Allocations: 5973)


Started GET "/posts/4" for ::1 at 2022-02-18 08:08:28 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 261)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 80)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.7ms | Allocations: 1864)
  Rendered layout layouts/application.html.erb (Duration: 8.7ms | Allocations: 3384)
Completed 200 OK in 19ms (Views: 8.3ms | ActiveRecord: 3.6ms | Allocations: 5263)


Started GET "/posts/4/comments/new" for ::1 at 2022-02-18 08:08:34 +0700
Processing by CommentsController#new as HTML
  Parameters: {"post_id"=>"4"}
Redirected to http://localhost:3000/session/new
Filter chain halted as :require_current_user! rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms | Allocations: 288)


Started GET "/session/new" for ::1 at 2022-02-18 08:08:34 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.3ms | Allocations: 188)
  Rendered sessions/new.html.erb within layouts/application (Duration: 0.9ms | Allocations: 387)
  Rendered layout layouts/application.html.erb (Duration: 4.5ms | Allocations: 1776)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.0ms | Allocations: 2053)


Started GET "/users/new" for ::1 at 2022-02-18 08:08:39 +0700
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 1.0ms | Allocations: 188)
  Rendered users/new.html.erb within layouts/application (Duration: 5.3ms | Allocations: 559)
  Rendered layout layouts/application.html.erb (Duration: 9.0ms | Allocations: 1947)
Completed 200 OK in 14ms (Views: 13.2ms | ActiveRecord: 0.0ms | Allocations: 2838)


Started POST "/users" for ::1 at 2022-02-18 08:08:50 +0700
Processing by UsersController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"stephen", "password"=>"[FILTERED]"}, "Create"=>"Submit"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "stephen"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "session_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "stephen"], ["password_digest", "$2a$12$IB/nzoxmj6Ng9ihpqY64Z.uakMqd6ZkINHgyO6Z3U9eKY6UlnX/WG"], ["session_token", "ARZRlcJiE3Mc0g"], ["created_at", "2022-02-18 01:08:50.805934"], ["updated_at", "2022-02-18 01:08:50.805934"]]
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 288ms (ActiveRecord: 5.9ms | Allocations: 3736)


Started GET "/" for ::1 at 2022-02-18 08:08:50 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 5.5ms | Allocations: 1062)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ARZRlcJiE3Mc0g"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ARZRlcJiE3Mc0g"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.4ms | Allocations: 3763)
Completed 200 OK in 15ms (Views: 12.0ms | ActiveRecord: 2.4ms | Allocations: 4059)


Started DELETE "/session" for ::1 at 2022-02-18 08:08:56 +0700
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ARZRlcJiE3Mc0g"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "stephen"], ["id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Update (1.4ms)[0m  [1m[33mUPDATE "users" SET "session_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["session_token", "ipyk4cwJS-ihTA"], ["updated_at", "2022-02-18 01:08:56.631186"], ["id", 4]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
Redirected to http://localhost:3000/session/new
Completed 302 Found in 23ms (ActiveRecord: 8.7ms | Allocations: 4285)


Started GET "/session/new" for ::1 at 2022-02-18 08:08:56 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.5ms | Allocations: 198)
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.6ms | Allocations: 397)
  Rendered layout layouts/application.html.erb (Duration: 5.8ms | Allocations: 1785)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.0ms | Allocations: 2063)


Started GET "/users/new" for ::1 at 2022-02-18 08:08:58 +0700
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.7ms | Allocations: 188)
  Rendered users/new.html.erb within layouts/application (Duration: 4.3ms | Allocations: 380)
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | Allocations: 1765)
Completed 200 OK in 11ms (Views: 10.5ms | ActiveRecord: 0.0ms | Allocations: 2078)


Started POST "/users" for ::1 at 2022-02-18 08:09:05 +0700
Processing by UsersController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"stephen", "password"=>"[FILTERED]"}, "Create"=>"Submit"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "stephen"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.2ms | Allocations: 53)
  Rendered users/new.html.erb within layouts/application (Duration: 0.9ms | Allocations: 241)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | Allocations: 1626)
Completed 200 OK in 312ms (Views: 5.5ms | ActiveRecord: 5.0ms | Allocations: 7637)


Started GET "/session/new" for ::1 at 2022-02-18 08:09:09 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.4ms | Allocations: 204)
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.1ms | Allocations: 396)
  Rendered layout layouts/application.html.erb (Duration: 7.0ms | Allocations: 1781)
Completed 200 OK in 8ms (Views: 7.9ms | ActiveRecord: 0.0ms | Allocations: 2058)


Started POST "/session" for ::1 at 2022-02-18 08:09:14 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"stephen", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "stephen"], ["LIMIT", 1]]
  ↳ app/models/user.rb:16:in `login_by_credentials'
Redirected to http://localhost:3000/
Completed 302 Found in 281ms (ActiveRecord: 1.2ms | Allocations: 1239)


Started GET "/" for ::1 at 2022-02-18 08:09:14 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 4.8ms | Allocations: 1058)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.9ms | Allocations: 3751)
Completed 200 OK in 14ms (Views: 11.3ms | ActiveRecord: 2.6ms | Allocations: 4046)


Started GET "/subs/1" for ::1 at 2022-02-18 08:09:18 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 8.5ms | Allocations: 1202)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | Allocations: 3896)
Completed 200 OK in 27ms (Views: 18.4ms | ActiveRecord: 4.1ms | Allocations: 4898)


Started GET "/posts/4" for ::1 at 2022-02-18 08:09:22 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 261)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.2ms | Allocations: 1864)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.0ms | Allocations: 4564)
Completed 200 OK in 31ms (Views: 15.4ms | ActiveRecord: 6.9ms | Allocations: 6444)


Started GET "/posts/4/edit" for ::1 at 2022-02-18 08:09:23 +0700
Processing by PostsController#edit as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:29:in `edit'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:32:in `edit'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 14ms (ActiveRecord: 5.6ms | Allocations: 2953)


Started GET "/posts/4" for ::1 at 2022-02-18 08:09:24 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 261)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 80)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 80)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.7ms | Allocations: 1861)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.0ms | Allocations: 4562)
Completed 200 OK in 25ms (Views: 13.9ms | ActiveRecord: 4.9ms | Allocations: 6441)


Started GET "/comments/32" for ::1 at 2022-02-18 08:09:30 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"32"}
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 6.3ms | Allocations: 1060)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.3ms | Allocations: 3617)
Completed 200 OK in 26ms (Views: 17.6ms | ActiveRecord: 4.2ms | Allocations: 4643)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:09:40 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"32", "post_id"=>"4", "content"=>"hop you are doing well"}, "reply"=>"true"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (3.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.9ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "hop you are doing well"], ["user_id", 4], ["post_id", 4], ["parent_id", 32], ["created_at", "2022-02-18 01:09:40.475807"], ["updated_at", "2022-02-18 01:09:40.475807"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 26ms (ActiveRecord: 8.8ms | Allocations: 4525)


Started GET "/posts/4" for ::1 at 2022-02-18 08:09:40 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (3.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 291)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 80)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 80)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.8ms | Allocations: 1891)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.8ms | Allocations: 4593)
Completed 200 OK in 26ms (Views: 14.5ms | ActiveRecord: 6.8ms | Allocations: 6488)


Started GET "/posts/4" for ::1 at 2022-02-18 08:23:16 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (3.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (3.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.9ms | Allocations: 602)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 41.3ms | Allocations: 14704)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 57.5ms | Allocations: 17782)
Completed 200 OK in 225ms (Views: 56.5ms | ActiveRecord: 37.1ms | Allocations: 56293)


Started GET "/posts/4" for ::1 at 2022-02-18 08:23:39 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (7.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.8ms | Allocations: 595)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 17.3ms | Allocations: 2739)
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 31.3ms | Allocations: 5708)
Completed 200 OK in 58ms (Views: 30.1ms | ActiveRecord: 13.8ms | Allocations: 9413)


Started GET "/posts/4/comments/new" for ::1 at 2022-02-18 08:23:46 +0700
Processing by CommentsController#new as HTML
  Parameters: {"post_id"=>"4"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:12:in `new'
  Rendering layout layouts/application.html.erb
  Rendering comments/new.html.erb within layouts/application
  Rendered comments/new.html.erb within layouts/application (Duration: 1.8ms | Allocations: 255)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.5ms | Allocations: 2570)
Completed 200 OK in 40ms (Views: 24.2ms | ActiveRecord: 2.2ms | Allocations: 5257)


Started POST "/comments" for ::1 at 2022-02-18 08:23:52 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"content"=>"the end of the world", "post_id"=>"4"}}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (3.0ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "the end of the world"], ["user_id", 4], ["post_id", 4], ["created_at", "2022-02-18 01:23:52.462777"], ["updated_at", "2022-02-18 01:23:52.462777"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (4.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 47ms (ActiveRecord: 14.6ms | Allocations: 4648)


Started GET "/posts/4" for ::1 at 2022-02-18 08:23:52 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (3.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 299)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 15.1ms | Allocations: 2059)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 35.1ms | Allocations: 4760)
Completed 200 OK in 60ms (Views: 32.7ms | ActiveRecord: 12.1ms | Allocations: 7728)


Started GET "/comments/33" for ::1 at 2022-02-18 08:26:15 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"33"}
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 7.1ms | Allocations: 1244)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.2ms | Allocations: 3801)
Completed 200 OK in 26ms (Views: 16.0ms | ActiveRecord: 4.2ms | Allocations: 5058)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:26:20 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"33", "post_id"=>"4", "content"=>"m"}, "reply"=>"true"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.6ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "m"], ["user_id", 4], ["post_id", 4], ["parent_id", 33], ["created_at", "2022-02-18 01:26:20.293360"], ["updated_at", "2022-02-18 01:26:20.293360"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 27ms (ActiveRecord: 9.0ms | Allocations: 4527)


Started GET "/posts/4" for ::1 at 2022-02-18 08:26:20 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (3.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 330)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.1ms | Allocations: 2090)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.1ms | Allocations: 4792)
Completed 200 OK in 36ms (Views: 18.2ms | ActiveRecord: 8.6ms | Allocations: 7782)


Started GET "/comments/35" for ::1 at 2022-02-18 08:26:22 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"35"}
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 3.8ms | Allocations: 1061)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.7ms | Allocations: 3617)
Completed 200 OK in 22ms (Views: 12.0ms | ActiveRecord: 4.0ms | Allocations: 4643)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:26:25 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"35", "post_id"=>"4", "content"=>"l"}, "reply"=>"true"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.7ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "l"], ["user_id", 4], ["post_id", 4], ["parent_id", 35], ["created_at", "2022-02-18 01:26:25.295451"], ["updated_at", "2022-02-18 01:26:25.295451"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 24ms (ActiveRecord: 8.9ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:26:25 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (3.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.6ms | Allocations: 361)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.8ms | Allocations: 2118)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 22.0ms | Allocations: 4819)
Completed 200 OK in 36ms (Views: 19.1ms | ActiveRecord: 8.8ms | Allocations: 7830)


Started GET "/comments/36" for ::1 at 2022-02-18 08:26:55 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"36"}
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 5.7ms | Allocations: 1061)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.4ms | Allocations: 3617)
Completed 200 OK in 22ms (Views: 14.4ms | ActiveRecord: 4.0ms | Allocations: 4642)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:27:00 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"36", "post_id"=>"4", "content"=>"n"}, "reply"=>"true"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (3.3ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "n"], ["user_id", 4], ["post_id", 4], ["parent_id", 36], ["created_at", "2022-02-18 01:27:00.117885"], ["updated_at", "2022-02-18 01:27:00.117885"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (5.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 27ms (ActiveRecord: 12.5ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:27:00 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 392)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.1ms | Allocations: 2149)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.6ms | Allocations: 4850)
Completed 200 OK in 36ms (Views: 15.5ms | ActiveRecord: 8.8ms | Allocations: 7884)


Started GET "/comments/37" for ::1 at 2022-02-18 08:27:03 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"37"}
  [1m[36mComment Load (4.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 5.1ms | Allocations: 1061)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 23.2ms | Allocations: 3617)
Completed 200 OK in 40ms (Views: 23.6ms | ActiveRecord: 6.9ms | Allocations: 4643)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:27:06 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"37", "post_id"=>"4", "content"=>"kk"}, "reply"=>"true"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (3.8ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "kk"], ["user_id", 4], ["post_id", 4], ["parent_id", 37], ["created_at", "2022-02-18 01:27:06.752082"], ["updated_at", "2022-02-18 01:27:06.752082"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (5.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 32ms (ActiveRecord: 13.4ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:27:06 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (3.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.1ms | Allocations: 423)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.7ms | Allocations: 2180)
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 126.0ms | Allocations: 4882)
Completed 200 OK in 141ms (Views: 99.3ms | ActiveRecord: 31.5ms | Allocations: 7938)


Started GET "/comments/38" for ::1 at 2022-02-18 08:27:09 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"38"}
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 6.7ms | Allocations: 1061)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | Allocations: 3618)
Completed 200 OK in 22ms (Views: 13.0ms | ActiveRecord: 4.6ms | Allocations: 4643)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:27:12 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"38", "post_id"=>"4", "content"=>"ll"}, "reply"=>"true"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.7ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "ll"], ["user_id", 4], ["post_id", 4], ["parent_id", 38], ["created_at", "2022-02-18 01:27:12.095950"], ["updated_at", "2022-02-18 01:27:12.095950"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (13.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 34ms (ActiveRecord: 18.9ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:27:12 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.2ms | Allocations: 454)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.4ms | Allocations: 2211)
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 24.5ms | Allocations: 4912)
Completed 200 OK in 41ms (Views: 21.5ms | ActiveRecord: 7.7ms | Allocations: 7990)


Started GET "/comments/25" for ::1 at 2022-02-18 08:29:29 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"25"}
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 6.8ms | Allocations: 1061)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.6ms | Allocations: 3617)
Completed 200 OK in 26ms (Views: 17.0ms | ActiveRecord: 4.7ms | Allocations: 4642)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:29:35 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"25", "post_id"=>"4", "content"=>"oh boy"}, "reply"=>"true"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (2.3ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "oh boy"], ["user_id", 4], ["post_id", 4], ["parent_id", 25], ["created_at", "2022-02-18 01:29:35.237687"], ["updated_at", "2022-02-18 01:29:35.237687"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 28ms (ActiveRecord: 10.7ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:29:35 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 454)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.3ms | Allocations: 2242)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.1ms | Allocations: 4943)
Completed 200 OK in 34ms (Views: 16.8ms | ActiveRecord: 6.5ms | Allocations: 8042)


Started GET "/comments/24" for ::1 at 2022-02-18 08:29:38 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"24"}
  [1m[36mComment Load (2.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 6.9ms | Allocations: 1061)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.9ms | Allocations: 3617)
Completed 200 OK in 28ms (Views: 13.0ms | ActiveRecord: 5.6ms | Allocations: 4642)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:29:44 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"24", "post_id"=>"4", "content"=>"opp"}, "reply"=>"true"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (3.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.4ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "opp"], ["user_id", 4], ["post_id", 4], ["parent_id", 24], ["created_at", "2022-02-18 01:29:44.103658"], ["updated_at", "2022-02-18 01:29:44.103658"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 28ms (ActiveRecord: 8.8ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:29:44 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.2ms | Allocations: 486)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 1.0ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.6ms | Allocations: 2274)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 23.2ms | Allocations: 4976)
Completed 200 OK in 39ms (Views: 20.1ms | ActiveRecord: 8.2ms | Allocations: 8098)


Started GET "/comments/41" for ::1 at 2022-02-18 08:29:47 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"41"}
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 4.1ms | Allocations: 1061)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.7ms | Allocations: 3618)
Completed 200 OK in 23ms (Views: 13.2ms | ActiveRecord: 5.0ms | Allocations: 4644)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:29:50 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"41", "post_id"=>"4", "content"=>"___"}, "reply"=>"true"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (3.5ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "___"], ["user_id", 4], ["post_id", 4], ["parent_id", 41], ["created_at", "2022-02-18 01:29:50.788514"], ["updated_at", "2022-02-18 01:29:50.788514"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 31ms (ActiveRecord: 12.1ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:29:50 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 517)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.7ms | Allocations: 2305)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.4ms | Allocations: 5007)
Completed 200 OK in 38ms (Views: 18.5ms | ActiveRecord: 6.9ms | Allocations: 8149)


Started GET "/comments/28" for ::1 at 2022-02-18 08:30:00 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"28"}
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (2.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 6.1ms | Allocations: 1061)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.2ms | Allocations: 3617)
Completed 200 OK in 24ms (Views: 13.7ms | ActiveRecord: 4.9ms | Allocations: 4643)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:30:04 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"28", "post_id"=>"4", "content"=>"||"}, "reply"=>"true"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (3.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.7ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "||"], ["user_id", 4], ["post_id", 4], ["parent_id", 28], ["created_at", "2022-02-18 01:30:04.989398"], ["updated_at", "2022-02-18 01:30:04.989398"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 27ms (ActiveRecord: 8.7ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:30:05 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (5.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 3.6ms | Allocations: 549)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 19.6ms | Allocations: 2337)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 32.7ms | Allocations: 5038)
Completed 200 OK in 53ms (Views: 26.5ms | ActiveRecord: 11.5ms | Allocations: 8201)


Started GET "/comments/29" for ::1 at 2022-02-18 08:30:08 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 5.4ms | Allocations: 1061)
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.3ms | Allocations: 3617)
Completed 200 OK in 25ms (Views: 15.1ms | ActiveRecord: 5.9ms | Allocations: 4642)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:30:12 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"29", "post_id"=>"4", "content"=>"||"}, "reply"=>"true"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (3.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (3.2ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "||"], ["user_id", 4], ["post_id", 4], ["parent_id", 29], ["created_at", "2022-02-18 01:30:12.794415"], ["updated_at", "2022-02-18 01:30:12.794415"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 30ms (ActiveRecord: 11.6ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:30:12 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 581)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 14.3ms | Allocations: 2369)
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 27.2ms | Allocations: 5071)
Completed 200 OK in 44ms (Views: 24.6ms | ActiveRecord: 8.2ms | Allocations: 8256)


Started GET "/comments/31" for ::1 at 2022-02-18 08:30:16 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"31"}
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (2.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 6.4ms | Allocations: 1061)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.5ms | Allocations: 3618)
Completed 200 OK in 27ms (Views: 15.1ms | ActiveRecord: 5.0ms | Allocations: 4644)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:30:20 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"31", "post_id"=>"4", "content"=>"||"}, "reply"=>"true"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.8ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "||"], ["user_id", 4], ["post_id", 4], ["parent_id", 31], ["created_at", "2022-02-18 01:30:20.759632"], ["updated_at", "2022-02-18 01:30:20.759632"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 32ms (ActiveRecord: 9.3ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:30:20 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.4ms | Allocations: 613)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.1ms | Allocations: 2401)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.3ms | Allocations: 5103)
Completed 200 OK in 37ms (Views: 19.3ms | ActiveRecord: 7.2ms | Allocations: 8308)


Started GET "/comments/33" for ::1 at 2022-02-18 08:30:40 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"33"}
  [1m[36mComment Load (7.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (4.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 9.1ms | Allocations: 1061)
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 29.2ms | Allocations: 3618)
Completed 200 OK in 59ms (Views: 25.2ms | ActiveRecord: 13.9ms | Allocations: 4643)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:30:44 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"33", "post_id"=>"4", "content"=>"||"}, "reply"=>"true"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (2.0ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "||"], ["user_id", 4], ["post_id", 4], ["parent_id", 33], ["created_at", "2022-02-18 01:30:44.305797"], ["updated_at", "2022-02-18 01:30:44.305797"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 24ms (ActiveRecord: 9.8ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:30:44 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.8ms | Allocations: 645)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.1ms | Allocations: 2433)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 22.6ms | Allocations: 5134)
Completed 200 OK in 43ms (Views: 19.6ms | ActiveRecord: 9.9ms | Allocations: 8360)


Started GET "/comments/37" for ::1 at 2022-02-18 08:30:47 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"37"}
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 3.7ms | Allocations: 1061)
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.9ms | Allocations: 3617)
Completed 200 OK in 22ms (Views: 10.8ms | ActiveRecord: 5.5ms | Allocations: 4642)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:30:51 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"37", "post_id"=>"4", "content"=>"||"}, "reply"=>"true"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (2.1ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "||"], ["user_id", 4], ["post_id", 4], ["parent_id", 37], ["created_at", "2022-02-18 01:30:51.331410"], ["updated_at", "2022-02-18 01:30:51.331410"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (41.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 64ms (ActiveRecord: 49.1ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:30:51 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 2.4ms | Allocations: 677)
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 20.5ms | Allocations: 2465)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 34.7ms | Allocations: 5169)
Completed 200 OK in 57ms (Views: 33.2ms | ActiveRecord: 8.9ms | Allocations: 8416)


Started GET "/comments/39" for ::1 at 2022-02-18 08:31:03 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"39"}
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (5.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 9.2ms | Allocations: 1061)
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 22.5ms | Allocations: 3618)
Completed 200 OK in 30ms (Views: 15.5ms | ActiveRecord: 9.4ms | Allocations: 4644)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:31:07 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"39", "post_id"=>"4", "content"=>"|"}, "reply"=>"true"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.6ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "|"], ["user_id", 4], ["post_id", 4], ["parent_id", 39], ["created_at", "2022-02-18 01:31:07.245344"], ["updated_at", "2022-02-18 01:31:07.245344"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (41.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 63ms (ActiveRecord: 47.7ms | Allocations: 4526)


Started GET "/posts/4" for ::1 at 2022-02-18 08:31:07 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.7ms | Allocations: 708)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.8ms | Allocations: 2496)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.6ms | Allocations: 5198)
Completed 200 OK in 32ms (Views: 16.2ms | ActiveRecord: 6.1ms | Allocations: 8468)


Started GET "/comments/47" for ::1 at 2022-02-18 08:31:12 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"47"}
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 4.1ms | Allocations: 1061)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.7ms | Allocations: 3618)
Completed 200 OK in 21ms (Views: 12.8ms | ActiveRecord: 3.8ms | Allocations: 4643)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 08:31:17 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"47", "post_id"=>"4", "content"=>"pump"}, "reply"=>"true"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (1.9ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "pump"], ["user_id", 4], ["post_id", 4], ["parent_id", 47], ["created_at", "2022-02-18 01:31:17.512090"], ["updated_at", "2022-02-18 01:31:17.512090"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 27ms (ActiveRecord: 7.7ms | Allocations: 4529)


Started GET "/posts/4" for ::1 at 2022-02-18 08:31:17 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 2.2ms | Allocations: 739)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.0ms | Allocations: 2527)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.3ms | Allocations: 5229)
Completed 200 OK in 36ms (Views: 16.3ms | ActiveRecord: 8.2ms | Allocations: 8521)


Started GET "/subs" for ::1 at 2022-02-18 08:33:13 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 6.1ms | Allocations: 1223)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.9ms | Allocations: 3924)
Completed 200 OK in 21ms (Views: 17.6ms | ActiveRecord: 2.3ms | Allocations: 4804)


Started GET "/subs/1" for ::1 at 2022-02-18 08:33:48 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 16.3ms | Allocations: 4757)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 30.5ms | Allocations: 7458)
Completed 200 OK in 45ms (Views: 29.4ms | ActiveRecord: 4.2ms | Allocations: 8692)


Started GET "/posts/4" for ::1 at 2022-02-18 08:33:50 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 3.3ms | Allocations: 739)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 13.6ms | Allocations: 2530)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 23.2ms | Allocations: 5232)
Completed 200 OK in 54ms (Views: 21.7ms | ActiveRecord: 6.8ms | Allocations: 8524)


Started GET "/posts/4" for ::1 at 2022-02-18 14:27:02 +0700
  [1m[35m (4.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (42.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.9ms | Allocations: 1057)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 53.5ms | Allocations: 20694)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 91.7ms | Allocations: 28339)
Completed 200 OK in 346ms (Views: 87.0ms | ActiveRecord: 171.8ms | Allocations: 66846)


Started GET "/comments/24" for ::1 at 2022-02-18 14:27:05 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"24"}
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 4.7ms | Allocations: 1418)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.1ms | Allocations: 3977)
Completed 200 OK in 25ms (Views: 13.4ms | ActiveRecord: 3.8ms | Allocations: 5714)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 14:27:11 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"24", "post_id"=>"4", "content"=>"oh well"}, "reply"=>"true"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (7.6ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "oh well"], ["user_id", 4], ["post_id", 4], ["parent_id", 24], ["created_at", "2022-02-18 07:27:11.306250"], ["updated_at", "2022-02-18 07:27:11.306250"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 31ms (ActiveRecord: 14.9ms | Allocations: 4889)


Started GET "/posts/4" for ::1 at 2022-02-18 14:27:11 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (3.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.2ms | Allocations: 771)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.2ms | Allocations: 2562)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | Allocations: 5265)
Completed 200 OK in 30ms (Views: 12.4ms | ActiveRecord: 9.0ms | Allocations: 8579)


Started GET "/subs" for ::1 at 2022-02-18 14:27:19 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 6.4ms | Allocations: 1221)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.6ms | Allocations: 3922)
Completed 200 OK in 24ms (Views: 21.3ms | ActiveRecord: 2.1ms | Allocations: 4802)


Started GET "/subs/2" for ::1 at 2022-02-18 14:27:21 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 11.2ms | Allocations: 4764)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.3ms | Allocations: 7465)
Completed 200 OK in 28ms (Views: 18.0ms | ActiveRecord: 4.6ms | Allocations: 8700)


Started GET "/subs/new" for ::1 at 2022-02-18 14:27:24 +0700
Processing by SubsController#new as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering subs/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 1.4ms | Allocations: 204)
  Rendered subs/new.html.erb within layouts/application (Duration: 4.3ms | Allocations: 689)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.3ms | Allocations: 3003)
Completed 200 OK in 21ms (Views: 15.5ms | ActiveRecord: 1.5ms | Allocations: 4321)


Started POST "/subs" for ::1 at 2022-02-18 14:27:36 +0700
Processing by SubsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "sub"=>{"title"=>"news", "description"=>"USA news"}, "Create a new Sub"=>"Submit"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/subs_controller.rb:20:in `create'
  [1m[36mSub Create (2.8ms)[0m  [1m[32mINSERT INTO "subs" ("title", "user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "news"], ["user_id", 4], ["description", "USA news"], ["created_at", "2022-02-18 07:27:36.984321"], ["updated_at", "2022-02-18 07:27:36.984321"]]
  ↳ app/controllers/subs_controller.rb:20:in `create'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/subs_controller.rb:20:in `create'
Redirected to http://localhost:3000/subs/5
Completed 302 Found in 26ms (ActiveRecord: 6.7ms | Allocations: 4944)


Started GET "/subs/5" for ::1 at 2022-02-18 14:27:37 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (2.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 5]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 5.0ms | Allocations: 1078)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.0ms | Allocations: 3772)
Completed 200 OK in 31ms (Views: 10.9ms | ActiveRecord: 5.4ms | Allocations: 4776)


Started GET "/subs" for ::1 at 2022-02-18 14:27:41 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 6.4ms | Allocations: 1100)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.6ms | Allocations: 3794)
Completed 200 OK in 21ms (Views: 18.6ms | ActiveRecord: 2.2ms | Allocations: 4090)


Started GET "/subs/1" for ::1 at 2022-02-18 14:27:43 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (2.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 7.6ms | Allocations: 1201)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.1ms | Allocations: 3896)
Completed 200 OK in 22ms (Views: 11.5ms | ActiveRecord: 4.8ms | Allocations: 4898)


Started GET "/posts/4" for ::1 at 2022-02-18 14:27:48 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.1ms | Allocations: 771)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 6.2ms | Allocations: 2562)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.1ms | Allocations: 5264)
Completed 200 OK in 28ms (Views: 10.3ms | ActiveRecord: 7.4ms | Allocations: 8577)


Started GET "/comments/26" for ::1 at 2022-02-18 14:27:59 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"26"}
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (3.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 7.5ms | Allocations: 1061)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.1ms | Allocations: 3617)
Completed 200 OK in 19ms (Views: 10.4ms | ActiveRecord: 5.7ms | Allocations: 4642)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 14:28:07 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"26", "post_id"=>"4", "content"=>""}, "reply"=>"true"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:30:in `create'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 1.8ms | Allocations: 663)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 8.8ms | Allocations: 2973)
Completed 200 OK in 31ms (Views: 9.7ms | ActiveRecord: 3.0ms | Allocations: 10395)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 14:28:12 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"26", "post_id"=>"4", "content"=>"hey this is bad"}, "reply"=>"true"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:21:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mComment Create (2.0ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "hey this is bad"], ["user_id", 4], ["post_id", 4], ["parent_id", 26], ["created_at", "2022-02-18 07:28:12.385529"], ["updated_at", "2022-02-18 07:28:12.385529"]]
  ↳ app/controllers/comments_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:24:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 23ms (ActiveRecord: 7.0ms | Allocations: 4548)


Started GET "/posts/4" for ::1 at 2022-02-18 14:28:12 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:10:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.1ms | Allocations: 771)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 112)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 81)
  Rendered posts/show.html.erb within layouts/application (Duration: 6.9ms | Allocations: 2590)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.4ms | Allocations: 5293)
Completed 200 OK in 29ms (Views: 13.1ms | ActiveRecord: 7.3ms | Allocations: 8629)


  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateVotes (20220218114014)
  [1m[35m (2.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateVotes (20220218114014)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateVotes (20220218114014)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateVotes (20220218114014)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (34.9ms)[0m  [1m[35mCREATE TABLE "votes" ("id" bigserial primary key, "value" integer, "votable_type" character varying, "votable_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE INDEX "index_votes_on_votable" ON "votes" ("votable_type", "votable_id")[0m
  [1m[35m (14.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_votes_on_value_and_votable" ON "votes" ("value", "votable")[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateVotes (20220218114014)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "votes" ("id" bigserial primary key, "value" integer, "votable_type" character varying, "votable_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_votes_on_votable" ON "votes" ("votable_type", "votable_id")[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_votes_on_value_and_votable_id_and_votable_type" ON "votes" ("value", "votable_id", "votable_type")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220218114014"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (40.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateVotes (20220218114014)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (44.4ms)[0m  [1m[35mDROP INDEX  "index_votes_on_value_and_votable_id_and_votable_type"[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE "votes"[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (26.0ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20220218114014"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateVotes (20220218114014)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (44.6ms)[0m  [1m[35mCREATE TABLE "votes" ("id" bigserial primary key, "user_id" integer NOT NULL, "value" integer, "votable_type" character varying, "votable_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_votes_on_user_id" ON "votes" ("user_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_votes_on_votable" ON "votes" ("votable_type", "votable_id")[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateVotes (20220218114014)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (56.7ms)[0m  [1m[35mCREATE TABLE "votes" ("id" bigserial primary key, "user_id" integer NOT NULL, "value" integer, "votable_type" character varying, "votable_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_votes_on_user_id" ON "votes" ("user_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_votes_on_votable" ON "votes" ("votable_type", "votable_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "votes_value_unique" ON "votes" ("user_id", "value", "votable_id", "votable_type")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220218114014"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mVote Load (21.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" ORDER BY "votes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVote Load (0.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" ORDER BY "votes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPost Load (0.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVote Create (44.4ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 1], ["value", 1], ["votable_type", "Post"], ["votable_id", 1], ["created_at", "2022-02-18 13:17:09.363118"], ["updated_at", "2022-02-18 13:17:09.363118"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPost Load (0.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPost Load (0.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVote Load (0.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVote Load (0.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVote Load (5.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND (votable.id=1)[0m  [["user_id", 1]]
  [1m[36mVote Load (44.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND (votable.id=1) /* loading for inspect */ LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND (votable.id=1)[0m  [["user_id", 1]]
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND (votable.id=1) /* loading for inspect */ LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND (votable.id=1) /* loading for inspect */ LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  [1m[36mVote Load (0.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateVotes (20220218114014)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP INDEX  "votes_value_unique"[0m
  [1m[35m (5.0ms)[0m  [1m[35mDROP TABLE "votes"[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (0.7ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20220218114014"]]
  [1m[36mTRANSACTION (43.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateVotes (20220218114014)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (36.1ms)[0m  [1m[35mCREATE TABLE "votes" ("id" bigserial primary key, "user_id" integer NOT NULL, "value" integer, "votable_type" character varying, "votable_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_votes_on_user_id" ON "votes" ("user_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_votes_on_votable" ON "votes" ("votable_type", "votable_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "votes_value_unique" ON "votes" ("user_id", "votable_id", "votable_type")[0m
  [1m[36mActiveRecord::SchemaMigration Create (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220218114014"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408160385485533825)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mVote Load (45.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["user_id", 1], ["id", nil], ["LIMIT", 1]]
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."id" IN ($2)[0m  [["user_id", 1], ["id", 1]]
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND (votable_id=1) LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mVote Load (8.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 1], ["votable_type", "Post"], ["votable_id", 1], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" = $2 LIMIT $3[0m  [["votable_type", "Post"], ["votable_id", 1], ["LIMIT", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" ORDER BY "votes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" ORDER BY "votes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" ORDER BY "votes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPost Load (0.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVote Load (0.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  [1m[36mVote Load (0.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" = $2 LIMIT $3[0m  [["votable_type", "Post"], ["votable_id", 1], ["LIMIT", 1]]
  [1m[36mVote Load (0.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" ORDER BY "votes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVote Load (0.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVote Create (6.4ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 1], ["value", 1], ["votable_type", "Post"], ["votable_id", 1], ["created_at", "2022-02-18 14:02:43.636297"], ["updated_at", "2022-02-18 14:02:43.636297"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVote Load (0.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 1]]
  [1m[36mPost Load (0.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVote Load (0.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 1], ["votable_type", "Post"], ["votable_id", 1], ["LIMIT", 1]]
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 1], ["votable_type", "Post"], ["votable_id", 1], ["LIMIT", 1]]
  [1m[36mPost Load (1.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 1], ["votable_type", "Post"], ["votable_id", 3], ["LIMIT", 1]]
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 2], ["votable_type", "Post"], ["votable_id", 3], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPost Load (2.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 AND "votes"."value" = $4 LIMIT $5[0m  [["user_id", 2], ["votable_type", "Post"], ["votable_id", 3], ["value", 0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mVote Create (4.6ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 2], ["value", 0], ["votable_type", "Post"], ["votable_id", 3], ["created_at", "2022-02-18 14:08:55.086426"], ["updated_at", "2022-02-18 14:08:55.086426"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  [1m[36mVote Load (10.2ms)[0m  [1m[34mSELECT SUM(votes.value) FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS x FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS x FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 1], ["votable_type", "Post"], ["LIMIT", 11]]
  [1m[36mVote Load (0.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS x FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS x FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  [1m[36mPost Load (0.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mVote Create (2.1ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 2], ["value", 1], ["votable_type", "Post"], ["votable_id", 1], ["created_at", "2022-02-18 14:45:54.349180"], ["updated_at", "2022-02-18 14:45:54.349180"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS x FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  [1m[36mVote Load (0.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS x FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
Started GET "/" for ::1 at 2022-02-18 21:54:45 +0700
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 10.2ms | Allocations: 4204)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 31.9ms | Allocations: 12963)
Completed 200 OK in 38ms (Views: 27.9ms | ActiveRecord: 5.0ms | Allocations: 15478)


Started GET "/subs/1" for ::1 at 2022-02-18 21:54:49 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 25.6ms | Allocations: 15130)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 32.2ms | Allocations: 17827)
Completed 200 OK in 42ms (Views: 29.9ms | ActiveRecord: 4.8ms | Allocations: 18954)


Started GET "/posts/2" for ::1 at 2022-02-18 21:54:59 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 9.7ms | Allocations: 4485)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.2ms | Allocations: 7186)
Completed 200 OK in 45ms (Views: 17.1ms | ActiveRecord: 6.0ms | Allocations: 12893)


Started GET "/posts/2" for ::1 at 2022-02-18 21:59:05 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 36.3ms | Allocations: 14821)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 63.6ms | Allocations: 24328)
Completed 200 OK in 118ms (Views: 45.2ms | ActiveRecord: 48.4ms | Allocations: 39239)


Started GET "/posts/2" for ::1 at 2022-02-18 21:59:07 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 6.7ms | Allocations: 1212)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.7ms | Allocations: 3906)
Completed 200 OK in 27ms (Views: 12.0ms | ActiveRecord: 5.7ms | Allocations: 5712)


Started GET "/subs" for ::1 at 2022-02-18 21:59:09 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 9.0ms | Allocations: 1257)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.3ms | Allocations: 3958)
Completed 200 OK in 18ms (Views: 14.7ms | ActiveRecord: 2.9ms | Allocations: 4838)


Started GET "/subs/1" for ::1 at 2022-02-18 21:59:10 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (32.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 ORDER BY "votes"."id" ASC LIMIT $3[0m  [["votable_id", 2], ["votable_type", "Post"], ["LIMIT", 1]]
  ↳ app/models/sub.rb:11:in `block in vote_of_post_by_sub'
Completed 500 Internal Server Error in 70ms (ActiveRecord: 44.6ms | Allocations: 15003)



ActiveRecord::StatementInvalid - PG::GroupingError: ERROR:  column "votes.id" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: ...id" = $1 AND "votes"."votable_type" = $2 ORDER BY "votes"."i...
                                                             ^:
  app/models/sub.rb:11:in `block in vote_of_post_by_sub'
  app/models/sub.rb:10:in `vote_of_post_by_sub'
  app/controllers/subs_controller.rb:9:in `show'

Started POST "/__better_errors/193cfa60267df8f1/variables" for ::1 at 2022-02-18 21:59:10 +0700
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["sub_id", 1], ["LIMIT", 11]]
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["sub_id", 1], ["LIMIT", 11]]
Started GET "/subs/1" for ::1 at 2022-02-18 22:00:50 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 ORDER BY "votes"."id" ASC LIMIT $3[0m  [["votable_id", 2], ["votable_type", "Post"], ["LIMIT", 1]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
Completed 500 Internal Server Error in 83ms (ActiveRecord: 35.9ms | Allocations: 31502)



ActiveRecord::StatementInvalid - PG::GroupingError: ERROR:  column "votes.id" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: ...id" = $1 AND "votes"."votable_type" = $2 ORDER BY "votes"."i...
                                                             ^:
  app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  app/models/sub.rb:10:in `vote_of_post_by_sub'
  app/controllers/subs_controller.rb:9:in `show'

Started POST "/__better_errors/aa29f4d11f521dc5/variables" for ::1 at 2022-02-18 22:00:51 +0700
  [1m[36mVote Load (2.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 2], ["votable_type", "Post"], ["LIMIT", 11]]
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["sub_id", 1], ["LIMIT", 11]]
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["sub_id", 1], ["LIMIT", 11]]
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:01:29 +0700
  [1m[36mVote Load (0.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 2], ["votable_type", "Post"], ["LIMIT", 11]]
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:01:36 +0700
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 ORDER BY "votes"."id" ASC LIMIT $3[0m  [["votable_id", 2], ["votable_type", "Post"], ["LIMIT", 1]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:01:44 +0700
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 ORDER BY "votes"."id" ASC LIMIT $3[0m  [["votable_id", 2], ["votable_type", "Post"], ["LIMIT", 1]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:02:38 +0700
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:02:42 +0700
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 2], ["votable_type", "Post"], ["LIMIT", 11]]
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:02:49 +0700
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 2], ["votable_type", "Post"], ["LIMIT", 11]]
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:02:59 +0700
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:03:05 +0700
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:03:08 +0700
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:03:12 +0700
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:03:17 +0700
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:03:23 +0700
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:03:32 +0700
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:03:38 +0700
Started POST "/__better_errors/aa29f4d11f521dc5/eval" for ::1 at 2022-02-18 22:03:45 +0700
Started GET "/subs/1" for ::1 at 2022-02-18 22:04:32 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (0.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (4.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 ORDER BY "votes"."id" ASC LIMIT $3[0m  [["votable_id", 2], ["votable_type", "Post"], ["LIMIT", 1]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
Completed 500 Internal Server Error in 116ms (ActiveRecord: 35.4ms | Allocations: 31504)



ActiveRecord::StatementInvalid - PG::GroupingError: ERROR:  column "votes.id" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: ...id" = $1 AND "votes"."votable_type" = $2 ORDER BY "votes"."i...
                                                             ^:
  app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  app/models/sub.rb:10:in `vote_of_post_by_sub'
  app/controllers/subs_controller.rb:9:in `show'

Started POST "/__better_errors/302ab5be2668c0da/variables" for ::1 at 2022-02-18 22:04:32 +0700
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 2], ["votable_type", "Post"], ["LIMIT", 11]]
  [1m[36mPost Load (2.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["sub_id", 1], ["LIMIT", 11]]
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["sub_id", 1], ["LIMIT", 11]]
Started POST "/__better_errors/302ab5be2668c0da/eval" for ::1 at 2022-02-18 22:04:44 +0700
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 ORDER BY "votes"."id" ASC LIMIT $3[0m  [["votable_id", 2], ["votable_type", "Post"], ["LIMIT", 1]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mVote Load (53.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 ORDER BY "votes"."id" ASC LIMIT $3[0m  [["votable_id", 2], ["votable_type", "Post"], ["LIMIT", 1]]
  [1m[36mPost Load (0.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mVote Load (4.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 ORDER BY "votes"."id" ASC LIMIT $3[0m  [["votable_id", 2], ["votable_type", "Post"], ["LIMIT", 1]]
  [1m[36mPost Load (0.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  [1m[36mPost Load (0.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 ORDER BY "votes"."id" ASC LIMIT $3[0m  [["votable_id", 1], ["votable_type", "Post"], ["LIMIT", 1]]
  [1m[36mPost Load (0.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 ORDER BY "votes"."id" ASC LIMIT $3[0m  [["votable_id", 1], ["votable_type", "Post"], ["LIMIT", 1]]
  [1m[36mPost Load (0.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVote Load (3.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  [1m[36mPost Load (0.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
Started GET "/subs/1" for ::1 at 2022-02-18 22:07:23 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 4.2ms | Allocations: 1324)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 31.7ms | Allocations: 10541)
Completed 200 OK in 126ms (Views: 24.5ms | ActiveRecord: 42.1ms | Allocations: 41967)


Started GET "/subs/1" for ::1 at 2022-02-18 22:07:26 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (2.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.0ms | Allocations: 781)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 9.7ms | Allocations: 3475)
Completed 200 OK in 36ms (Views: 9.2ms | ActiveRecord: 10.2ms | Allocations: 8960)


Started GET "/posts/2" for ::1 at 2022-02-18 22:13:54 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:22:in `vote_of_comment_by_post'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 20.3ms | Allocations: 13606)
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 41.1ms | Allocations: 22381)
Completed 200 OK in 164ms (Views: 40.9ms | ActiveRecord: 82.8ms | Allocations: 40400)


Started GET "/subs/1" for ::1 at 2022-02-18 22:13:57 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 3.6ms | Allocations: 1310)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.1ms | Allocations: 4011)
Completed 200 OK in 48ms (Views: 12.5ms | ActiveRecord: 10.0ms | Allocations: 17999)


Started GET "/posts/1" for ::1 at 2022-02-18 22:13:59 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (4.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:22:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23]]
  ↳ app/models/post.rb:22:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 6], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 7], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 8], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 9], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 10], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 11], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 12], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 13], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 14], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 15], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 16], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 17], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 18], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 19], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 20], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 21], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 22], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 23], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 4.7ms | Allocations: 3663)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.8ms | Allocations: 5147)
  Rendered layout layouts/application.html.erb (Duration: 10.0ms | Allocations: 5231)
Completed 500 Internal Server Error in 150ms (ActiveRecord: 63.9ms | Allocations: 36740)



NameError - undefined local variable or method `vote' for #<ActionView::Base:0x007f8bc21bc3d0>:
  app/views/comments/_comment.html.erb:3
  app/views/posts/show.html.erb:30
  app/views/posts/show.html.erb:26
  app/views/posts/show.html.erb:23
  app/controllers/posts_controller.rb:8:in `show'

Started POST "/__better_errors/c24c22e56452549f/variables" for ::1 at 2022-02-18 22:14:00 +0700
Started GET "/posts/1" for ::1 at 2022-02-18 22:14:11 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:22:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23]]
  ↳ app/models/post.rb:22:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 6], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 7], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 8], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 9], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 10], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 11], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 12], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 13], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 14], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 15], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 16], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 17], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 18], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 19], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 20], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 21], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 22], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 23], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:23:in `block in vote_of_comment_by_post'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.6ms | Allocations: 744)
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 429)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.4ms | Allocations: 3325)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.7ms | Allocations: 6295)
Completed 200 OK in 120ms (Views: 16.8ms | ActiveRecord: 42.6ms | Allocations: 31191)


Started GET "/subs" for ::1 at 2022-02-18 22:14:23 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 11.7ms | Allocations: 1262)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.6ms | Allocations: 3964)
Completed 200 OK in 26ms (Views: 22.4ms | ActiveRecord: 2.9ms | Allocations: 4797)


Started GET "/subs/5" for ::1 at 2022-02-18 22:14:25 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 5]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 5]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.3ms | Allocations: 900)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.8ms | Allocations: 3604)
Completed 200 OK in 19ms (Views: 10.9ms | ActiveRecord: 3.7ms | Allocations: 5722)


Started GET "/subs" for ::1 at 2022-02-18 22:14:30 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 7.9ms | Allocations: 1100)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.6ms | Allocations: 3794)
Completed 200 OK in 17ms (Views: 13.5ms | ActiveRecord: 3.1ms | Allocations: 4091)


Started GET "/subs/2" for ::1 at 2022-02-18 22:14:32 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mSub Load (0.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (3.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.5ms | Allocations: 782)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.1ms | Allocations: 3476)
Completed 200 OK in 40ms (Views: 10.7ms | ActiveRecord: 11.9ms | Allocations: 8959)


Started GET "/subs/2" for ::1 at 2022-02-18 22:20:48 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 3.3ms | Allocations: 1318)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 23.8ms | Allocations: 10092)
Completed 200 OK in 150ms (Views: 25.3ms | ActiveRecord: 63.0ms | Allocations: 42689)


Started GET "/subs/2" for ::1 at 2022-02-18 22:20:51 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.0ms | Allocations: 783)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.1ms | Allocations: 3477)
Completed 200 OK in 33ms (Views: 9.7ms | ActiveRecord: 9.7ms | Allocations: 8962)


Started GET "/subs" for ::1 at 2022-02-18 22:20:53 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 7.2ms | Allocations: 1258)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.5ms | Allocations: 3960)
Completed 200 OK in 25ms (Views: 20.5ms | ActiveRecord: 3.7ms | Allocations: 4386)


Started GET "/subs/1" for ::1 at 2022-02-18 22:20:55 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.0ms | Allocations: 783)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.5ms | Allocations: 3477)
Completed 200 OK in 41ms (Views: 9.8ms | ActiveRecord: 11.0ms | Allocations: 8961)


Started GET "/posts/2" for ::1 at 2022-02-18 22:20:58 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:25:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 10.3ms | Allocations: 4912)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.7ms | Allocations: 7614)
Completed 200 OK in 49ms (Views: 21.3ms | ActiveRecord: 8.3ms | Allocations: 15058)


Started GET "/posts/2" for ::1 at 2022-02-18 22:22:23 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 37.4ms | Allocations: 14430)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 62.7ms | Allocations: 23647)
Completed 200 OK in 133ms (Views: 40.6ms | ActiveRecord: 52.8ms | Allocations: 45479)


Started GET "/subs" for ::1 at 2022-02-18 22:22:27 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 11.5ms | Allocations: 1103)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 23.1ms | Allocations: 3804)
Completed 200 OK in 26ms (Views: 21.4ms | ActiveRecord: 3.6ms | Allocations: 4295)


Started GET "/subs/2" for ::1 at 2022-02-18 22:22:29 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (3.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (2.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.4ms | Allocations: 1075)
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.9ms | Allocations: 3769)
Completed 200 OK in 52ms (Views: 9.9ms | ActiveRecord: 17.5ms | Allocations: 11581)


Started GET "/posts/1" for ::1 at 2022-02-18 22:22:31 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (4.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 6], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 7], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 8], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 9], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 10], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 11], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 12], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 13], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 14], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 15], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 16], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 17], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 18], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 19], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 20], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 21], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 22], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 23], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:4
  Rendered comments/_comment.html.erb (Duration: 1.7ms | Allocations: 749)
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 429)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.2ms | Allocations: 2920)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | Allocations: 5621)
Completed 200 OK in 155ms (Views: 15.7ms | ActiveRecord: 64.3ms | Allocations: 37971)


Started GET "/comments/1" for ::1 at 2022-02-18 22:22:34 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:8
  Rendered comments/show.html.erb within layouts/application (Duration: 4.9ms | Allocations: 1428)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.0ms | Allocations: 3985)
Completed 200 OK in 22ms (Views: 12.0ms | ActiveRecord: 4.8ms | Allocations: 6511)


Started GET "/subs" for ::1 at 2022-02-18 22:23:16 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 7.9ms | Allocations: 1103)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | Allocations: 3805)
Completed 200 OK in 15ms (Views: 11.6ms | ActiveRecord: 3.4ms | Allocations: 4102)


Started GET "/subs/1" for ::1 at 2022-02-18 22:23:17 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.4ms | Allocations: 782)
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.0ms | Allocations: 3476)
Completed 200 OK in 42ms (Views: 13.1ms | ActiveRecord: 12.0ms | Allocations: 8959)


Started GET "/posts/2" for ::1 at 2022-02-18 22:23:20 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 3.8ms | Allocations: 1218)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 9.9ms | Allocations: 3919)
Completed 200 OK in 24ms (Views: 8.3ms | ActiveRecord: 6.7ms | Allocations: 7059)


Started GET "/" for ::1 at 2022-02-18 22:27:18 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 7.9ms | Allocations: 1099)
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.7ms | Allocations: 3793)
Completed 200 OK in 22ms (Views: 15.6ms | ActiveRecord: 5.1ms | Allocations: 4088)


Started GET "/subs/1" for ::1 at 2022-02-18 22:27:23 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (3.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 4.0ms | Allocations: 781)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | Allocations: 3475)
Completed 200 OK in 55ms (Views: 11.6ms | ActiveRecord: 13.1ms | Allocations: 8959)


Started GET "/subs/1" for ::1 at 2022-02-18 22:27:26 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 1.9ms | Allocations: 780)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 8.2ms | Allocations: 3474)
Completed 200 OK in 35ms (Views: 7.9ms | ActiveRecord: 10.8ms | Allocations: 8957)


Started GET "/posts/2" for ::1 at 2022-02-18 22:27:33 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:4
  Rendered posts/show.html.erb within layouts/application (Duration: 4.1ms | Allocations: 1211)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.4ms | Allocations: 3906)
Completed 200 OK in 29ms (Views: 10.5ms | ActiveRecord: 8.3ms | Allocations: 7046)


Started GET "/posts/2" for ::1 at 2022-02-18 22:46:16 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 22.4ms | Allocations: 13943)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 39.9ms | Allocations: 22574)
Completed 200 OK in 149ms (Views: 39.8ms | ActiveRecord: 69.8ms | Allocations: 46148)


Started POST "/posts/2/upvote" for ::1 at 2022-02-18 22:46:19 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
Completed 500 Internal Server Error in 15ms (ActiveRecord: 3.8ms | Allocations: 2963)



NoMethodError - private method `upvote' called for #<User:0x00007f8bbefc6240>:
  app/controllers/posts_controller.rb:56:in `upvote'

Started POST "/__better_errors/58fcf14f489fe78e/variables" for ::1 at 2022-02-18 22:46:19 +0700
Started POST "/posts/2/upvote" for ::1 at 2022-02-18 22:47:32 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 4], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (1.8ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 4], ["value", 1], ["votable_type", "Post"], ["votable_id", 2], ["created_at", "2022-02-18 15:47:33.291055"], ["updated_at", "2022-02-18 15:47:33.291055"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
No template found for PostsController#upvote, rendering head :no_content
Completed 204 No Content in 102ms (ActiveRecord: 41.9ms | Allocations: 28918)


Started GET "/" for ::1 at 2022-02-18 22:47:39 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 20.1ms | Allocations: 5081)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 33.0ms | Allocations: 7784)
Completed 200 OK in 61ms (Views: 37.2ms | ActiveRecord: 10.9ms | Allocations: 10517)


Started GET "/subs/1" for ::1 at 2022-02-18 22:47:40 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 3.5ms | Allocations: 1312)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.2ms | Allocations: 4013)
Completed 200 OK in 49ms (Views: 10.9ms | ActiveRecord: 13.9ms | Allocations: 16758)


Started GET "/posts/2" for ::1 at 2022-02-18 22:47:42 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 9.4ms | Allocations: 4733)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.2ms | Allocations: 7289)
Completed 200 OK in 45ms (Views: 14.2ms | ActiveRecord: 10.8ms | Allocations: 14766)


Started POST "/posts/2/upvote" for ::1 at 2022-02-18 22:47:43 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 4], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
No template found for PostsController#upvote, rendering head :no_content
Completed 204 No Content in 17ms (ActiveRecord: 5.0ms | Allocations: 2913)


Started POST "/posts/2/downvote" for ::1 at 2022-02-18 22:47:45 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (22.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:60:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 4], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:51:in `downvote'
No template found for PostsController#downvote, rendering head :no_content
Completed 204 No Content in 38ms (ActiveRecord: 24.4ms | Allocations: 4119)


Started GET "/posts/2" for ::1 at 2022-02-18 22:47:48 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (2.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (7.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 6.9ms | Allocations: 1455)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.6ms | Allocations: 4007)
Completed 200 OK in 38ms (Views: 13.6ms | ActiveRecord: 14.5ms | Allocations: 7147)


Started GET "/posts/2" for ::1 at 2022-02-18 22:47:50 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 7.0ms | Allocations: 1455)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.6ms | Allocations: 4006)
Completed 200 OK in 34ms (Views: 12.2ms | ActiveRecord: 8.4ms | Allocations: 7145)


Started POST "/posts/2/downvote" for ::1 at 2022-02-18 22:47:51 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:60:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 4], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:51:in `downvote'
No template found for PostsController#downvote, rendering head :no_content
Completed 204 No Content in 20ms (ActiveRecord: 5.7ms | Allocations: 2915)


Started GET "/posts/2" for ::1 at 2022-02-18 22:47:52 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 4.4ms | Allocations: 1455)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.3ms | Allocations: 4006)
Completed 200 OK in 28ms (Views: 9.8ms | ActiveRecord: 6.4ms | Allocations: 7145)


Started GET "/subs/1" for ::1 at 2022-02-18 22:47:58 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.6ms | Allocations: 780)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.0ms | Allocations: 3475)
Completed 200 OK in 44ms (Views: 10.9ms | ActiveRecord: 11.7ms | Allocations: 8988)


Started GET "/posts/4" for ::1 at 2022-02-18 22:48:00 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 2.4ms | Allocations: 1161)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.5ms | Allocations: 3379)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.0ms | Allocations: 5938)
Completed 200 OK in 157ms (Views: 19.2ms | ActiveRecord: 55.3ms | Allocations: 42697)


Started POST "/posts/4/upvote" for ::1 at 2022-02-18 22:48:01 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 4], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (1.3ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 4], ["value", 1], ["votable_type", "Post"], ["votable_id", 4], ["created_at", "2022-02-18 15:48:01.411848"], ["updated_at", "2022-02-18 15:48:01.411848"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
No template found for PostsController#upvote, rendering head :no_content
Completed 204 No Content in 30ms (ActiveRecord: 10.5ms | Allocations: 6207)


Started GET "/posts/4" for ::1 at 2022-02-18 22:48:04 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.6ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.8ms | Allocations: 2931)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.6ms | Allocations: 5490)
Completed 200 OK in 139ms (Views: 13.2ms | ActiveRecord: 53.2ms | Allocations: 34800)


Started POST "/posts/4/upvote" for ::1 at 2022-02-18 22:48:06 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (11.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (27.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 4], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
No template found for PostsController#upvote, rendering head :no_content
Completed 204 No Content in 142ms (ActiveRecord: 40.1ms | Allocations: 2915)


Started GET "/posts/4" for ::1 at 2022-02-18 22:48:07 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.4ms | Allocations: 843)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.4ms | Allocations: 2933)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.0ms | Allocations: 5492)
Completed 200 OK in 129ms (Views: 12.5ms | ActiveRecord: 48.3ms | Allocations: 34801)


Started POST "/posts/4/downvote" for ::1 at 2022-02-18 22:48:09 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (4.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:60:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 4], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:51:in `downvote'
No template found for PostsController#downvote, rendering head :no_content
Completed 204 No Content in 22ms (ActiveRecord: 7.3ms | Allocations: 2917)


Started GET "/posts/4" for ::1 at 2022-02-18 22:48:10 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (3.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 843)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.1ms | Allocations: 2933)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.9ms | Allocations: 5492)
Completed 200 OK in 158ms (Views: 13.1ms | ActiveRecord: 53.8ms | Allocations: 34802)


Started GET "/posts/4" for ::1 at 2022-02-18 22:48:11 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.7ms | Allocations: 2931)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.9ms | Allocations: 5490)
Completed 200 OK in 140ms (Views: 12.4ms | ActiveRecord: 50.2ms | Allocations: 34800)


Started GET "/posts/4" for ::1 at 2022-02-18 22:48:12 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (5.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.2ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 13.0ms | Allocations: 2931)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.6ms | Allocations: 5490)
Completed 200 OK in 148ms (Views: 13.7ms | ActiveRecord: 60.8ms | Allocations: 34800)


Started GET "/posts/4" for ::1 at 2022-02-18 22:48:26 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (2.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (5.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (6.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 2.4ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.8ms | Allocations: 2931)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.9ms | Allocations: 5490)
Completed 200 OK in 141ms (Views: 14.4ms | ActiveRecord: 57.2ms | Allocations: 34800)


Started GET "/posts/4" for ::1 at 2022-02-18 22:49:58 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.0ms | Allocations: 2931)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.4ms | Allocations: 5490)
Completed 200 OK in 136ms (Views: 13.8ms | ActiveRecord: 49.0ms | Allocations: 34800)


Started POST "/posts/4/downvote" for ::1 at 2022-02-18 22:50:01 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:60:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 4], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:51:in `downvote'
No template found for PostsController#downvote, rendering head :no_content
Completed 204 No Content in 13ms (ActiveRecord: 4.0ms | Allocations: 2917)


Started GET "/subs" for ::1 at 2022-02-18 22:50:05 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 5.2ms | Allocations: 1103)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.7ms | Allocations: 3805)
Completed 200 OK in 14ms (Views: 10.7ms | ActiveRecord: 2.7ms | Allocations: 4102)


Started GET "/subs/1" for ::1 at 2022-02-18 22:50:07 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (8.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (106.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (3.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (3.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 1.9ms | Allocations: 781)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 34.0ms | Allocations: 3475)
Completed 200 OK in 179ms (Views: 9.0ms | ActiveRecord: 152.6ms | Allocations: 9017)


Started DELETE "/session" for ::1 at 2022-02-18 22:50:11 +0700
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "ipyk4cwJS-ihTA"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "stephen"], ["id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Update (42.9ms)[0m  [1m[33mUPDATE "users" SET "session_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["session_token", "NkVzZkpqbConzg"], ["updated_at", "2022-02-18 15:50:11.922589"], ["id", 4]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
Redirected to http://localhost:3000/session/new
Completed 302 Found in 59ms (ActiveRecord: 48.1ms | Allocations: 4587)


Started GET "/session/new" for ::1 at 2022-02-18 22:50:12 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 1.9ms | Allocations: 341)
  Rendered sessions/new.html.erb within layouts/application (Duration: 4.1ms | Allocations: 840)
  Rendered layout layouts/application.html.erb (Duration: 6.9ms | Allocations: 2230)
Completed 200 OK in 11ms (Views: 10.4ms | ActiveRecord: 0.0ms | Allocations: 3043)


Started GET "/users/new" for ::1 at 2022-02-18 22:50:16 +0700
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.5ms | Allocations: 188)
  Rendered users/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 566)
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | Allocations: 1954)
Completed 200 OK in 13ms (Views: 12.8ms | ActiveRecord: 0.0ms | Allocations: 2845)


Started POST "/users" for ::1 at 2022-02-18 22:50:23 +0700
Processing by UsersController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"PV1", "password"=>"[FILTERED]"}, "Create"=>"Submit"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "PV1"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Create (3.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "session_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "PV1"], ["password_digest", "$2a$12$WHD46xoVAOcik8Gw1T3oRuVTpSAUPxg/ZiNu3mI6/aqisOyZQy0SS"], ["session_token", "Fo3luEJuPh1gzQ"], ["created_at", "2022-02-18 15:50:23.670444"], ["updated_at", "2022-02-18 15:50:23.670444"]]
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 297ms (ActiveRecord: 7.2ms | Allocations: 3763)


Started GET "/" for ::1 at 2022-02-18 22:50:23 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 7.1ms | Allocations: 1103)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.7ms | Allocations: 3804)
Completed 200 OK in 18ms (Views: 15.0ms | ActiveRecord: 2.7ms | Allocations: 4101)


Started GET "/subs/1" for ::1 at 2022-02-18 22:50:31 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 1.8ms | Allocations: 780)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.3ms | Allocations: 3474)
Completed 200 OK in 42ms (Views: 9.9ms | ActiveRecord: 10.1ms | Allocations: 9017)


Started GET "/posts/2" for ::1 at 2022-02-18 22:50:32 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (2.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (3.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 8.5ms | Allocations: 1465)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.6ms | Allocations: 4021)
Completed 200 OK in 31ms (Views: 11.9ms | ActiveRecord: 9.2ms | Allocations: 7161)


Started POST "/posts/2/upvote" for ::1 at 2022-02-18 22:50:34 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (4.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (2.3ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["value", 1], ["votable_type", "Post"], ["votable_id", 2], ["created_at", "2022-02-18 15:50:34.125252"], ["updated_at", "2022-02-18 15:50:34.125252"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
No template found for PostsController#upvote, rendering head :no_content
Completed 204 No Content in 31ms (ActiveRecord: 16.8ms | Allocations: 6204)


Started GET "/posts/2" for ::1 at 2022-02-18 22:50:35 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 4.1ms | Allocations: 1454)
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.7ms | Allocations: 4006)
Completed 200 OK in 29ms (Views: 12.1ms | ActiveRecord: 6.8ms | Allocations: 7145)


Started POST "/posts/2/downvote" for ::1 at 2022-02-18 22:50:40 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:60:in `downvote'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:51:in `downvote'
No template found for PostsController#downvote, rendering head :no_content
Completed 204 No Content in 17ms (ActiveRecord: 3.9ms | Allocations: 2914)


Started GET "/posts/2" for ::1 at 2022-02-18 22:50:41 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 4.1ms | Allocations: 1454)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.4ms | Allocations: 4006)
Completed 200 OK in 26ms (Views: 9.5ms | ActiveRecord: 6.8ms | Allocations: 7145)


Started GET "/subs" for ::1 at 2022-02-18 22:50:43 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 8.1ms | Allocations: 1099)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.1ms | Allocations: 3792)
Completed 200 OK in 17ms (Views: 12.8ms | ActiveRecord: 3.6ms | Allocations: 4088)


Started GET "/subs/1" for ::1 at 2022-02-18 22:50:45 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (3.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.4ms | Allocations: 779)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | Allocations: 3473)
Completed 200 OK in 35ms (Views: 10.9ms | ActiveRecord: 11.4ms | Allocations: 9036)


Started GET "/posts/4" for ::1 at 2022-02-18 22:50:47 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.6ms | Allocations: 2925)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | Allocations: 5484)
Completed 200 OK in 142ms (Views: 13.3ms | ActiveRecord: 53.6ms | Allocations: 34794)


Started POST "/posts/4/downvote" for ::1 at 2022-02-18 22:50:48 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:60:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:51:in `downvote'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:53:in `downvote'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:53:in `downvote'
  [1m[36mVote Create (2.1ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["value", -1], ["votable_type", "Post"], ["votable_id", 4], ["created_at", "2022-02-18 15:50:48.583130"], ["updated_at", "2022-02-18 15:50:48.583130"]]
  ↳ app/models/user.rb:53:in `downvote'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:53:in `downvote'
No template found for PostsController#downvote, rendering head :no_content
Completed 204 No Content in 26ms (ActiveRecord: 9.9ms | Allocations: 6206)


Started GET "/posts/4" for ::1 at 2022-02-18 22:50:50 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (7.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.8ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 14.9ms | Allocations: 2931)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 22.2ms | Allocations: 5490)
Completed 200 OK in 145ms (Views: 14.0ms | ActiveRecord: 56.4ms | Allocations: 34800)


Started GET "/posts/4" for ::1 at 2022-02-18 22:51:11 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.3ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.2ms | Allocations: 2931)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.9ms | Allocations: 5490)
Completed 200 OK in 135ms (Views: 14.6ms | ActiveRecord: 47.1ms | Allocations: 34800)


Started POST "/posts/4/upvote" for ::1 at 2022-02-18 22:51:18 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
No template found for PostsController#upvote, rendering head :no_content
Completed 204 No Content in 17ms (ActiveRecord: 3.7ms | Allocations: 2917)


Started GET "/comments/24" for ::1 at 2022-02-18 22:51:23 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"24"}
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 5.3ms | Allocations: 1605)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.6ms | Allocations: 4161)
Completed 200 OK in 23ms (Views: 12.6ms | ActiveRecord: 5.0ms | Allocations: 6686)


Started POST "/comments/24/upvote" for ::1 at 2022-02-18 22:51:24 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"24"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 24], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (1.2ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["value", 1], ["votable_type", "Comment"], ["votable_id", 24], ["created_at", "2022-02-18 15:51:24.685664"], ["updated_at", "2022-02-18 15:51:24.685664"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (42.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
No template found for CommentsController#upvote, rendering head :no_content
Completed 204 No Content in 80ms (ActiveRecord: 52.4ms | Allocations: 6788)


Started GET "/comments/24" for ::1 at 2022-02-18 22:51:26 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"24"}
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 3.7ms | Allocations: 1158)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.4ms | Allocations: 3710)
Completed 200 OK in 21ms (Views: 11.7ms | ActiveRecord: 4.5ms | Allocations: 5551)


Started POST "/comments/24/downvote" for ::1 at 2022-02-18 22:51:27 +0700
Processing by CommentsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"24"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (3.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:46:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 24], ["LIMIT", 1]]
  ↳ app/models/user.rb:51:in `downvote'
No template found for CommentsController#downvote, rendering head :no_content
Completed 204 No Content in 17ms (ActiveRecord: 5.1ms | Allocations: 3498)


Started GET "/comments/24" for ::1 at 2022-02-18 22:51:28 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"24"}
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.9ms | Allocations: 1158)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.6ms | Allocations: 3709)
Completed 200 OK in 18ms (Views: 9.0ms | ActiveRecord: 4.5ms | Allocations: 5548)


Started GET "/subs" for ::1 at 2022-02-18 22:52:42 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 16.9ms | Allocations: 5186)
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 52.7ms | Allocations: 14401)
Completed 200 OK in 59ms (Views: 28.9ms | ActiveRecord: 24.8ms | Allocations: 16909)


Started GET "/subs/2" for ::1 at 2022-02-18 22:52:44 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 3.8ms | Allocations: 1076)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.0ms | Allocations: 3770)
Completed 200 OK in 97ms (Views: 10.8ms | ActiveRecord: 27.2ms | Allocations: 29077)


Started GET "/posts/4" for ::1 at 2022-02-18 22:52:45 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 2.9ms | Allocations: 844)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 1.0ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 17.7ms | Allocations: 6209)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 27.8ms | Allocations: 8768)
Completed 200 OK in 216ms (Views: 25.8ms | ActiveRecord: 63.2ms | Allocations: 49872)


Started POST "/posts/4/upvote" for ::1 at 2022-02-18 22:52:47 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 13ms (ActiveRecord: 3.7ms | Allocations: 2900)


Started GET "/posts/4" for ::1 at 2022-02-18 22:52:47 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (3.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (4.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (5.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 2.1ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.1ms | Allocations: 2934)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.6ms | Allocations: 5493)
Completed 200 OK in 152ms (Views: 15.2ms | ActiveRecord: 64.4ms | Allocations: 34823)


Started POST "/posts/4/upvote" for ::1 at 2022-02-18 22:52:48 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (3.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 14ms (ActiveRecord: 5.2ms | Allocations: 2897)


Started GET "/posts/4" for ::1 at 2022-02-18 22:52:48 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (4.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (5.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (4.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.0ms | Allocations: 2934)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.7ms | Allocations: 5492)
Completed 200 OK in 168ms (Views: 13.4ms | ActiveRecord: 78.4ms | Allocations: 34822)


Started POST "/posts/4/upvote" for ::1 at 2022-02-18 22:52:49 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 15ms (ActiveRecord: 4.0ms | Allocations: 2897)


Started GET "/posts/4" for ::1 at 2022-02-18 22:52:49 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (5.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (3.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.3ms | Allocations: 842)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.0ms | Allocations: 2935)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.0ms | Allocations: 5494)
Completed 200 OK in 135ms (Views: 13.4ms | ActiveRecord: 56.2ms | Allocations: 34825)


Started POST "/posts/4/upvote" for ::1 at 2022-02-18 22:52:50 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (37.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 51ms (ActiveRecord: 40.4ms | Allocations: 2897)


Started GET "/posts/4" for ::1 at 2022-02-18 22:52:50 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (4.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.4ms | Allocations: 842)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 1.2ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 1.0ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.7ms | Allocations: 2935)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.4ms | Allocations: 5494)
Completed 200 OK in 181ms (Views: 19.6ms | ActiveRecord: 68.1ms | Allocations: 34824)


Started POST "/posts/4/downvote" for ::1 at 2022-02-18 22:52:51 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:51:in `downvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 14ms (ActiveRecord: 3.6ms | Allocations: 2895)


Started GET "/posts/4" for ::1 at 2022-02-18 22:52:51 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.4ms | Allocations: 842)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.1ms | Allocations: 2935)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.3ms | Allocations: 5494)
Completed 200 OK in 143ms (Views: 17.1ms | ActiveRecord: 48.4ms | Allocations: 34824)


  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" ORDER BY "votes"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVote Load (0.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" ORDER BY "votes"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/posts/4/upvote" for ::1 at 2022-02-18 22:57:14 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mVote Update (1.3ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 0], ["updated_at", "2022-02-18 15:57:14.522496"], ["id", 7]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:47:in `upvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 79ms (ActiveRecord: 33.3ms | Allocations: 28531)


Started GET "/posts/4" for ::1 at 2022-02-18 22:57:14 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (5.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.7ms | Allocations: 843)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 36.1ms | Allocations: 16154)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 44.6ms | Allocations: 18713)
Completed 200 OK in 195ms (Views: 33.4ms | ActiveRecord: 75.3ms | Allocations: 60828)


Started POST "/posts/4/upvote" for ::1 at 2022-02-18 22:57:16 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mVote Update (1.2ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 1], ["updated_at", "2022-02-18 15:57:16.099617"], ["id", 7]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:47:in `upvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 33ms (ActiveRecord: 12.9ms | Allocations: 7060)


Started GET "/posts/4" for ::1 at 2022-02-18 22:57:16 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.4ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.3ms | Allocations: 2933)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.1ms | Allocations: 5491)
Completed 200 OK in 135ms (Views: 13.8ms | ActiveRecord: 50.3ms | Allocations: 34821)


Started POST "/posts/4/upvote" for ::1 at 2022-02-18 22:57:17 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 16ms (ActiveRecord: 4.1ms | Allocations: 2895)


Started GET "/posts/4" for ::1 at 2022-02-18 22:57:17 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (5.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.5ms | Allocations: 2933)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.0ms | Allocations: 5492)
Completed 200 OK in 143ms (Views: 16.4ms | ActiveRecord: 54.4ms | Allocations: 34823)


Started POST "/posts/4/upvote" for ::1 at 2022-02-18 22:57:18 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 17ms (ActiveRecord: 4.0ms | Allocations: 2895)


Started GET "/posts/4" for ::1 at 2022-02-18 22:57:18 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (10.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (25.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (48.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 2.0ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.3ms | Allocations: 2933)
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.2ms | Allocations: 5491)
Completed 200 OK in 256ms (Views: 17.1ms | ActiveRecord: 148.2ms | Allocations: 34821)


Started POST "/posts/4/downvote" for ::1 at 2022-02-18 22:57:19 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (3.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:55:in `downvote'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:61:in `downvote'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:61:in `downvote'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:61:in `downvote'
  [1m[36mVote Update (2.5ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 0], ["updated_at", "2022-02-18 15:57:19.791466"], ["id", 7]]
  ↳ app/models/user.rb:61:in `downvote'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:61:in `downvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 43ms (ActiveRecord: 15.3ms | Allocations: 7060)


Started GET "/posts/4" for ::1 at 2022-02-18 22:57:19 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (3.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (3.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.3ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.7ms | Allocations: 2933)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.0ms | Allocations: 5492)
Completed 200 OK in 154ms (Views: 18.6ms | ActiveRecord: 56.0ms | Allocations: 34822)


Started POST "/posts/4/downvote" for ::1 at 2022-02-18 22:57:20 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:55:in `downvote'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:61:in `downvote'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:61:in `downvote'
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:61:in `downvote'
  [1m[36mVote Update (1.3ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", -1], ["updated_at", "2022-02-18 15:57:20.680981"], ["id", 7]]
  ↳ app/models/user.rb:61:in `downvote'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:61:in `downvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 32ms (ActiveRecord: 11.8ms | Allocations: 7061)


Started GET "/posts/4" for ::1 at 2022-02-18 22:57:20 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.4ms | Allocations: 2934)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.1ms | Allocations: 5493)
Completed 200 OK in 145ms (Views: 17.1ms | ActiveRecord: 49.2ms | Allocations: 34823)


Started POST "/posts/4/downvote" for ::1 at 2022-02-18 22:57:21 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:55:in `downvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 12ms (ActiveRecord: 3.4ms | Allocations: 2895)


Started GET "/posts/4" for ::1 at 2022-02-18 22:57:21 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (19.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 16.5ms | Allocations: 2934)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 25.2ms | Allocations: 5493)
Completed 200 OK in 170ms (Views: 24.1ms | ActiveRecord: 70.1ms | Allocations: 34823)


Started POST "/posts/4/downvote" for ::1 at 2022-02-18 22:57:22 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:55:in `downvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 17ms (ActiveRecord: 5.9ms | Allocations: 2895)


Started GET "/posts/4" for ::1 at 2022-02-18 22:57:22 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.7ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.3ms | Allocations: 2934)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.8ms | Allocations: 5493)
Completed 200 OK in 142ms (Views: 14.1ms | ActiveRecord: 52.1ms | Allocations: 34823)


Started POST "/posts/4/downvote" for ::1 at 2022-02-18 22:57:23 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:55:in `downvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 17ms (ActiveRecord: 4.4ms | Allocations: 2895)


Started GET "/posts/4" for ::1 at 2022-02-18 22:57:23 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 2.2ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.8ms | Allocations: 2934)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 22.9ms | Allocations: 5493)
Completed 200 OK in 198ms (Views: 20.6ms | ActiveRecord: 62.1ms | Allocations: 34822)


Started POST "/posts/4/downvote" for ::1 at 2022-02-18 22:57:25 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:55:in `downvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 18ms (ActiveRecord: 4.2ms | Allocations: 2895)


Started GET "/posts/4" for ::1 at 2022-02-18 22:57:25 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.4ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.1ms | Allocations: 2934)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.3ms | Allocations: 5494)
Completed 200 OK in 135ms (Views: 13.9ms | ActiveRecord: 52.9ms | Allocations: 34824)


Started POST "/posts/4/upvote" for ::1 at 2022-02-18 22:57:27 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mVote Update (1.2ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 0], ["updated_at", "2022-02-18 15:57:27.772356"], ["id", 7]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:47:in `upvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 32ms (ActiveRecord: 13.2ms | Allocations: 7060)


Started GET "/posts/4" for ::1 at 2022-02-18 22:57:27 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.4ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.3ms | Allocations: 2933)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.9ms | Allocations: 5492)
Completed 200 OK in 137ms (Views: 14.7ms | ActiveRecord: 51.5ms | Allocations: 34822)


Started POST "/posts/4/downvote" for ::1 at 2022-02-18 22:57:28 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:55:in `downvote'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:61:in `downvote'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:61:in `downvote'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:61:in `downvote'
  [1m[36mVote Update (1.3ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", -1], ["updated_at", "2022-02-18 15:57:28.920424"], ["id", 7]]
  ↳ app/models/user.rb:61:in `downvote'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:61:in `downvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 36ms (ActiveRecord: 12.3ms | Allocations: 7060)


Started GET "/posts/4" for ::1 at 2022-02-18 22:57:28 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (7.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.3ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.3ms | Allocations: 2934)
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.2ms | Allocations: 5494)
Completed 200 OK in 141ms (Views: 13.1ms | ActiveRecord: 56.4ms | Allocations: 34824)


Started POST "/posts/4/downvote" for ::1 at 2022-02-18 22:57:30 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:55:in `downvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 14ms (ActiveRecord: 5.2ms | Allocations: 2895)


Started GET "/posts/4" for ::1 at 2022-02-18 22:57:30 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.3ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.6ms | Allocations: 2934)
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.0ms | Allocations: 5492)
Completed 200 OK in 136ms (Views: 15.0ms | ActiveRecord: 50.2ms | Allocations: 34821)


Started GET "/comments/27" for ::1 at 2022-02-18 22:58:27 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 23.1ms | Allocations: 10454)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 47.3ms | Allocations: 19531)
Completed 200 OK in 94ms (Views: 30.1ms | ActiveRecord: 38.2ms | Allocations: 34882)


Started POST "/comments/27/upvote" for ::1 at 2022-02-18 22:58:28 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"27"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 27], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (2.8ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["value", 1], ["votable_type", "Comment"], ["votable_id", 27], ["created_at", "2022-02-18 15:58:28.921375"], ["updated_at", "2022-02-18 15:58:28.921375"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
No template found for CommentsController#upvote, rendering head :no_content
Completed 204 No Content in 28ms (ActiveRecord: 9.9ms | Allocations: 8018)


Started POST "/comments/27/upvote" for ::1 at 2022-02-18 22:58:30 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"27"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 27], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
No template found for CommentsController#upvote, rendering head :no_content
Completed 204 No Content in 19ms (ActiveRecord: 4.4ms | Allocations: 2912)


Started GET "/comments/27" for ::1 at 2022-02-18 22:58:32 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 3.9ms | Allocations: 1158)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 9.6ms | Allocations: 3709)
Completed 200 OK in 20ms (Views: 7.9ms | ActiveRecord: 6.1ms | Allocations: 5548)


Started POST "/comments/27/upvote" for ::1 at 2022-02-18 22:58:33 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"27"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 27], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
No template found for CommentsController#upvote, rendering head :no_content
Completed 204 No Content in 13ms (ActiveRecord: 3.7ms | Allocations: 2912)


Started GET "/comments/27" for ::1 at 2022-02-18 22:58:34 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 3.3ms | Allocations: 1158)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 9.9ms | Allocations: 3709)
Completed 200 OK in 24ms (Views: 8.6ms | ActiveRecord: 5.3ms | Allocations: 5548)


Started POST "/comments/27/downvote" for ::1 at 2022-02-18 22:58:35 +0700
Processing by CommentsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"27"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (2.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:46:in `downvote'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (3.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 27], ["LIMIT", 1]]
  ↳ app/models/user.rb:54:in `downvote'
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mVote Update (1.4ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 0], ["updated_at", "2022-02-18 15:58:35.918944"], ["id", 9]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:60:in `downvote'
No template found for CommentsController#downvote, rendering head :no_content
Completed 204 No Content in 37ms (ActiveRecord: 15.2ms | Allocations: 7241)


Started GET "/comments/27" for ::1 at 2022-02-18 22:58:36 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 3.6ms | Allocations: 1159)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.8ms | Allocations: 3710)
Completed 200 OK in 22ms (Views: 9.7ms | ActiveRecord: 5.0ms | Allocations: 5549)


Started POST "/comments/27/downvote" for ::1 at 2022-02-18 22:58:38 +0700
Processing by CommentsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"27"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (3.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:46:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 27], ["LIMIT", 1]]
  ↳ app/models/user.rb:54:in `downvote'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mVote Update (1.4ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", -1], ["updated_at", "2022-02-18 15:58:38.300563"], ["id", 9]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:60:in `downvote'
No template found for CommentsController#downvote, rendering head :no_content
Completed 204 No Content in 39ms (ActiveRecord: 15.3ms | Allocations: 7075)


Started GET "/comments/27" for ::1 at 2022-02-18 22:58:39 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mComment Load (0.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 3.9ms | Allocations: 1158)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.9ms | Allocations: 3710)
Completed 200 OK in 19ms (Views: 10.3ms | ActiveRecord: 4.3ms | Allocations: 5549)


Started POST "/comments/27/downvote" for ::1 at 2022-02-18 22:58:40 +0700
Processing by CommentsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"27"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (69.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:46:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (5.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 27], ["LIMIT", 1]]
  ↳ app/models/user.rb:54:in `downvote'
No template found for CommentsController#downvote, rendering head :no_content
Completed 204 No Content in 152ms (ActiveRecord: 75.4ms | Allocations: 2912)


Started GET "/comments/27" for ::1 at 2022-02-18 22:58:41 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 5.2ms | Allocations: 1158)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.5ms | Allocations: 3709)
Completed 200 OK in 22ms (Views: 9.8ms | ActiveRecord: 5.8ms | Allocations: 5548)


Started GET "/comments/27" for ::1 at 2022-02-18 22:59:32 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 24.3ms | Allocations: 10451)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 52.3ms | Allocations: 19528)
Completed 200 OK in 99ms (Views: 34.1ms | ActiveRecord: 38.3ms | Allocations: 34836)


Started POST "/comments/27/upvote" for ::1 at 2022-02-18 22:59:33 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"27"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 27], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mVote Update (1.3ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 0], ["updated_at", "2022-02-18 15:59:34.024088"], ["id", 9]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:47:in `upvote'
Redirected to http://localhost:3000/comments/27
Completed 302 Found in 39ms (ActiveRecord: 11.9ms | Allocations: 9021)


Started GET "/comments/27" for ::1 at 2022-02-18 22:59:34 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.4ms | Allocations: 1159)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.6ms | Allocations: 3711)
Completed 200 OK in 21ms (Views: 10.9ms | ActiveRecord: 4.3ms | Allocations: 5550)


Started POST "/comments/27/upvote" for ::1 at 2022-02-18 22:59:34 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"27"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (3.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 27], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mVote Update (1.2ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 1], ["updated_at", "2022-02-18 15:59:34.824462"], ["id", 9]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:47:in `upvote'
Redirected to http://localhost:3000/comments/27
Completed 302 Found in 36ms (ActiveRecord: 14.2ms | Allocations: 7056)


Started GET "/comments/27" for ::1 at 2022-02-18 22:59:34 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (3.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.2ms | Allocations: 1158)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | Allocations: 3710)
Completed 200 OK in 26ms (Views: 12.7ms | ActiveRecord: 6.4ms | Allocations: 5550)


Started POST "/comments/27/upvote" for ::1 at 2022-02-18 22:59:35 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"27"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (5.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 27], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/comments/27
Completed 302 Found in 26ms (ActiveRecord: 9.0ms | Allocations: 2893)


Started GET "/comments/27" for ::1 at 2022-02-18 22:59:35 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (2.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 8.6ms | Allocations: 1158)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | Allocations: 3709)
Completed 200 OK in 30ms (Views: 15.3ms | ActiveRecord: 6.2ms | Allocations: 5548)


Started GET "/subs" for ::1 at 2022-02-18 22:59:36 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 24.4ms | Allocations: 4957)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 35.6ms | Allocations: 7657)
Completed 200 OK in 48ms (Views: 26.5ms | ActiveRecord: 11.2ms | Allocations: 10001)


Started GET "/subs/2" for ::1 at 2022-02-18 22:59:39 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mSub Load (0.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.5ms | Allocations: 1075)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 9.6ms | Allocations: 3769)
Completed 200 OK in 55ms (Views: 9.4ms | ActiveRecord: 12.2ms | Allocations: 16410)


Started GET "/posts/4" for ::1 at 2022-02-18 22:59:41 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (2.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 2.0ms | Allocations: 840)
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 15.6ms | Allocations: 6206)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 23.2ms | Allocations: 8765)
Completed 200 OK in 146ms (Views: 22.3ms | ActiveRecord: 47.9ms | Allocations: 40704)


Started POST "/posts/4/upvote" for ::1 at 2022-02-18 22:59:42 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mVote Update (1.3ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 0], ["updated_at", "2022-02-18 15:59:42.996100"], ["id", 7]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:47:in `upvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 34ms (ActiveRecord: 10.0ms | Allocations: 7227)


Started GET "/posts/4" for ::1 at 2022-02-18 22:59:43 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (4.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.3ms | Allocations: 840)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.5ms | Allocations: 2932)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.5ms | Allocations: 5491)
Completed 200 OK in 149ms (Views: 12.9ms | ActiveRecord: 53.9ms | Allocations: 34841)


Started GET "/comments/24" for ::1 at 2022-02-18 22:59:45 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"24"}
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (2.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 9.4ms | Allocations: 1166)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.3ms | Allocations: 3723)
Completed 200 OK in 26ms (Views: 15.0ms | ActiveRecord: 5.9ms | Allocations: 5564)


Started POST "/comments/24/upvote" for ::1 at 2022-02-18 22:59:46 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"24"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 24], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/comments/24
Completed 302 Found in 16ms (ActiveRecord: 2.8ms | Allocations: 2893)


Started GET "/comments/24" for ::1 at 2022-02-18 22:59:46 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"24"}
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 3.6ms | Allocations: 1158)
  [1m[36mUser Load (76.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 89.1ms | Allocations: 3710)
Completed 200 OK in 99ms (Views: 12.4ms | ActiveRecord: 80.6ms | Allocations: 5549)


Started POST "/comments/24/downvote" for ::1 at 2022-02-18 22:59:51 +0700
Processing by CommentsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"24"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:47:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 24], ["LIMIT", 1]]
  ↳ app/models/user.rb:54:in `downvote'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mVote Update (1.8ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 0], ["updated_at", "2022-02-18 15:59:51.571438"], ["id", 8]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:60:in `downvote'
Redirected to http://localhost:3000/comments/24
Completed 302 Found in 30ms (ActiveRecord: 10.0ms | Allocations: 7056)


Started GET "/comments/24" for ::1 at 2022-02-18 22:59:51 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"24"}
  [1m[36mComment Load (0.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 3.4ms | Allocations: 1159)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.5ms | Allocations: 3710)
Completed 200 OK in 18ms (Views: 9.7ms | ActiveRecord: 4.5ms | Allocations: 5549)


Started GET "/subs" for ::1 at 2022-02-18 22:59:56 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 9.2ms | Allocations: 1103)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.7ms | Allocations: 3804)
Completed 200 OK in 18ms (Views: 14.9ms | ActiveRecord: 2.9ms | Allocations: 4101)


Started GET "/subs/5" for ::1 at 2022-02-18 22:59:57 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 5]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 5]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 1.6ms | Allocations: 666)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 8.8ms | Allocations: 3359)
Completed 200 OK in 19ms (Views: 9.1ms | ActiveRecord: 3.6ms | Allocations: 5352)


Started GET "/subs" for ::1 at 2022-02-18 23:00:01 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 7.8ms | Allocations: 1099)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.7ms | Allocations: 3792)
Completed 200 OK in 16ms (Views: 12.7ms | ActiveRecord: 2.4ms | Allocations: 4087)


Started GET "/subs/1" for ::1 at 2022-02-18 23:00:02 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (0.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.6ms | Allocations: 779)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.5ms | Allocations: 3473)
Completed 200 OK in 40ms (Views: 13.3ms | ActiveRecord: 10.8ms | Allocations: 9056)


Started GET "/posts/4" for ::1 at 2022-02-18 23:00:05 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.4ms | Allocations: 841)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.4ms | Allocations: 2933)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.4ms | Allocations: 5492)
Completed 200 OK in 133ms (Views: 13.0ms | ActiveRecord: 49.5ms | Allocations: 34842)


Started GET "/comments/48" for ::1 at 2022-02-18 23:00:15 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"48"}
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 3.6ms | Allocations: 1167)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.8ms | Allocations: 3723)
Completed 200 OK in 22ms (Views: 10.1ms | ActiveRecord: 4.5ms | Allocations: 5563)


Started POST "/comments/48/upvote" for ::1 at 2022-02-18 23:00:16 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"48"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 48], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (2.9ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["value", 1], ["votable_type", "Comment"], ["votable_id", 48], ["created_at", "2022-02-18 16:00:16.589144"], ["updated_at", "2022-02-18 16:00:16.589144"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/comments/48
Completed 302 Found in 30ms (ActiveRecord: 10.0ms | Allocations: 6191)


Started GET "/comments/48" for ::1 at 2022-02-18 23:00:16 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"48"}
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:14:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.1ms | Allocations: 1158)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.5ms | Allocations: 3710)
Completed 200 OK in 21ms (Views: 9.7ms | ActiveRecord: 5.3ms | Allocations: 5550)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 23:00:21 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"48", "post_id"=>"4", "content"=>"good thouth"}, "reply"=>"true"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (1.5ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "good thouth"], ["user_id", 5], ["post_id", 4], ["parent_id", 48], ["created_at", "2022-02-18 16:00:21.781580"], ["updated_at", "2022-02-18 16:00:21.781580"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 25ms (ActiveRecord: 9.5ms | Allocations: 4700)


Started GET "/posts/4" for ::1 at 2022-02-18 23:00:21 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 4], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51], ["votable_id", 52]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (4.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 52], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (3.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.3ms | Allocations: 874)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.1ms | Allocations: 2967)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.1ms | Allocations: 5526)
Completed 200 OK in 145ms (Views: 13.2ms | ActiveRecord: 57.9ms | Allocations: 35797)


Started POST "/posts/4/upvote" for ::1 at 2022-02-18 23:00:28 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mVote Update (1.4ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 1], ["updated_at", "2022-02-18 16:00:28.603259"], ["id", 7]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:47:in `upvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 35ms (ActiveRecord: 12.8ms | Allocations: 7061)


Started GET "/posts/4" for ::1 at 2022-02-18 23:00:28 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 4], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51], ["votable_id", 52]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (4.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (10.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (22.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (6.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (4.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (4.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (22.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 52], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 3.7ms | Allocations: 874)
  Rendered comments/_comment.html.erb (Duration: 1.1ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 17.0ms | Allocations: 2967)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 23.6ms | Allocations: 5526)
Completed 200 OK in 277ms (Views: 20.6ms | ActiveRecord: 131.9ms | Allocations: 35798)


Started POST "/posts/4/upvote" for ::1 at 2022-02-18 23:00:31 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 13ms (ActiveRecord: 3.6ms | Allocations: 2896)


Started GET "/posts/4" for ::1 at 2022-02-18 23:00:31 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 4], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51], ["votable_id", 52]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 26], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 27], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 28], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 29], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 30], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 31], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 32], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 33], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 34], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 35], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 36], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 37], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 38], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 39], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 40], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 41], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 42], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 43], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 44], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 45], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 46], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 47], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 48], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 49], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 50], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 51], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 52], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 874)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.7ms | Allocations: 2967)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.0ms | Allocations: 5526)
Completed 200 OK in 156ms (Views: 13.3ms | ActiveRecord: 68.8ms | Allocations: 35797)


Started GET "/subs" for ::1 at 2022-02-18 23:00:33 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 6.1ms | Allocations: 1103)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.7ms | Allocations: 3804)
Completed 200 OK in 15ms (Views: 11.9ms | ActiveRecord: 2.5ms | Allocations: 4100)


Started GET "/subs/4" for ::1 at 2022-02-18 23:00:35 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mSub Load (0.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (3.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Post"], ["votable_id", 3], ["votable_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/sub.rb:12:in `block in vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 4]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.1ms | Allocations: 745)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.9ms | Allocations: 3439)
Completed 200 OK in 31ms (Views: 10.4ms | ActiveRecord: 8.9ms | Allocations: 8104)


Started GET "/posts/1" for ::1 at 2022-02-18 23:01:03 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 6], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 7], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 8], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 9], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 10], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 11], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 12], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 13], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 14], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 15], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 16], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 17], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 18], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 19], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 20], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 21], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 22], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 23], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 429)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.6ms | Allocations: 2718)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.8ms | Allocations: 5277)
Completed 200 OK in 112ms (Views: 13.4ms | ActiveRecord: 41.4ms | Allocations: 30237)


Started GET "/posts/1" for ::1 at 2022-02-18 23:01:33 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23]]
  ↳ app/models/post.rb:26:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 6], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 7], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 8], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 9], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 10], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 11], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 12], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 13], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 14], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 15], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 16], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 17], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 18], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 19], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 20], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 21], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 22], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 23], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:27:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:18:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 429)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 6.6ms | Allocations: 2718)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.4ms | Allocations: 5277)
Completed 200 OK in 124ms (Views: 12.9ms | ActiveRecord: 44.7ms | Allocations: 30240)


Started GET "/posts/1" for ::1 at 2022-02-18 23:06:56 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:27:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23]]
  ↳ app/models/post.rb:27:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 6], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 7], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 8], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 9], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 10], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 11], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 12], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 13], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 14], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 15], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 16], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 17], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 18], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 19], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 20], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 21], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 22], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 23], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:19:in `my_vote'
Completed 500 Internal Server Error in 175ms (ActiveRecord: 68.7ms | Allocations: 57954)



ActiveRecord::AssociationNotFoundError - Association named 'value' was not found on Vote; perhaps you misspelled it?:
  app/models/post.rb:19:in `my_vote'
  app/controllers/posts_controller.rb:7:in `show'

Started POST "/__better_errors/6305025dea333700/variables" for ::1 at 2022-02-18 23:06:57 +0700
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 1], ["votable_type", "Post"], ["LIMIT", 11]]
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mCACHE Vote Load (0.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 1], ["votable_type", "Post"], ["LIMIT", 11]]
  [1m[36mCACHE Vote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 1], ["votable_type", "Post"], ["LIMIT", 11]]
Started GET "/posts/1" for ::1 at 2022-02-18 23:07:18 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (2.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:27:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23]]
  ↳ app/models/post.rb:27:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 6], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (7.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 7], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 8], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 9], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 10], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 11], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (8.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 12], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 13], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 14], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 15], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 16], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 17], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 18], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 19], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 20], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 21], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 22], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 23], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:19:in `my_vote'
Completed 500 Internal Server Error in 233ms (ActiveRecord: 98.5ms | Allocations: 57949)



ActiveRecord::AssociationNotFoundError - Association named 'value' was not found on Vote; perhaps you misspelled it?:
  app/models/post.rb:19:in `my_vote'
  app/controllers/posts_controller.rb:7:in `show'

Started POST "/__better_errors/0ed8b313bef83f61/variables" for ::1 at 2022-02-18 23:07:19 +0700
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 1], ["votable_type", "Post"], ["LIMIT", 11]]
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mCACHE Comment Load (0.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mCACHE Vote Load (0.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 1], ["votable_type", "Post"], ["LIMIT", 11]]
  [1m[36mCACHE Vote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 1], ["votable_type", "Post"], ["LIMIT", 11]]
Started GET "/posts/1" for ::1 at 2022-02-18 23:08:57 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:27:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23]]
  ↳ app/models/post.rb:27:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 6], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 7], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 8], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 9], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 10], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 11], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 12], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 13], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (4.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 14], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 15], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 16], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 17], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 18], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 19], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 20], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 21], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 22], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 23], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:19:in `my_vote'
Completed 500 Internal Server Error in 184ms (ActiveRecord: 75.0ms | Allocations: 57976)



ActiveRecord::AssociationNotFoundError - Association named 'value' was not found on Vote; perhaps you misspelled it?:
  app/models/post.rb:19:in `my_vote'
  app/controllers/posts_controller.rb:7:in `show'

Started POST "/__better_errors/b74b6642c1bc65bc/variables" for ::1 at 2022-02-18 23:08:58 +0700
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 1], ["votable_type", "Post"], ["LIMIT", 11]]
  [1m[36mComment Load (5.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mCACHE Vote Load (0.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 1], ["votable_type", "Post"], ["LIMIT", 11]]
  [1m[36mCACHE Vote Load (0.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 1], ["votable_type", "Post"], ["LIMIT", 11]]
Started GET "/posts/1" for ::1 at 2022-02-18 23:10:19 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:27:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23]]
  ↳ app/models/post.rb:27:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 6], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 7], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 8], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 9], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 10], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 11], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 12], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 13], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 14], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 15], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 16], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 17], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 18], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 19], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 20], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 21], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 22], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 23], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:19:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 432)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 429)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 35.7ms | Allocations: 15944)
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 47.7ms | Allocations: 18605)
Completed 200 OK in 252ms (Views: 36.5ms | ActiveRecord: 100.6ms | Allocations: 75897)


Started GET "/posts/1" for ::1 at 2022-02-18 23:10:26 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:27:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23]]
  ↳ app/models/post.rb:27:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 6], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 7], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 8], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 9], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 10], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 11], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 12], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 13], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (3.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 14], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 15], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 16], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 17], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 18], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 19], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 20], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 21], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 22], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 23], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:19:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 429)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.5ms | Allocations: 2718)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.4ms | Allocations: 5276)
Completed 200 OK in 127ms (Views: 13.2ms | ActiveRecord: 49.9ms | Allocations: 30266)


Started GET "/posts/1" for ::1 at 2022-02-18 23:10:28 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (3.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:27:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23]]
  ↳ app/models/post.rb:27:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 6], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 7], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 8], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 9], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 10], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 11], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 12], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 13], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 14], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 15], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 16], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 17], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 18], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 19], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 20], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 21], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 22], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 23], ["votable_type", "Comment"]]
  ↳ app/models/post.rb:28:in `block in vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:19:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.3ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 1.1ms | Allocations: 429)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.2ms | Allocations: 2718)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.5ms | Allocations: 5277)
Completed 200 OK in 124ms (Views: 16.8ms | ActiveRecord: 45.0ms | Allocations: 30272)


Started GET "/subs/1" for ::1 at 2022-02-18 23:10:30 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (0.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
Completed 500 Internal Server Error in 19ms (ActiveRecord: 3.8ms | Allocations: 6359)



ActiveRecord::AssociationNotFoundError - Association named 'value' was not found on Vote; perhaps you misspelled it?:
  app/models/sub.rb:10:in `vote_of_post_by_sub'
  app/controllers/subs_controller.rb:9:in `show'

Started POST "/__better_errors/ddf66d67c3072998/variables" for ::1 at 2022-02-18 23:10:30 +0700
  [1m[36mPost Load (5.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["sub_id", 1], ["LIMIT", 11]]
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["sub_id", 1], ["LIMIT", 11]]
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["sub_id", 1], ["LIMIT", 11]]
Started GET "/" for ::1 at 2022-02-18 23:11:20 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 16.8ms | Allocations: 1102)
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 31.9ms | Allocations: 3807)
Completed 200 OK in 38ms (Views: 33.7ms | ActiveRecord: 3.5ms | Allocations: 4249)


Started GET "/subs/1" for ::1 at 2022-02-18 23:11:22 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (4.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
Completed 500 Internal Server Error in 17ms (ActiveRecord: 6.6ms | Allocations: 4088)



ActiveRecord::AssociationNotFoundError - Association named 'value' was not found on Vote; perhaps you misspelled it?:
  app/models/sub.rb:10:in `vote_of_post_by_sub'
  app/controllers/subs_controller.rb:9:in `show'

Started POST "/__better_errors/6b5c0c56d6607aeb/variables" for ::1 at 2022-02-18 23:11:22 +0700
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["sub_id", 1], ["LIMIT", 11]]
  [1m[36mVote Load (2.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["sub_id", 1], ["LIMIT", 11]]
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["sub_id", 1], ["LIMIT", 11]]
Started GET "/posts/4" for ::1 at 2022-02-18 23:11:31 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 4], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:27:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51], ["votable_id", 52]]
  ↳ app/models/post.rb:27:in `vote_of_comment_by_post'
Completed 500 Internal Server Error in 35ms (ActiveRecord: 8.6ms | Allocations: 6583)



ActiveRecord::AssociationNotFoundError - Association named 'value' was not found on Vote; perhaps you misspelled it?:
  app/models/post.rb:27:in `vote_of_comment_by_post'
  app/controllers/posts_controller.rb:6:in `show'

Started POST "/__better_errors/978955859da600f3/variables" for ::1 at 2022-02-18 23:11:32 +0700
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 4], ["LIMIT", 11]]
  [1m[36mVote Load (3.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34]]
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 4], ["LIMIT", 11]]
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 4], ["LIMIT", 11]]
Started GET "/posts/4" for ::1 at 2022-02-18 23:18:10 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 4], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51], ["votable_id", 52]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
Completed 500 Internal Server Error in 131ms (ActiveRecord: 23.3ms | Allocations: 39579)



NameError - undefined local variable or method `cal' for #<Post:0x00007f8bc322bb08>:
  app/models/post.rb:20:in `my_vote'
  app/controllers/posts_controller.rb:7:in `show'

Started POST "/__better_errors/8923e1029286cfae/variables" for ::1 at 2022-02-18 23:18:11 +0700
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 4], ["votable_type", "Post"], ["LIMIT", 11]]
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 4], ["LIMIT", 11]]
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 4], ["LIMIT", 11]]
  [1m[36mCACHE Vote Load (0.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 4], ["votable_type", "Post"], ["LIMIT", 11]]
  [1m[36mCACHE Vote Load (0.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_id", 4], ["votable_type", "Post"], ["LIMIT", 11]]
Started GET "/posts/4" for ::1 at 2022-02-18 23:19:17 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 4], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51], ["votable_id", 52]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.2ms | Allocations: 876)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 35.2ms | Allocations: 16188)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 43.0ms | Allocations: 18854)
Completed 200 OK in 156ms (Views: 30.9ms | ActiveRecord: 58.1ms | Allocations: 58610)


Started GET "/subs" for ::1 at 2022-02-18 23:19:22 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 5.6ms | Allocations: 1103)
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.6ms | Allocations: 3804)
Completed 200 OK in 18ms (Views: 13.8ms | ActiveRecord: 3.3ms | Allocations: 4295)


Started GET "/subs/1" for ::1 at 2022-02-18 23:19:23 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.7ms | Allocations: 1073)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | Allocations: 3767)
Completed 200 OK in 31ms (Views: 8.2ms | ActiveRecord: 7.5ms | Allocations: 9267)


Started GET "/posts/4" for ::1 at 2022-02-18 23:19:26 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 4], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30)[0m  [["votable_type", "Comment"], ["votable_id", 24], ["votable_id", 25], ["votable_id", 26], ["votable_id", 27], ["votable_id", 28], ["votable_id", 29], ["votable_id", 30], ["votable_id", 31], ["votable_id", 32], ["votable_id", 33], ["votable_id", 34], ["votable_id", 35], ["votable_id", 36], ["votable_id", 37], ["votable_id", 38], ["votable_id", 39], ["votable_id", 40], ["votable_id", 41], ["votable_id", 42], ["votable_id", 43], ["votable_id", 44], ["votable_id", 45], ["votable_id", 46], ["votable_id", 47], ["votable_id", 48], ["votable_id", 49], ["votable_id", 50], ["votable_id", 51], ["votable_id", 52]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 874)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.7ms | Allocations: 2967)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.6ms | Allocations: 5525)
Completed 200 OK in 45ms (Views: 13.0ms | ActiveRecord: 11.0ms | Allocations: 12617)


Started GET "/comments/24" for ::1 at 2022-02-18 23:20:41 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"24"}
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (3.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.4ms | Allocations: 1337)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.4ms | Allocations: 3894)
Completed 200 OK in 24ms (Views: 11.0ms | ActiveRecord: 6.9ms | Allocations: 6064)


Started GET "/comments/24" for ::1 at 2022-02-18 23:20:56 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"24"}
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (3.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 24], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.2ms | Allocations: 1160)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.7ms | Allocations: 3711)
Completed 200 OK in 22ms (Views: 9.3ms | ActiveRecord: 7.1ms | Allocations: 5550)


Started GET "/subs" for ::1 at 2022-02-18 23:21:03 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 4.2ms | Allocations: 1103)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.8ms | Allocations: 3805)
Completed 200 OK in 16ms (Views: 13.0ms | ActiveRecord: 2.6ms | Allocations: 4102)


Started GET "/subs/4" for ::1 at 2022-02-18 23:21:06 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mSub Load (2.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Post"], ["votable_id", 3], ["votable_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 4]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 3.4ms | Allocations: 745)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.3ms | Allocations: 3439)
Completed 200 OK in 40ms (Views: 19.2ms | ActiveRecord: 7.1ms | Allocations: 6491)


Started GET "/posts/3" for ::1 at 2022-02-18 23:21:08 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (3.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 7.2ms | Allocations: 1467)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | Allocations: 4018)
Completed 200 OK in 34ms (Views: 10.4ms | ActiveRecord: 10.8ms | Allocations: 7133)


Started GET "/posts/3/comments/new" for ::1 at 2022-02-18 23:21:11 +0700
Processing by CommentsController#new as HTML
  Parameters: {"post_id"=>"3"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:13:in `new'
  Rendering layout layouts/application.html.erb
  Rendering comments/new.html.erb within layouts/application
  Rendered comments/new.html.erb within layouts/application (Duration: 2.6ms | Allocations: 267)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 8.0ms | Allocations: 2582)
Completed 200 OK in 20ms (Views: 11.3ms | ActiveRecord: 3.4ms | Allocations: 4641)


Started POST "/comments" for ::1 at 2022-02-18 23:21:13 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"content"=>"love", "post_id"=>"3"}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (2.5ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "love"], ["user_id", 5], ["post_id", 3], ["created_at", "2022-02-18 16:21:13.887365"], ["updated_at", "2022-02-18 16:21:13.887365"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/3
Completed 302 Found in 31ms (ActiveRecord: 11.9ms | Allocations: 4684)


Started GET "/posts/3" for ::1 at 2022-02-18 23:21:13 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" = $2[0m  [["votable_type", "Comment"], ["votable_id", 53]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (7.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 87)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.6ms | Allocations: 1635)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.2ms | Allocations: 4194)
Completed 200 OK in 44ms (Views: 13.1ms | ActiveRecord: 16.7ms | Allocations: 9171)


Started GET "/comments/53" for ::1 at 2022-02-18 23:21:15 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"53"}
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 53], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 5.0ms | Allocations: 1168)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | Allocations: 3725)
Completed 200 OK in 24ms (Views: 11.0ms | ActiveRecord: 5.7ms | Allocations: 5566)


Started GET "/subs" for ::1 at 2022-02-18 23:21:49 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 10.1ms | Allocations: 1103)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.0ms | Allocations: 3804)
Completed 200 OK in 21ms (Views: 17.2ms | ActiveRecord: 3.0ms | Allocations: 4100)


Started GET "/subs/2" for ::1 at 2022-02-18 23:21:52 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (5.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.3ms | Allocations: 780)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.1ms | Allocations: 3475)
Completed 200 OK in 33ms (Views: 12.7ms | ActiveRecord: 9.1ms | Allocations: 6637)


Started GET "/posts/2" for ::1 at 2022-02-18 23:21:54 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (5.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 5.2ms | Allocations: 1460)
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.5ms | Allocations: 4011)
Completed 200 OK in 31ms (Views: 11.1ms | ActiveRecord: 11.0ms | Allocations: 7144)


Started POST "/posts/2/upvote" for ::1 at 2022-02-18 23:21:55 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/2
Completed 302 Found in 17ms (ActiveRecord: 3.2ms | Allocations: 2899)


Started GET "/posts/2" for ::1 at 2022-02-18 23:21:55 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (3.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 6.9ms | Allocations: 1455)
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.3ms | Allocations: 4006)
Completed 200 OK in 27ms (Views: 8.5ms | ActiveRecord: 9.1ms | Allocations: 7138)


Started GET "/subs" for ::1 at 2022-02-18 23:22:20 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (3.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 10.6ms | Allocations: 1099)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.3ms | Allocations: 3793)
Completed 200 OK in 20ms (Views: 15.7ms | ActiveRecord: 4.2ms | Allocations: 4088)


Started GET "/subs/2" for ::1 at 2022-02-18 23:22:23 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 1.9ms | Allocations: 778)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | Allocations: 3473)
Completed 200 OK in 26ms (Views: 9.2ms | ActiveRecord: 5.9ms | Allocations: 6635)


Started GET "/posts/1" for ::1 at 2022-02-18 23:22:24 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 431)
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.3ms | Allocations: 2716)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.2ms | Allocations: 5275)
Completed 200 OK in 48ms (Views: 16.4ms | ActiveRecord: 10.1ms | Allocations: 11850)


Started GET "/comments/5" for ::1 at 2022-02-18 23:22:27 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mComment Load (2.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (2.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 5.7ms | Allocations: 1168)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.8ms | Allocations: 3725)
Completed 200 OK in 32ms (Views: 11.9ms | ActiveRecord: 7.7ms | Allocations: 5566)


Started POST "/comments/5/upvote" for ::1 at 2022-02-18 23:22:29 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"5"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (2.8ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["value", 1], ["votable_type", "Comment"], ["votable_id", 5], ["created_at", "2022-02-18 16:22:29.046808"], ["updated_at", "2022-02-18 16:22:29.046808"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/comments/5
Completed 302 Found in 29ms (ActiveRecord: 10.9ms | Allocations: 8007)


Started GET "/comments/5" for ::1 at 2022-02-18 23:22:29 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.4ms | Allocations: 1159)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.5ms | Allocations: 3710)
Completed 200 OK in 18ms (Views: 9.1ms | ActiveRecord: 4.5ms | Allocations: 5549)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 23:22:43 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"5", "post_id"=>"1", "content"=>"sick"}, "reply"=>"true"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (1.8ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "sick"], ["user_id", 5], ["post_id", 1], ["parent_id", 5], ["created_at", "2022-02-18 16:22:43.490376"], ["updated_at", "2022-02-18 16:22:43.490376"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (41.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 59ms (ActiveRecord: 46.6ms | Allocations: 4541)


Started GET "/posts/1" for ::1 at 2022-02-18 23:22:43 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23], ["votable_id", 54]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.3ms | Allocations: 431)
  Rendered comments/_comment.html.erb (Duration: 1.3ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 119)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.2ms | Allocations: 2754)
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 23.1ms | Allocations: 5315)
Completed 200 OK in 48ms (Views: 20.5ms | ActiveRecord: 10.2ms | Allocations: 12013)


Started GET "/subs" for ::1 at 2022-02-18 23:22:56 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 7.9ms | Allocations: 1103)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.6ms | Allocations: 3805)
Completed 200 OK in 16ms (Views: 12.6ms | ActiveRecord: 2.9ms | Allocations: 4102)


Started GET "/subs/4" for ::1 at 2022-02-18 23:22:58 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mSub Load (3.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Post"], ["votable_id", 3], ["votable_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 4]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.0ms | Allocations: 745)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.0ms | Allocations: 3439)
Completed 200 OK in 30ms (Views: 9.2ms | ActiveRecord: 7.3ms | Allocations: 6491)


Started GET "/posts/1" for ::1 at 2022-02-18 23:23:00 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23], ["votable_id", 54]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 431)
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.4ms | Allocations: 2754)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.4ms | Allocations: 5313)
Completed 200 OK in 43ms (Views: 13.5ms | ActiveRecord: 9.5ms | Allocations: 12011)


Started GET "/comments/3" for ::1 at 2022-02-18 23:23:15 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.1ms | Allocations: 1168)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.8ms | Allocations: 3724)
Completed 200 OK in 26ms (Views: 11.8ms | ActiveRecord: 4.9ms | Allocations: 5564)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 23:23:19 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"3", "post_id"=>"1", "content"=>"kk"}, "reply"=>"true"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (1.2ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "kk"], ["user_id", 5], ["post_id", 1], ["parent_id", 3], ["created_at", "2022-02-18 16:23:19.669538"], ["updated_at", "2022-02-18 16:23:19.669538"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (40.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 59ms (ActiveRecord: 45.4ms | Allocations: 4543)


Started GET "/posts/1" for ::1 at 2022-02-18 23:23:19 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23], ["votable_id", 54], ["votable_id", 55]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 465)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.2ms | Allocations: 2788)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.2ms | Allocations: 5346)
Completed 200 OK in 47ms (Views: 11.6ms | ActiveRecord: 11.6ms | Allocations: 12114)


Started GET "/subs" for ::1 at 2022-02-18 23:23:25 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 5.3ms | Allocations: 1103)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | Allocations: 3805)
Completed 200 OK in 15ms (Views: 12.4ms | ActiveRecord: 2.3ms | Allocations: 4102)


Started GET "/subs/1" for ::1 at 2022-02-18 23:34:15 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.4ms | Allocations: 780)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.1ms | Allocations: 3480)
Completed 200 OK in 108ms (Views: 14.5ms | ActiveRecord: 25.4ms | Allocations: 9909)


Started GET "/posts/2" for ::1 at 2022-02-18 23:34:17 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 6.9ms | Allocations: 1465)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.6ms | Allocations: 4017)
Completed 200 OK in 37ms (Views: 15.2ms | ActiveRecord: 6.8ms | Allocations: 7166)


Started POST "/posts/2/upvote" for ::1 at 2022-02-18 23:34:18 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/2
Completed 302 Found in 18ms (ActiveRecord: 5.2ms | Allocations: 2899)


Started GET "/posts/2" for ::1 at 2022-02-18 23:34:19 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 6.2ms | Allocations: 1455)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.0ms | Allocations: 4006)
Completed 200 OK in 25ms (Views: 11.7ms | ActiveRecord: 5.8ms | Allocations: 7138)


Started POST "/posts/2/downvote" for ::1 at 2022-02-18 23:34:20 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:54:in `downvote'
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mPost Load (2.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mVote Update (2.7ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 0], ["updated_at", "2022-02-18 16:34:20.495118"], ["id", 6]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:60:in `downvote'
Redirected to http://localhost:3000/posts/2
Completed 302 Found in 54ms (ActiveRecord: 18.3ms | Allocations: 7228)


Started GET "/posts/2" for ::1 at 2022-02-18 23:34:20 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 5.3ms | Allocations: 1455)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.2ms | Allocations: 4007)
Completed 200 OK in 30ms (Views: 14.1ms | ActiveRecord: 6.7ms | Allocations: 7140)


Started POST "/posts/2/downvote" for ::1 at 2022-02-18 23:34:53 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:54:in `downvote'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mVote Update (2.1ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", -1], ["updated_at", "2022-02-18 16:34:53.679850"], ["id", 6]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:60:in `downvote'
Redirected to http://localhost:3000/posts/2
Completed 302 Found in 41ms (ActiveRecord: 18.8ms | Allocations: 7057)


Started GET "/posts/2" for ::1 at 2022-02-18 23:34:53 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 5.6ms | Allocations: 1456)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.5ms | Allocations: 4008)
Completed 200 OK in 28ms (Views: 11.4ms | ActiveRecord: 6.3ms | Allocations: 7141)


Started POST "/posts/2/upvote" for ::1 at 2022-02-18 23:34:54 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (5.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mVote Update (2.0ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 0], ["updated_at", "2022-02-18 16:34:54.952888"], ["id", 6]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:47:in `upvote'
Redirected to http://localhost:3000/posts/2
Completed 302 Found in 49ms (ActiveRecord: 21.1ms | Allocations: 7057)


Started GET "/posts/2" for ::1 at 2022-02-18 23:34:55 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 8.4ms | Allocations: 1455)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.4ms | Allocations: 4006)
Completed 200 OK in 42ms (Views: 18.9ms | ActiveRecord: 8.2ms | Allocations: 7138)


Started POST "/posts/2/downvote" for ::1 at 2022-02-18 23:34:56 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:54:in `downvote'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mVote Update (1.3ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", -1], ["updated_at", "2022-02-18 16:34:56.383527"], ["id", 6]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:60:in `downvote'
Redirected to http://localhost:3000/posts/2
Completed 302 Found in 42ms (ActiveRecord: 13.7ms | Allocations: 7057)


Started GET "/posts/2" for ::1 at 2022-02-18 23:34:56 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (4.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (3.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 14.2ms | Allocations: 1456)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 27.9ms | Allocations: 4007)
Completed 200 OK in 49ms (Views: 23.5ms | ActiveRecord: 11.7ms | Allocations: 7139)


Started GET "/subs" for ::1 at 2022-02-18 23:35:15 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 7.3ms | Allocations: 1099)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 30.7ms | Allocations: 3794)
Completed 200 OK in 32ms (Views: 29.0ms | ActiveRecord: 2.5ms | Allocations: 4090)


Started GET "/subs/3" for ::1 at 2022-02-18 23:35:18 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Post"], ["votable_id", 3], ["votable_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.6ms | Allocations: 742)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.5ms | Allocations: 3437)
Completed 200 OK in 27ms (Views: 9.6ms | ActiveRecord: 6.1ms | Allocations: 6490)


Started GET "/posts/3" for ::1 at 2022-02-18 23:35:19 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" = $2[0m  [["votable_type", "Comment"], ["votable_id", 53]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.0ms | Allocations: 87)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.2ms | Allocations: 1625)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.2ms | Allocations: 4183)
Completed 200 OK in 45ms (Views: 14.2ms | ActiveRecord: 9.6ms | Allocations: 9158)


Started POST "/posts/3/upvote" for ::1 at 2022-02-18 23:35:21 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"3"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (1.5ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["value", 1], ["votable_type", "Post"], ["votable_id", 3], ["created_at", "2022-02-18 16:35:21.294774"], ["updated_at", "2022-02-18 16:35:21.294774"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/posts/3
Completed 302 Found in 33ms (ActiveRecord: 10.8ms | Allocations: 6188)


Started GET "/posts/3" for ::1 at 2022-02-18 23:35:21 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (3.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" = $2[0m  [["votable_type", "Comment"], ["votable_id", 53]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 87)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.7ms | Allocations: 1629)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | Allocations: 4187)
Completed 200 OK in 38ms (Views: 13.5ms | ActiveRecord: 11.2ms | Allocations: 9174)


Started GET "/comments/53" for ::1 at 2022-02-18 23:35:23 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"53"}
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 53], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.1ms | Allocations: 1168)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | Allocations: 3724)
Completed 200 OK in 20ms (Views: 9.1ms | ActiveRecord: 4.8ms | Allocations: 5569)


Started POST "/comments/53/upvote" for ::1 at 2022-02-18 23:35:28 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"53"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (2.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 53], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (1.7ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["value", 1], ["votable_type", "Comment"], ["votable_id", 53], ["created_at", "2022-02-18 16:35:28.657349"], ["updated_at", "2022-02-18 16:35:28.657349"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (10.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/comments/53
Completed 302 Found in 41ms (ActiveRecord: 20.8ms | Allocations: 6186)


Started GET "/comments/53" for ::1 at 2022-02-18 23:35:28 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"53"}
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (3.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 53], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 5.4ms | Allocations: 1159)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.7ms | Allocations: 3711)
Completed 200 OK in 24ms (Views: 11.3ms | ActiveRecord: 6.9ms | Allocations: 5550)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 23:35:29 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"53", "post_id"=>"3", "content"=>""}, "reply"=>"true"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:31:in `create'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 2.1ms | Allocations: 765)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 8.7ms | Allocations: 3075)
Completed 200 OK in 27ms (Views: 9.3ms | ActiveRecord: 4.0ms | Allocations: 9073)


Started POST "/comments/53/upvote" for ::1 at 2022-02-18 23:35:32 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"53"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (4.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 53], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/comments/53
Completed 302 Found in 15ms (ActiveRecord: 6.5ms | Allocations: 2893)


Started GET "/comments/53" for ::1 at 2022-02-18 23:35:32 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"53"}
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 53], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 3.9ms | Allocations: 1158)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.7ms | Allocations: 3710)
Completed 200 OK in 21ms (Views: 9.3ms | ActiveRecord: 5.1ms | Allocations: 5550)


Started POST "/comments?reply=true" for ::1 at 2022-02-18 23:35:40 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"53", "post_id"=>"3", "content"=>"oh boy"}, "reply"=>"true"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (1.5ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "oh boy"], ["user_id", 5], ["post_id", 3], ["parent_id", 53], ["created_at", "2022-02-18 16:35:40.268675"], ["updated_at", "2022-02-18 16:35:40.268675"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/3
Completed 302 Found in 26ms (ActiveRecord: 6.7ms | Allocations: 4539)


Started GET "/posts/3" for ::1 at 2022-02-18 23:35:40 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Comment"], ["votable_id", 53], ["votable_id", 56]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered posts/show.html.erb within layouts/application (Duration: 6.0ms | Allocations: 1662)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | Allocations: 4221)
Completed 200 OK in 34ms (Views: 11.7ms | ActiveRecord: 9.6ms | Allocations: 9301)


Started POST "/posts/3/upvote" for ::1 at 2022-02-18 23:35:43 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"3"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/3
Completed 302 Found in 10ms (ActiveRecord: 2.9ms | Allocations: 2896)


Started GET "/posts/3" for ::1 at 2022-02-18 23:35:44 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Comment"], ["votable_id", 53], ["votable_id", 56]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered posts/show.html.erb within layouts/application (Duration: 4.8ms | Allocations: 1662)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.3ms | Allocations: 4220)
Completed 200 OK in 33ms (Views: 10.8ms | ActiveRecord: 7.9ms | Allocations: 9301)


Started GET "/" for ::1 at 2022-02-18 23:55:07 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 81.5ms | Allocations: 7761)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 105.0ms | Allocations: 16481)
Completed 200 OK in 111ms (Views: 106.0ms | ActiveRecord: 21.8ms | Allocations: 19001)


Started GET "/subs/1" for ::1 at 2022-02-18 23:55:11 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (2.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 4.7ms | Allocations: 1075)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.4ms | Allocations: 3770)
Completed 200 OK in 99ms (Views: 15.9ms | ActiveRecord: 8.6ms | Allocations: 24771)


Started GET "/subs/new" for ::1 at 2022-02-18 23:55:12 +0700
Processing by SubsController#new as HTML
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering subs/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.2ms | Allocations: 59)
  Rendered subs/new.html.erb within layouts/application (Duration: 1.8ms | Allocations: 410)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | Allocations: 2724)
Completed 200 OK in 17ms (Views: 7.8ms | ActiveRecord: 2.9ms | Allocations: 4034)


Started GET "/subs" for ::1 at 2022-02-18 23:55:14 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 4.3ms | Allocations: 1100)
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | Allocations: 3784)
Completed 200 OK in 17ms (Views: 10.1ms | ActiveRecord: 6.1ms | Allocations: 4080)


Started GET "/subs/1" for ::1 at 2022-02-18 23:55:17 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (3.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.1ms | Allocations: 781)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.1ms | Allocations: 3465)
Completed 200 OK in 34ms (Views: 9.6ms | ActiveRecord: 7.7ms | Allocations: 6626)


Started GET "/posts/2" for ::1 at 2022-02-18 23:55:19 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (3.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 9.1ms | Allocations: 4729)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.9ms | Allocations: 7285)
Completed 200 OK in 38ms (Views: 13.5ms | ActiveRecord: 8.7ms | Allocations: 14531)


Started POST "/posts/2/upvote" for ::1 at 2022-02-18 23:55:21 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mPost Load (2.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mVote Update (1.6ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 1], ["updated_at", "2022-02-18 16:55:21.063759"], ["id", 6]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:47:in `upvote'
Redirected to http://localhost:3000/posts/2
Completed 302 Found in 38ms (ActiveRecord: 13.2ms | Allocations: 9020)


Started GET "/posts/2" for ::1 at 2022-02-18 23:55:21 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (2.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 7.4ms | Allocations: 1445)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.5ms | Allocations: 3997)
Completed 200 OK in 29ms (Views: 12.2ms | ActiveRecord: 6.9ms | Allocations: 7129)


Started POST "/posts/2/downvote" for ::1 at 2022-02-18 23:55:25 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:54:in `downvote'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mPost Load (2.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mVote Update (1.3ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", -1], ["updated_at", "2022-02-18 16:55:25.080350"], ["id", 6]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:60:in `downvote'
Redirected to http://localhost:3000/posts/2
Completed 302 Found in 36ms (ActiveRecord: 11.6ms | Allocations: 7047)


Started GET "/posts/2" for ::1 at 2022-02-18 23:55:25 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 4.1ms | Allocations: 1446)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.0ms | Allocations: 3998)
Completed 200 OK in 26ms (Views: 10.4ms | ActiveRecord: 6.9ms | Allocations: 7131)


Started GET "/subs" for ::1 at 2022-02-18 23:55:27 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 6.3ms | Allocations: 1099)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | Allocations: 3783)
Completed 200 OK in 16ms (Views: 13.2ms | ActiveRecord: 2.6ms | Allocations: 4078)


Started GET "/subs/3" for ::1 at 2022-02-18 23:55:30 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Post"], ["votable_id", 3], ["votable_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 1.9ms | Allocations: 741)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.1ms | Allocations: 3425)
Completed 200 OK in 27ms (Views: 9.7ms | ActiveRecord: 6.1ms | Allocations: 6498)


Started GET "/posts/3" for ::1 at 2022-02-18 23:55:33 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (7.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Comment"], ["votable_id", 53], ["votable_id", 56]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 122)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.7ms | Allocations: 1649)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | Allocations: 4207)
Completed 200 OK in 49ms (Views: 10.4ms | ActiveRecord: 14.3ms | Allocations: 16552)


Started POST "/posts/3/upvote" for ::1 at 2022-02-18 23:55:35 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"3"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/3
Completed 302 Found in 16ms (ActiveRecord: 6.0ms | Allocations: 2886)


Started GET "/posts/3" for ::1 at 2022-02-18 23:55:35 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Comment"], ["votable_id", 53], ["votable_id", 56]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.4ms | Allocations: 1652)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.2ms | Allocations: 4210)
Completed 200 OK in 36ms (Views: 11.0ms | ActiveRecord: 9.6ms | Allocations: 9291)


Started POST "/posts/3/downvote" for ::1 at 2022-02-18 23:55:36 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"3"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:54:in `downvote'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mPost Load (1.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mVote Update (1.4ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", -1], ["updated_at", "2022-02-18 16:55:36.267112"], ["id", 12]]
  ↳ app/models/user.rb:60:in `downvote'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:60:in `downvote'
Redirected to http://localhost:3000/posts/3
Completed 302 Found in 41ms (ActiveRecord: 12.5ms | Allocations: 7051)


Started GET "/posts/3" for ::1 at 2022-02-18 23:55:36 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Comment"], ["votable_id", 53], ["votable_id", 56]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (4.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (3.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered posts/show.html.erb within layouts/application (Duration: 6.8ms | Allocations: 1652)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.9ms | Allocations: 4212)
Completed 200 OK in 39ms (Views: 10.8ms | ActiveRecord: 15.7ms | Allocations: 9293)


Started POST "/posts/3/upvote" for ::1 at 2022-02-18 23:55:41 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"3"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mVote Update (1.6ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 1], ["updated_at", "2022-02-18 16:55:41.080167"], ["id", 12]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:47:in `upvote'
Redirected to http://localhost:3000/posts/3
Completed 302 Found in 35ms (ActiveRecord: 12.4ms | Allocations: 7051)


Started GET "/posts/3" for ::1 at 2022-02-18 23:55:41 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (0.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Comment"], ["votable_id", 53], ["votable_id", 56]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered posts/show.html.erb within layouts/application (Duration: 5.6ms | Allocations: 1652)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.8ms | Allocations: 4210)
Completed 200 OK in 30ms (Views: 10.1ms | ActiveRecord: 7.8ms | Allocations: 9290)


Started GET "/subs" for ::1 at 2022-02-18 23:55:44 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 4.5ms | Allocations: 1103)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.0ms | Allocations: 3794)
Completed 200 OK in 15ms (Views: 12.5ms | ActiveRecord: 2.2ms | Allocations: 4090)


Started GET "/subs/4" for ::1 at 2022-02-18 23:56:01 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Post"], ["votable_id", 3], ["votable_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 4]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 1.8ms | Allocations: 744)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 8.6ms | Allocations: 3428)
Completed 200 OK in 26ms (Views: 9.4ms | ActiveRecord: 6.6ms | Allocations: 6501)


Started GET "/" for ::1 at 2022-02-19 10:41:27 +0700
  [1m[35m (4.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (48.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 114.1ms | Allocations: 5901)
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 256.0ms | Allocations: 18158)
Completed 200 OK in 285ms (Views: 102.0ms | ActiveRecord: 162.6ms | Allocations: 25903)


Started GET "/subs/1" for ::1 at 2022-02-19 10:41:42 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (2.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (45.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (45.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 3.0ms | Allocations: 1329)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | Allocations: 4023)
Completed 200 OK in 204ms (Views: 8.9ms | ActiveRecord: 114.9ms | Allocations: 36680)


Started GET "/posts/2" for ::1 at 2022-02-19 10:41:45 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (19.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (18.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 7.7ms | Allocations: 5253)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.3ms | Allocations: 7811)
Completed 200 OK in 82ms (Views: 15.2ms | ActiveRecord: 44.9ms | Allocations: 16069)


Started POST "/posts/2/upvote" for ::1 at 2022-02-19 10:41:47 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (10.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (16.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mVote Update (38.8ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 1], ["updated_at", "2022-02-19 03:41:47.427155"], ["id", 6]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:47:in `upvote'
Redirected to http://localhost:3000/posts/2
Completed 302 Found in 95ms (ActiveRecord: 73.1ms | Allocations: 9240)


Started GET "/posts/2" for ::1 at 2022-02-19 10:41:47 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 4.2ms | Allocations: 1445)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.4ms | Allocations: 3998)
Completed 200 OK in 27ms (Views: 9.8ms | ActiveRecord: 7.7ms | Allocations: 7131)


Started POST "/posts/2/downvote" for ::1 at 2022-02-19 10:41:56 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (61.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in `downvote'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mPost Load (2.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mVote Update (1.9ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", -1], ["updated_at", "2022-02-19 03:41:56.312726"], ["id", 6]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mTRANSACTION (5.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:62:in `downvote'
Redirected to http://localhost:3000/posts/2
Completed 302 Found in 102ms (ActiveRecord: 80.0ms | Allocations: 7050)


Started GET "/posts/2" for ::1 at 2022-02-19 10:41:56 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (3.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 4.8ms | Allocations: 1446)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.2ms | Allocations: 3997)
Completed 200 OK in 27ms (Views: 10.6ms | ActiveRecord: 8.3ms | Allocations: 7129)


  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/posts/2" for ::1 at 2022-02-19 10:45:11 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (2.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 11.6ms | Allocations: 4449)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 22.6ms | Allocations: 7275)
Completed 200 OK in 42ms (Views: 20.2ms | ActiveRecord: 9.7ms | Allocations: 11161)


Started GET "/posts/2" for ::1 at 2022-02-19 10:45:24 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (2.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 10.7ms | Allocations: 2782)
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.9ms | Allocations: 5609)
Completed 200 OK in 41ms (Views: 16.8ms | ActiveRecord: 13.1ms | Allocations: 9499)


Started GET "/subs/1" for ::1 at 2022-02-19 10:45:43 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (2.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (3.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (3.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 4.0ms | Allocations: 1017)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 26.0ms | Allocations: 3709)
Completed 200 OK in 56ms (Views: 30.7ms | ActiveRecord: 9.8ms | Allocations: 7406)


Started GET "/posts/1" for ::1 at 2022-02-19 10:45:46 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23], ["votable_id", 54], ["votable_id", 55]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (5.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 2.8ms | Allocations: 794)
  Rendered comments/_comment.html.erb (Duration: 1.2ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 119)
  Rendered posts/show.html.erb within layouts/application (Duration: 17.7ms | Allocations: 4064)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 25.8ms | Allocations: 6622)
Completed 200 OK in 73ms (Views: 18.1ms | ActiveRecord: 25.0ms | Allocations: 20907)


Started GET "/posts/1" for ::1 at 2022-02-19 10:46:10 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23], ["votable_id", 54], ["votable_id", 55]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.3ms | Allocations: 467)
  Rendered comments/_comment.html.erb (Duration: 1.1ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.6ms | Allocations: 3597)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.2ms | Allocations: 6155)
Completed 200 OK in 45ms (Views: 16.8ms | ActiveRecord: 10.4ms | Allocations: 12924)


Started POST "/posts/1/upvote" for ::1 at 2022-02-19 10:46:52 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (5.8ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["value", 1], ["votable_type", "Post"], ["votable_id", 1], ["created_at", "2022-02-19 03:46:52.460199"], ["updated_at", "2022-02-19 03:46:52.460199"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 32ms (ActiveRecord: 14.6ms | Allocations: 6263)


Started GET "/posts/1" for ::1 at 2022-02-19 10:46:52 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (13.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (6.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23], ["votable_id", 54], ["votable_id", 55]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 467)
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 119)
  Rendered posts/show.html.erb within layouts/application (Duration: 13.8ms | Allocations: 3597)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 24.9ms | Allocations: 6157)
Completed 200 OK in 81ms (Views: 22.7ms | ActiveRecord: 27.6ms | Allocations: 12949)


Started GET "/posts/1" for ::1 at 2022-02-19 10:47:22 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23], ["votable_id", 54], ["votable_id", 55]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 467)
  Rendered comments/_comment.html.erb (Duration: 2.7ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 119)
  Rendered posts/show.html.erb within layouts/application (Duration: 43.5ms | Allocations: 18358)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 51.0ms | Allocations: 21019)
Completed 200 OK in 160ms (Views: 37.5ms | ActiveRecord: 54.2ms | Allocations: 60292)


Started POST "/posts/1/upvote" for ::1 at 2022-02-19 10:47:26 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 19ms (ActiveRecord: 4.2ms | Allocations: 2889)


Started GET "/posts/1" for ::1 at 2022-02-19 10:47:26 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23], ["votable_id", 54], ["votable_id", 55]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 466)
  Rendered comments/_comment.html.erb (Duration: 1.3ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 119)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.4ms | Allocations: 3596)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.1ms | Allocations: 6154)
Completed 200 OK in 44ms (Views: 16.2ms | ActiveRecord: 9.4ms | Allocations: 12945)


Started POST "/posts/1/downvote" for ::1 at 2022-02-19 10:47:27 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"1"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (3.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in `downvote'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mVote Update (1.3ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 0], ["updated_at", "2022-02-19 03:47:27.529540"], ["id", 14]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:62:in `downvote'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 42ms (ActiveRecord: 17.9ms | Allocations: 9013)


Started GET "/posts/1" for ::1 at 2022-02-19 10:47:27 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23], ["votable_id", 54], ["votable_id", 55]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.0ms | Allocations: 465)
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 119)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.7ms | Allocations: 3595)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.0ms | Allocations: 6153)
Completed 200 OK in 39ms (Views: 14.0ms | ActiveRecord: 10.0ms | Allocations: 12941)


Started POST "/posts/1/downvote" for ::1 at 2022-02-19 10:47:29 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"1"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (3.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (3.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in `downvote'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mPost Load (3.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mVote Update (2.7ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", -1], ["updated_at", "2022-02-19 03:47:30.029532"], ["id", 14]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:62:in `downvote'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 48ms (ActiveRecord: 22.4ms | Allocations: 7051)


Started GET "/posts/1" for ::1 at 2022-02-19 10:47:30 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23], ["votable_id", 54], ["votable_id", 55]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 465)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.7ms | Allocations: 3595)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.8ms | Allocations: 6154)
Completed 200 OK in 48ms (Views: 14.6ms | ActiveRecord: 13.5ms | Allocations: 12943)


Started POST "/posts/1/downvote" for ::1 at 2022-02-19 10:47:30 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in `downvote'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 15ms (ActiveRecord: 3.9ms | Allocations: 2886)


Started GET "/posts/1" for ::1 at 2022-02-19 10:47:31 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23], ["votable_id", 54], ["votable_id", 55]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 465)
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 119)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.2ms | Allocations: 3595)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.6ms | Allocations: 6154)
Completed 200 OK in 45ms (Views: 14.3ms | ActiveRecord: 13.1ms | Allocations: 12943)


Started GET "/subs" for ::1 at 2022-02-19 10:47:34 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 7.0ms | Allocations: 1262)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.4ms | Allocations: 3953)
Completed 200 OK in 18ms (Views: 13.9ms | ActiveRecord: 3.4ms | Allocations: 4574)


Started GET "/subs/3" for ::1 at 2022-02-19 10:47:36 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Post"], ["votable_id", 3], ["votable_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 4.9ms | Allocations: 1035)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | Allocations: 3719)
Completed 200 OK in 36ms (Views: 14.5ms | ActiveRecord: 6.3ms | Allocations: 9143)


Started GET "/posts/3" for ::1 at 2022-02-19 10:47:39 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Comment"], ["votable_id", 53], ["votable_id", 56]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.3ms | Allocations: 2474)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.4ms | Allocations: 5032)
Completed 200 OK in 38ms (Views: 12.8ms | ActiveRecord: 10.3ms | Allocations: 10117)


Started POST "/posts/3/upvote" for ::1 at 2022-02-19 10:47:40 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"3"}
  [1m[36mUser Load (76.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (13.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/3
Completed 302 Found in 101ms (ActiveRecord: 92.3ms | Allocations: 2886)


Started GET "/posts/3" for ::1 at 2022-02-19 10:47:40 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (0.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (3.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (3.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Comment"], ["votable_id", 53], ["votable_id", 56]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered posts/show.html.erb within layouts/application (Duration: 7.5ms | Allocations: 2469)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.0ms | Allocations: 5027)
Completed 200 OK in 40ms (Views: 13.4ms | ActiveRecord: 12.8ms | Allocations: 10107)


Started POST "/posts/3/downvote" for ::1 at 2022-02-19 10:47:42 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"3"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (3.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in `downvote'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mVote Update (1.2ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 0], ["updated_at", "2022-02-19 03:47:42.726152"], ["id", 12]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:62:in `downvote'
Redirected to http://localhost:3000/posts/3
Completed 302 Found in 36ms (ActiveRecord: 14.5ms | Allocations: 7051)


Started GET "/posts/3" for ::1 at 2022-02-19 10:47:42 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (3.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Comment"], ["votable_id", 53], ["votable_id", 56]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (3.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.8ms | Allocations: 2470)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.5ms | Allocations: 5029)
Completed 200 OK in 49ms (Views: 18.0ms | ActiveRecord: 14.8ms | Allocations: 10110)


Started GET "/comments/56" for ::1 at 2022-02-19 10:47:44 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"56"}
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (47.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 56], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 5.6ms | Allocations: 1602)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.0ms | Allocations: 4159)
Completed 200 OK in 74ms (Views: 12.9ms | ActiveRecord: 51.2ms | Allocations: 6731)


Started POST "/comments/56/upvote" for ::1 at 2022-02-19 10:47:46 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"56"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 56], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (1.3ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["value", 1], ["votable_type", "Comment"], ["votable_id", 56], ["created_at", "2022-02-19 03:47:46.099197"], ["updated_at", "2022-02-19 03:47:46.099197"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (41.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/comments/56
Completed 302 Found in 70ms (ActiveRecord: 50.2ms | Allocations: 6183)


Started GET "/comments/56" for ::1 at 2022-02-19 10:47:46 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"56"}
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (41.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 56], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 5.1ms | Allocations: 1149)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.0ms | Allocations: 3700)
Completed 200 OK in 61ms (Views: 10.9ms | ActiveRecord: 45.1ms | Allocations: 5540)


Started POST "/comments?reply=true" for ::1 at 2022-02-19 10:47:56 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"56", "post_id"=>"3", "content"=>"this is the best comment ever"}, "reply"=>"true"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (44.2ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "this is the best comment ever"], ["user_id", 5], ["post_id", 3], ["parent_id", 56], ["created_at", "2022-02-19 03:47:56.366977"], ["updated_at", "2022-02-19 03:47:56.366977"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/3
Completed 302 Found in 68ms (ActiveRecord: 51.0ms | Allocations: 4699)


Started GET "/posts/3" for ::1 at 2022-02-19 10:47:56 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Comment"], ["votable_id", 53], ["votable_id", 56], ["votable_id", 57]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 154)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.8ms | Allocations: 2519)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | Allocations: 5077)
Completed 200 OK in 41ms (Views: 14.8ms | ActiveRecord: 10.6ms | Allocations: 10248)


Started POST "/posts/3/upvote" for ::1 at 2022-02-19 10:48:02 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mVote Update (5.6ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 1], ["updated_at", "2022-02-19 03:48:02.517665"], ["id", 12]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:47:in `upvote'
Redirected to http://localhost:3000/posts/3
Completed 302 Found in 33ms (ActiveRecord: 15.3ms | Allocations: 7064)


Started GET "/posts/3" for ::1 at 2022-02-19 10:48:02 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (0.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Comment"], ["votable_id", 53], ["votable_id", 56], ["votable_id", 57]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 156)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.6ms | Allocations: 2515)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.4ms | Allocations: 5074)
Completed 200 OK in 42ms (Views: 15.9ms | ActiveRecord: 10.9ms | Allocations: 10247)


Started POST "/posts/3/upvote" for ::1 at 2022-02-19 10:48:04 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/3
Completed 302 Found in 14ms (ActiveRecord: 4.1ms | Allocations: 2896)


Started GET "/posts/3" for ::1 at 2022-02-19 10:48:04 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Comment"], ["votable_id", 53], ["votable_id", 56], ["votable_id", 57]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 154)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.4ms | Allocations: 2513)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.0ms | Allocations: 5072)
Completed 200 OK in 36ms (Views: 12.2ms | ActiveRecord: 10.5ms | Allocations: 10244)


Started GET "/subs" for ::1 at 2022-02-19 10:48:05 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 6.2ms | Allocations: 1103)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.4ms | Allocations: 3804)
Completed 200 OK in 13ms (Views: 10.7ms | ActiveRecord: 2.4ms | Allocations: 4100)


Started GET "/subs/5" for ::1 at 2022-02-19 10:48:07 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 5]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 5]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 3.6ms | Allocations: 666)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.1ms | Allocations: 3361)
Completed 200 OK in 28ms (Views: 16.4ms | ActiveRecord: 4.1ms | Allocations: 5355)


Started GET "/subs/new" for ::1 at 2022-02-19 10:48:08 +0700
Processing by SubsController#new as HTML
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering subs/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 1.0ms | Allocations: 204)
  Rendered subs/new.html.erb within layouts/application (Duration: 4.6ms | Allocations: 693)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.1ms | Allocations: 3007)
Completed 200 OK in 25ms (Views: 14.5ms | ActiveRecord: 1.7ms | Allocations: 4323)


Started GET "/subs" for ::1 at 2022-02-19 10:48:14 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 4.2ms | Allocations: 1100)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.7ms | Allocations: 3784)
Completed 200 OK in 16ms (Views: 12.3ms | ActiveRecord: 3.0ms | Allocations: 4080)


Started GET "/subs/5" for ::1 at 2022-02-19 10:48:16 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 5]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 5]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 1.6ms | Allocations: 666)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 7.9ms | Allocations: 3350)
Completed 200 OK in 20ms (Views: 7.8ms | ActiveRecord: 3.8ms | Allocations: 5343)


Started GET "/subs" for ::1 at 2022-02-19 10:48:21 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 8.6ms | Allocations: 1099)
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.0ms | Allocations: 3783)
Completed 200 OK in 24ms (Views: 18.6ms | ActiveRecord: 4.9ms | Allocations: 4078)


Started GET "/subs/3" for ::1 at 2022-02-19 10:48:23 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Post"], ["votable_id", 3], ["votable_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 3.0ms | Allocations: 743)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.9ms | Allocations: 3427)
Completed 200 OK in 29ms (Views: 11.4ms | ActiveRecord: 6.0ms | Allocations: 6521)


Started GET "/posts/3" for ::1 at 2022-02-19 10:48:28 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Comment"], ["votable_id", 53], ["votable_id", 56], ["votable_id", 57]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 154)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.6ms | Allocations: 2508)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.1ms | Allocations: 5067)
Completed 200 OK in 43ms (Views: 12.9ms | ActiveRecord: 12.2ms | Allocations: 10239)


Started GET "/posts/new" for ::1 at 2022-02-19 10:48:42 +0700
Processing by PostsController#new as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  [1m[36mSub Load (67.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/posts/_form.html.erb:33
  Rendered posts/_form.html.erb (Duration: 105.8ms | Allocations: 9102)
  Rendered posts/new.html.erb within layouts/application (Duration: 109.5ms | Allocations: 9442)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 116.6ms | Allocations: 11758)
Completed 200 OK in 121ms (Views: 50.7ms | ActiveRecord: 68.1ms | Allocations: 13074)


Started POST "/posts" for ::1 at 2022-02-19 10:49:08 +0700
Processing by PostsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"title"=>"News from Vietnamese", "content"=>"Russia war", "url"=>"reddit.xyz", "sub_ids"=>["1", "5"]}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mSub Load (4.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" IN ($1, $2)[0m  [["id", 1], ["id", 5]]
  ↳ app/controllers/posts_controller.rb:19:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/posts_controller.rb:21:in `create'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:21:in `create'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:21:in `create'
  [1m[36mPost Create (2.0ms)[0m  [1m[32mINSERT INTO "posts" ("title", "content", "url", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "News from Vietnamese"], ["content", "Russia war"], ["url", "reddit.xyz"], ["user_id", 5], ["created_at", "2022-02-19 03:49:08.227542"], ["updated_at", "2022-02-19 03:49:08.227542"]]
  ↳ app/controllers/posts_controller.rb:21:in `create'
  [1m[36mPostSub Create (2.0ms)[0m  [1m[32mINSERT INTO "post_subs" ("sub_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sub_id", 1], ["post_id", 5], ["created_at", "2022-02-19 03:49:08.232828"], ["updated_at", "2022-02-19 03:49:08.232828"]]
  ↳ app/controllers/posts_controller.rb:21:in `create'
  [1m[36mPostSub Create (1.4ms)[0m  [1m[32mINSERT INTO "post_subs" ("sub_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sub_id", 5], ["post_id", 5], ["created_at", "2022-02-19 03:49:08.237007"], ["updated_at", "2022-02-19 03:49:08.237007"]]
  ↳ app/controllers/posts_controller.rb:21:in `create'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/posts_controller.rb:21:in `create'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 54ms (ActiveRecord: 18.7ms | Allocations: 15156)


Started GET "/posts/5" for ::1 at 2022-02-19 10:49:08 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 9.2ms | Allocations: 2284)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.0ms | Allocations: 4836)
Completed 200 OK in 29ms (Views: 11.5ms | ActiveRecord: 7.8ms | Allocations: 7931)


Started POST "/posts/5/upvote" for ::1 at 2022-02-19 10:49:10 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"5"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (4.0ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["value", 1], ["votable_type", "Post"], ["votable_id", 5], ["created_at", "2022-02-19 03:49:10.343346"], ["updated_at", "2022-02-19 03:49:10.343346"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 30ms (ActiveRecord: 11.2ms | Allocations: 6188)


Started GET "/posts/5" for ::1 at 2022-02-19 10:49:10 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 7.6ms | Allocations: 2277)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.8ms | Allocations: 4828)
Completed 200 OK in 29ms (Views: 12.7ms | ActiveRecord: 8.2ms | Allocations: 7942)


Started GET "/posts/5/comments/new" for ::1 at 2022-02-19 10:49:29 +0700
Processing by CommentsController#new as HTML
  Parameters: {"post_id"=>"5"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:13:in `new'
  Rendering layout layouts/application.html.erb
  Rendering comments/new.html.erb within layouts/application
  Rendered comments/new.html.erb within layouts/application (Duration: 1.1ms | Allocations: 261)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 7.8ms | Allocations: 2576)
Completed 200 OK in 20ms (Views: 9.1ms | ActiveRecord: 2.6ms | Allocations: 4634)


Started POST "/comments" for ::1 at 2022-02-19 10:49:35 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"content"=>"is this real", "post_id"=>"5"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (1.8ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "is this real"], ["user_id", 5], ["post_id", 5], ["created_at", "2022-02-19 03:49:35.951781"], ["updated_at", "2022-02-19 03:49:35.951781"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 23ms (ActiveRecord: 6.6ms | Allocations: 4524)


Started GET "/posts/5" for ::1 at 2022-02-19 10:49:36 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" = $2[0m  [["votable_type", "Comment"], ["votable_id", 58]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 87)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.7ms | Allocations: 2450)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.4ms | Allocations: 5009)
Completed 200 OK in 62ms (Views: 12.7ms | ActiveRecord: 8.8ms | Allocations: 9981)


Started POST "/posts/5/upvote" for ::1 at 2022-02-19 10:49:39 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"5"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Post"], ["votable_id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 16ms (ActiveRecord: 3.6ms | Allocations: 2896)


Started GET "/posts/5" for ::1 at 2022-02-19 10:49:39 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" = $2[0m  [["votable_type", "Comment"], ["votable_id", 58]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (2.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 87)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.2ms | Allocations: 2445)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.0ms | Allocations: 5004)
Completed 200 OK in 37ms (Views: 10.7ms | ActiveRecord: 12.2ms | Allocations: 9971)


Started GET "/comments/58" for ::1 at 2022-02-19 10:49:41 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"58"}
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 58], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.9ms | Allocations: 1168)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.3ms | Allocations: 3724)
Completed 200 OK in 26ms (Views: 12.1ms | ActiveRecord: 6.1ms | Allocations: 5565)


Started POST "/comments?reply=true" for ::1 at 2022-02-19 10:49:49 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"58", "post_id"=>"5", "content"=>"possible - we can see that"}, "reply"=>"true"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (3.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (3.4ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "possible - we can see that"], ["user_id", 5], ["post_id", 5], ["parent_id", 58], ["created_at", "2022-02-19 03:49:50.012104"], ["updated_at", "2022-02-19 03:49:50.012104"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 23ms (ActiveRecord: 11.8ms | Allocations: 4541)


Started GET "/posts/5" for ::1 at 2022-02-19 10:49:50 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (0.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Comment"], ["votable_id", 58], ["votable_id", 59]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 122)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.5ms | Allocations: 2480)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.4ms | Allocations: 5039)
Completed 200 OK in 41ms (Views: 15.2ms | ActiveRecord: 11.3ms | Allocations: 10079)


Started GET "/comments/58" for ::1 at 2022-02-19 10:49:52 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"58"}
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 58], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 3.6ms | Allocations: 1168)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 9.8ms | Allocations: 3724)
Completed 200 OK in 21ms (Views: 8.5ms | ActiveRecord: 5.2ms | Allocations: 5564)


Started POST "/comments/58/upvote" for ::1 at 2022-02-19 10:49:53 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"58"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 5], ["votable_type", "Comment"], ["votable_id", 58], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (2.7ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["value", 1], ["votable_type", "Comment"], ["votable_id", 58], ["created_at", "2022-02-19 03:49:53.277834"], ["updated_at", "2022-02-19 03:49:53.277834"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/comments/58
Completed 302 Found in 29ms (ActiveRecord: 11.6ms | Allocations: 6186)


Started GET "/comments/58" for ::1 at 2022-02-19 10:49:53 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"58"}
  [1m[36mComment Load (3.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 58], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.6ms | Allocations: 1159)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.3ms | Allocations: 3711)
Completed 200 OK in 22ms (Views: 10.4ms | ActiveRecord: 7.2ms | Allocations: 5551)


Started POST "/comments?reply=true" for ::1 at 2022-02-19 10:50:03 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"58", "post_id"=>"5", "content"=>"very nice"}, "reply"=>"true"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (3.5ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "very nice"], ["user_id", 5], ["post_id", 5], ["parent_id", 58], ["created_at", "2022-02-19 03:50:03.347511"], ["updated_at", "2022-02-19 03:50:03.347511"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 24ms (ActiveRecord: 9.4ms | Allocations: 4540)


Started GET "/posts/5" for ::1 at 2022-02-19 10:50:03 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Comment"], ["votable_id", 58], ["votable_id", 59], ["votable_id", 60]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 156)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.9ms | Allocations: 2514)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.2ms | Allocations: 5073)
Completed 200 OK in 42ms (Views: 14.6ms | ActiveRecord: 11.9ms | Allocations: 10204)


Started DELETE "/session" for ::1 at 2022-02-19 10:50:07 +0700
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "Fo3luEJuPh1gzQ"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "PV1"], ["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Update (1.4ms)[0m  [1m[33mUPDATE "users" SET "session_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["session_token", "4knN9R4G6-Bypg"], ["updated_at", "2022-02-19 03:50:07.294954"], ["id", 5]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mTRANSACTION (36.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
Redirected to http://localhost:3000/session/new
Completed 302 Found in 56ms (ActiveRecord: 44.4ms | Allocations: 4604)


Started GET "/session/new" for ::1 at 2022-02-19 10:50:07 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.4ms | Allocations: 199)
  Rendered sessions/new.html.erb within layouts/application (Duration: 2.0ms | Allocations: 566)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | Allocations: 1955)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms | Allocations: 2763)


Started GET "/subs" for ::1 at 2022-02-19 10:50:08 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 8.1ms | Allocations: 1103)
  Rendered layout layouts/application.html.erb (Duration: 11.2ms | Allocations: 2623)
Completed 200 OK in 13ms (Views: 10.8ms | ActiveRecord: 1.2ms | Allocations: 2919)


Started GET "/subs/1" for ::1 at 2022-02-19 10:50:10 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4], ["votable_id", 5]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 4.8ms | Allocations: 820)
  Rendered layout layouts/application.html.erb (Duration: 10.0ms | Allocations: 2336)
Completed 200 OK in 34ms (Views: 13.1ms | ActiveRecord: 4.5ms | Allocations: 5589)


Started GET "/posts/5" for ::1 at 2022-02-19 10:50:11 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (3.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Comment"], ["votable_id", 58], ["votable_id", 59], ["votable_id", 60]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (2.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 156)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.8ms | Allocations: 2507)
  Rendered layout layouts/application.html.erb (Duration: 15.3ms | Allocations: 3896)
Completed 200 OK in 43ms (Views: 11.5ms | ActiveRecord: 16.0ms | Allocations: 9026)


Started GET "/posts/new" for ::1 at 2022-02-19 10:50:16 +0700
Processing by PostsController#new as HTML
Redirected to http://localhost:3000/session/new
Filter chain halted as :require_current_user! rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 291)


Started GET "/session/new" for ::1 at 2022-02-19 10:50:16 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.4ms | Allocations: 188)
  Rendered sessions/new.html.erb within layouts/application (Duration: 1.4ms | Allocations: 387)
  Rendered layout layouts/application.html.erb (Duration: 4.1ms | Allocations: 1775)
Completed 200 OK in 5ms (Views: 4.9ms | ActiveRecord: 0.0ms | Allocations: 2052)


Started POST "/session" for ::1 at 2022-02-19 10:50:29 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve1", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve1"], ["LIMIT", 1]]
  ↳ app/models/user.rb:16:in `login_by_credentials'
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.1ms | Allocations: 52)
  Rendered sessions/new.html.erb within layouts/application (Duration: 0.6ms | Allocations: 239)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | Allocations: 1624)
Completed 200 OK in 286ms (Views: 4.7ms | ActiveRecord: 1.2ms | Allocations: 3029)


Started POST "/session" for ::1 at 2022-02-19 10:50:39 +0700
Processing by SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"steve2", "password"=>"[FILTERED]"}, "Login"=>"Submit"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "steve2"], ["LIMIT", 1]]
  ↳ app/models/user.rb:16:in `login_by_credentials'
Redirected to http://localhost:3000/
Completed 302 Found in 283ms (ActiveRecord: 2.2ms | Allocations: 1142)


Started GET "/" for ::1 at 2022-02-19 10:50:39 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 5.2ms | Allocations: 1103)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | Allocations: 3803)
Completed 200 OK in 17ms (Views: 13.7ms | ActiveRecord: 2.5ms | Allocations: 4099)


Started GET "/subs/1" for ::1 at 2022-02-19 10:50:43 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (4.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4], ["votable_id", 5]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.5ms | Allocations: 819)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 9.4ms | Allocations: 3513)
Completed 200 OK in 30ms (Views: 9.1ms | ActiveRecord: 9.1ms | Allocations: 6767)


Started GET "/posts/5" for ::1 at 2022-02-19 10:50:46 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Comment"], ["votable_id", 58], ["votable_id", 59], ["votable_id", 60]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 156)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.2ms | Allocations: 2514)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.3ms | Allocations: 5073)
Completed 200 OK in 42ms (Views: 14.0ms | ActiveRecord: 11.8ms | Allocations: 10204)


Started POST "/posts/5/upvote" for ::1 at 2022-02-19 10:50:51 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"5"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 2], ["votable_type", "Post"], ["votable_id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (1.3ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 2], ["value", 1], ["votable_type", "Post"], ["votable_id", 5], ["created_at", "2022-02-19 03:50:51.181086"], ["updated_at", "2022-02-19 03:50:51.181086"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 24ms (ActiveRecord: 9.4ms | Allocations: 6187)


Started GET "/posts/5" for ::1 at 2022-02-19 10:50:51 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Comment"], ["votable_id", 58], ["votable_id", 59], ["votable_id", 60]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 156)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.7ms | Allocations: 2513)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.6ms | Allocations: 5072)
Completed 200 OK in 39ms (Views: 15.4ms | ActiveRecord: 9.5ms | Allocations: 10222)


Started POST "/posts/5/upvote" for ::1 at 2022-02-19 10:50:53 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"5"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (6.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 2], ["votable_type", "Post"], ["votable_id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 17ms (ActiveRecord: 8.6ms | Allocations: 2895)


Started GET "/posts/5" for ::1 at 2022-02-19 10:50:53 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Comment"], ["votable_id", 58], ["votable_id", 59], ["votable_id", 60]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 156)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.2ms | Allocations: 2513)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.9ms | Allocations: 5071)
Completed 200 OK in 38ms (Views: 12.6ms | ActiveRecord: 10.9ms | Allocations: 10221)


Started GET "/comments/59" for ::1 at 2022-02-19 10:50:58 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"59"}
  [1m[36mComment Load (0.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 59], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 3.7ms | Allocations: 1168)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.1ms | Allocations: 3725)
Completed 200 OK in 22ms (Views: 10.9ms | ActiveRecord: 4.8ms | Allocations: 5566)


Started POST "/comments/59/downvote" for ::1 at 2022-02-19 10:51:00 +0700
Processing by CommentsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"59"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (9.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:47:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 2], ["votable_type", "Comment"], ["votable_id", 59], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in `downvote'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:58:in `downvote'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:58:in `downvote'
  [1m[36mVote Create (1.2ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 2], ["value", -1], ["votable_type", "Comment"], ["votable_id", 59], ["created_at", "2022-02-19 03:51:00.115474"], ["updated_at", "2022-02-19 03:51:00.115474"]]
  ↳ app/models/user.rb:58:in `downvote'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:58:in `downvote'
Redirected to http://localhost:3000/comments/59
Completed 302 Found in 33ms (ActiveRecord: 17.0ms | Allocations: 6185)


Started GET "/comments/59" for ::1 at 2022-02-19 10:51:00 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"59"}
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (2.8ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 59], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.2ms | Allocations: 1159)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.7ms | Allocations: 3710)
Completed 200 OK in 25ms (Views: 11.1ms | ActiveRecord: 7.3ms | Allocations: 5549)


Started POST "/comments?reply=true" for ::1 at 2022-02-19 10:51:49 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"59", "post_id"=>"5", "content"=>"where are you from "}, "reply"=>"true"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (2.4ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "where are you from "], ["user_id", 2], ["post_id", 5], ["parent_id", 59], ["created_at", "2022-02-19 03:51:49.344683"], ["updated_at", "2022-02-19 03:51:49.344683"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 20ms (ActiveRecord: 7.5ms | Allocations: 4539)


Started GET "/posts/5" for ::1 at 2022-02-19 10:51:49 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 5], ["id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5)[0m  [["votable_type", "Comment"], ["votable_id", 58], ["votable_id", 59], ["votable_id", 60], ["votable_id", 61]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 189)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.3ms | Allocations: 2547)
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.3ms | Allocations: 5106)
Completed 200 OK in 41ms (Views: 13.3ms | ActiveRecord: 12.0ms | Allocations: 10381)


Started GET "/subs" for ::1 at 2022-02-19 10:52:00 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (71.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 75.5ms | Allocations: 1103)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 82.2ms | Allocations: 3804)
Completed 200 OK in 83ms (Views: 10.3ms | ActiveRecord: 72.7ms | Allocations: 4100)


Started GET "/subs/1" for ::1 at 2022-02-19 10:54:51 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (0.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4], ["votable_id", 5]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 1.9ms | Allocations: 819)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 8.4ms | Allocations: 3514)
Completed 200 OK in 23ms (Views: 8.1ms | ActiveRecord: 4.7ms | Allocations: 6787)


Started GET "/posts/2" for ::1 at 2022-02-19 10:54:54 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 7.6ms | Allocations: 2278)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.6ms | Allocations: 4829)
Completed 200 OK in 30ms (Views: 12.0ms | ActiveRecord: 7.8ms | Allocations: 7962)


Started POST "/posts/2/upvote" for ::1 at 2022-02-19 10:54:55 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 2], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (1.3ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 2], ["value", 1], ["votable_type", "Post"], ["votable_id", 2], ["created_at", "2022-02-19 03:54:55.685399"], ["updated_at", "2022-02-19 03:54:55.685399"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/posts/2
Completed 302 Found in 31ms (ActiveRecord: 10.3ms | Allocations: 6186)


Started GET "/posts/2" for ::1 at 2022-02-19 10:54:55 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 7.0ms | Allocations: 2272)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | Allocations: 4824)
Completed 200 OK in 30ms (Views: 12.8ms | ActiveRecord: 6.8ms | Allocations: 7977)


Started POST "/posts/2/downvote" for ::1 at 2022-02-19 10:55:45 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (5.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (0.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 2], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in `downvote'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mVote Update (1.2ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 0], ["updated_at", "2022-02-19 03:55:45.671991"], ["id", 20]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:62:in `downvote'
Redirected to http://localhost:3000/posts/2
Completed 302 Found in 36ms (ActiveRecord: 15.9ms | Allocations: 7057)


Started GET "/posts/2" for ::1 at 2022-02-19 10:55:45 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 7.6ms | Allocations: 2273)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | Allocations: 4824)
Completed 200 OK in 26ms (Views: 11.0ms | ActiveRecord: 6.7ms | Allocations: 7977)


Started POST "/posts/2/downvote" for ::1 at 2022-02-19 10:56:09 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 2], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in `downvote'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mVote Update (1.2ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", -1], ["updated_at", "2022-02-19 03:56:09.899768"], ["id", 20]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:62:in `downvote'
Redirected to http://localhost:3000/posts/2
Completed 302 Found in 29ms (ActiveRecord: 10.3ms | Allocations: 7057)


Started GET "/posts/2" for ::1 at 2022-02-19 10:56:09 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 8.2ms | Allocations: 2272)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.7ms | Allocations: 4824)
Completed 200 OK in 30ms (Views: 12.1ms | ActiveRecord: 7.0ms | Allocations: 7976)


Started GET "/subs" for ::1 at 2022-02-19 10:56:31 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 9.7ms | Allocations: 1099)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.2ms | Allocations: 3793)
Completed 200 OK in 20ms (Views: 16.9ms | ActiveRecord: 2.6ms | Allocations: 4088)


Started GET "/subs/3" for ::1 at 2022-02-19 10:56:47 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Post"], ["votable_id", 3], ["votable_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 3]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 1.9ms | Allocations: 741)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.8ms | Allocations: 3436)
Completed 200 OK in 28ms (Views: 10.4ms | ActiveRecord: 6.2ms | Allocations: 6529)


Started GET "/posts/3" for ::1 at 2022-02-19 10:56:54 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mPost Load (2.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  ↳ app/models/post.rb:11:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Comment"], ["votable_id", 53], ["votable_id", 56], ["votable_id", 57]]
  ↳ app/models/post.rb:30:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 3], ["votable_type", "Post"]]
  ↳ app/models/post.rb:20:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (2.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 3]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 154)
  Rendered posts/show.html.erb within layouts/application (Duration: 13.4ms | Allocations: 2508)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.0ms | Allocations: 5067)
Completed 200 OK in 48ms (Views: 14.6ms | ActiveRecord: 13.3ms | Allocations: 10238)


Started GET "/" for ::1 at 2022-02-19 10:59:37 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 14.9ms | Allocations: 1103)
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 29.9ms | Allocations: 3805)
Completed 200 OK in 31ms (Views: 26.0ms | ActiveRecord: 4.7ms | Allocations: 4102)


  [1m[36mPost Load (0.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mComment Load (92.0ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (2.2ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (42.2ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 /* loading for inspect */ LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (2.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  [1m[36mPost Load (0.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mComment Load (49.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (3.8ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable)[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (2.1ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable) /* loading for inspect */ LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable)[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (2.6ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable) /* loading for inspect */ LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (2.5ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable) /* loading for inspect */ LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (6.3ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable)[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" /* loading for inspect */ LIMIT $2[0m  [["votable_type", "Comment"], ["LIMIT", 11]]
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" /* loading for inspect */ LIMIT $2[0m  [["votable_type", "Comment"], ["LIMIT", 11]]
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (3.9ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" GROUP BY "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."id" = $2 GROUP BY "comments"."id" LIMIT $3[0m  [["votable_type", "Comment"], ["id", 5], ["LIMIT", 1]]
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."id" = $2 GROUP BY "comments"."id" LIMIT $3[0m  [["votable_type", "Comment"], ["id", 1], ["LIMIT", 1]]
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."id" = $2 GROUP BY "comments"."id" LIMIT $3[0m  [["votable_type", "Comment"], ["id", 2], ["LIMIT", 1]]
  [1m[36mComment Load (3.2ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."id" = $2 GROUP BY "comments"."id" LIMIT $3[0m  [["votable_type", "Comment"], ["id", 8], ["LIMIT", 1]]
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."id" = $2 GROUP BY "comments"."id" LIMIT $3[0m  [["votable_type", "Comment"], ["id", 27], ["LIMIT", 1]]
  [1m[36mComment Load (3.9ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable) GROUP BY "comments"."id" /* loading for inspect */ LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (2.2ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable) GROUP BY "comments"."id" /* loading for inspect */ LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (2.2ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable) GROUP BY "comments"."id" /* loading for inspect */ LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (2.2ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id"[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id"[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id"[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id"[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (46.0ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable_id='comments.id' AND votable_type='Comment') GROUP BY "comments"."id"[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (2.6ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable_id='comments.id' AND votable_type='Comment') GROUP BY "comments"."id" /* loading for inspect */ LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable_id='comments.id' AND votable_type='Comment') GROUP BY "comments"."id"[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable_id='comments.id' AND votable_type='Comment') GROUP BY "comments"."id" /* loading for inspect */ LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (2.1ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable_id='comments.id' AND votable_type='Comment') GROUP BY "comments"."id"[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable_id='comments.id' AND votable_type='Comment') GROUP BY "comments"."id"[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (7.3ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 AND (votable_id='comments.id' AND votable_type='Comment') GROUP BY "comments"."id" /* loading for inspect */ LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id"[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id"[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id"[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (2.9ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" WHERE (comments.post_id=1) GROUP BY "comments"."id"[0m
  [1m[36mComment Load (4.8ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" WHERE (comments.post_id=1) GROUP BY "comments"."id" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" WHERE (comments.post_id=1) GROUP BY "comments"."id"[0m
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" WHERE (comments.post_id=1) GROUP BY "comments"."id" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" WHERE (comments.post_id=1) GROUP BY "comments"."id"[0m
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" WHERE (comments.post_id=1) GROUP BY "comments"."id" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" WHERE (comments.post_id=1) GROUP BY "comments"."id"[0m
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.*) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT comments.*,COUNT(votes.id) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT comments.*,SUM(votes.value) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT comments.*,SUM(votes.value) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT comments.*,SUM(votes.value) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=2) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT comments.*,SUM(votes.value) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=2) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (0.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT comments.*,SUM(votes.value) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE (comments.post_id=1)[0m
  [1m[36mComment Load (2.2ms)[0m  [1m[34mSELECT "comments"."value" FROM "comments" WHERE (comments.post_id=1)[0m
  [1m[36mComment Load (5.9ms)[0m  [1m[34mSELECT "comments"."value" FROM "comments" WHERE (comments.post_id=1) /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mComment Load (0.6ms)[0m  [1m[34mSELECT "comments"."id" FROM "comments" WHERE (comments.post_id=1)[0m
  [1m[36mComment Load (3.0ms)[0m  [1m[34mSELECT comments.*, SUM(votes.value) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT comments.id, SUM(votes.value) AS x FROM "comments" INNER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (2.4ms)[0m  [1m[34mSELECT comments.id, SUM(votes.value) AS x FROM "comments" WHERE (comments.post_id=1) /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT comments.id, SUM(votes.value) AS x FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT comments.id, SUM(votes.value) AS x FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (4.7ms)[0m  [1m[34mSELECT comments.id, SUM(votes.value) AS x FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id"[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (44.2ms)[0m  [1m[34mSELECT comments.id, SUM(votes.value) AS x FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id" ORDER BY b.x[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT comments.id, SUM(votes.value) AS x FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id" /* loading for inspect */ ORDER BY b.x LIMIT $2[0m  [["votable_type", "Comment"], ["LIMIT", 11]]
  [1m[36mComment Load (2.8ms)[0m  [1m[34mSELECT comments.id, SUM(votes.value) AS x FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id" ORDER BY "x" ASC, DESC[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (3.8ms)[0m  [1m[34mSELECT comments.id, SUM(votes.value) AS x FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id" /* loading for inspect */ ORDER BY "x" ASC, DESC LIMIT $2[0m  [["votable_type", "Comment"], ["LIMIT", 11]]
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT comments.id, SUM(votes.value) AS x FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id" ORDER BY x DESC[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (48.6ms)[0m  [1m[34mSELECT comments.id, COALESE(SUM(votes.value),0) AS x FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id" ORDER BY x DESC[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (8.5ms)[0m  [1m[34mSELECT comments.id, COALESE(SUM(votes.value),0) AS x FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id" /* loading for inspect */ ORDER BY x DESC LIMIT $2[0m  [["votable_type", "Comment"], ["LIMIT", 11]]
  [1m[36mComment Load (2.1ms)[0m  [1m[34mSELECT comments.id, COALESE(SUM(votes.value),0) AS x FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id" ORDER BY x DESC[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (2.3ms)[0m  [1m[34mSELECT comments.id, COALESE(SUM(votes.value),0) AS x FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id" /* loading for inspect */ ORDER BY x DESC LIMIT $2[0m  [["votable_type", "Comment"], ["LIMIT", 11]]
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT comments.id, COALESE(SUM(votes.value),0) AS x FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id" ORDER BY x DESC[0m  [["votable_type", "Comment"]]
  [1m[36mComment Load (3.2ms)[0m  [1m[34mSELECT comments.id, COALESCE(SUM(votes.value),0) AS x FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE (comments.post_id=1) GROUP BY "comments"."id" ORDER BY x DESC[0m  [["votable_type", "Comment"]]
Started GET "/" for ::1 at 2022-02-19 12:54:43 +0700
  [1m[35m (5.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (83.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 100.4ms | Allocations: 4363)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 128.1ms | Allocations: 13357)
Completed 200 OK in 144ms (Views: 44.4ms | ActiveRecord: 87.1ms | Allocations: 16485)


Started GET "/subs/1" for ::1 at 2022-02-19 12:54:45 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (43.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4], ["votable_id", 5]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 3.4ms | Allocations: 1347)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.7ms | Allocations: 4048)
Completed 200 OK in 96ms (Views: 11.0ms | ActiveRecord: 48.1ms | Allocations: 25307)


Started GET "/subs" for ::1 at 2022-02-19 12:54:54 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 4.0ms | Allocations: 1100)
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | Allocations: 3794)
Completed 200 OK in 17ms (Views: 11.3ms | ActiveRecord: 4.8ms | Allocations: 4090)


Started GET "/subs/2" for ::1 at 2022-02-19 12:54:55 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (7.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4)[0m  [["votable_type", "Post"], ["votable_id", 2], ["votable_id", 1], ["votable_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 2]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 5.1ms | Allocations: 779)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.6ms | Allocations: 3473)
Completed 200 OK in 31ms (Views: 10.8ms | ActiveRecord: 11.8ms | Allocations: 6675)


Started GET "/subs" for ::1 at 2022-02-19 12:55:01 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 3.9ms | Allocations: 1099)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.9ms | Allocations: 3793)
Completed 200 OK in 13ms (Views: 10.3ms | ActiveRecord: 2.2ms | Allocations: 4088)


Started GET "/subs/4" for ::1 at 2022-02-19 12:55:03 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 4]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  [1m[36mVote Load (5.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3)[0m  [["votable_type", "Post"], ["votable_id", 3], ["votable_id", 1]]
  ↳ app/models/sub.rb:10:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mCACHE Post Load (0.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 4]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 2.1ms | Allocations: 743)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.9ms | Allocations: 3437)
Completed 200 OK in 40ms (Views: 15.8ms | ActiveRecord: 8.9ms | Allocations: 6531)


Started GET "/posts/1" for ::1 at 2022-02-19 12:55:06 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mComment Load (42.9ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY x DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:32:in `vote_of_comment_by_post'
Completed 500 Internal Server Error in 81ms (ActiveRecord: 46.5ms | Allocations: 17945)



ActiveRecord::StatementInvalid - PG::UndefinedColumn: ERROR:  column "x" does not exist
LINE 1: ...nts"."post_id" = $2 GROUP BY "comments"."id" ORDER BY x DESC
                                                                 ^:
  app/models/post.rb:32:in `vote_of_comment_by_post'
  app/controllers/posts_controller.rb:6:in `show'

Started POST "/__better_errors/b9987d766c1e01d7/variables" for ::1 at 2022-02-19 12:55:06 +0700
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" /* loading for inspect */ ORDER BY x DESC LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
  [1m[36mCACHE Comment Load (0.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["post_id", 1], ["LIMIT", 11]]
Started GET "/posts/1" for ::1 at 2022-02-19 12:55:26 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (4.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mComment Load (2.3ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:32:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:21:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.6ms | Allocations: 777)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 119)
  Rendered posts/show.html.erb within layouts/application (Duration: 52.7ms | Allocations: 19333)
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 67.8ms | Allocations: 21994)
Completed 200 OK in 241ms (Views: 49.6ms | ActiveRecord: 91.5ms | Allocations: 60586)


Started GET "/posts/1" for ::1 at 2022-02-19 12:59:40 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:34:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:21:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 467)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered posts/show.html.erb within layouts/application (Duration: 36.0ms | Allocations: 18377)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 43.6ms | Allocations: 21038)
Completed 200 OK in 147ms (Views: 30.8ms | ActiveRecord: 52.2ms | Allocations: 59101)


Started GET "/subs/1" for ::1 at 2022-02-19 12:59:45 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.8ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 6.5ms | Allocations: 1380)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.3ms | Allocations: 4081)
Completed 200 OK in 31ms (Views: 12.6ms | ActiveRecord: 6.5ms | Allocations: 8847)


Started GET "/subs/1" for ::1 at 2022-02-19 12:59:47 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.9ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (3.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 6.2ms | Allocations: 1082)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.0ms | Allocations: 3776)
Completed 200 OK in 30ms (Views: 10.8ms | ActiveRecord: 9.5ms | Allocations: 6032)


Started GET "/posts/5" for ::1 at 2022-02-19 12:59:56 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 5], ["id", 2]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:34:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:21:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 189)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.5ms | Allocations: 2547)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.9ms | Allocations: 5105)
Completed 200 OK in 46ms (Views: 14.4ms | ActiveRecord: 14.6ms | Allocations: 9738)


Started POST "/posts/5/upvote" for ::1 at 2022-02-19 12:59:57 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"5"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 2], ["votable_type", "Post"], ["votable_id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 19ms (ActiveRecord: 4.9ms | Allocations: 2902)


Started GET "/posts/5" for ::1 at 2022-02-19 12:59:57 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 5], ["id", 2]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:34:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:21:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 189)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.0ms | Allocations: 2547)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.5ms | Allocations: 5105)
Completed 200 OK in 41ms (Views: 17.2ms | ActiveRecord: 11.3ms | Allocations: 9738)


Started GET "/subs" for ::1 at 2022-02-19 13:00:00 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 4.9ms | Allocations: 1103)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.6ms | Allocations: 3805)
Completed 200 OK in 20ms (Views: 17.3ms | ActiveRecord: 2.2ms | Allocations: 4101)


Started DELETE "/session" for ::1 at 2022-02-19 13:00:01 +0700
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "XFtkjF_8m3TQIg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "steve2"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Update (1.9ms)[0m  [1m[33mUPDATE "users" SET "session_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["session_token", "RI23BDOzDqJ3Mg"], ["updated_at", "2022-02-19 06:00:01.983865"], ["id", 2]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mTRANSACTION (42.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
Redirected to http://localhost:3000/session/new
Completed 302 Found in 60ms (ActiveRecord: 49.9ms | Allocations: 4508)


Started GET "/session/new" for ::1 at 2022-02-19 13:00:02 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 1.0ms | Allocations: 341)
  Rendered sessions/new.html.erb within layouts/application (Duration: 2.8ms | Allocations: 833)
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | Allocations: 2222)
Completed 200 OK in 8ms (Views: 7.8ms | ActiveRecord: 0.0ms | Allocations: 3036)


Started GET "/users/new" for ::1 at 2022-02-19 13:00:04 +0700
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 0.4ms | Allocations: 188)
  Rendered users/new.html.erb within layouts/application (Duration: 1.9ms | Allocations: 566)
  Rendered layout layouts/application.html.erb (Duration: 7.1ms | Allocations: 1954)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.0ms | Allocations: 2844)


Started POST "/users" for ::1 at 2022-02-19 13:00:14 +0700
Processing by UsersController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"username"=>"vu3", "password"=>"[FILTERED]"}, "Create"=>"Submit"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vu3"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "session_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "vu3"], ["password_digest", "$2a$12$djXVqo8lXGs8bLWXIa4vjOd9Krv.z5A1./Aj4QGQqTRMSUm77P7SO"], ["session_token", "IPjv6ZwcM9Zzsg"], ["created_at", "2022-02-19 06:00:14.481124"], ["updated_at", "2022-02-19 06:00:14.481124"]]
  ↳ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:11:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 291ms (ActiveRecord: 7.0ms | Allocations: 3763)


Started GET "/" for ::1 at 2022-02-19 13:00:14 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 3.8ms | Allocations: 1103)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | Allocations: 3803)
Completed 200 OK in 11ms (Views: 9.1ms | ActiveRecord: 2.0ms | Allocations: 4099)


Started GET "/subs/1" for ::1 at 2022-02-19 13:00:16 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.3ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 4.0ms | Allocations: 1083)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.6ms | Allocations: 3776)
Completed 200 OK in 23ms (Views: 10.1ms | ActiveRecord: 5.8ms | Allocations: 6031)


Started GET "/posts/4" for ::1 at 2022-02-19 13:00:20 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 4], ["id", 5]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 4]]
  ↳ app/models/post.rb:34:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:21:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 2.2ms | Allocations: 874)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.6ms | Allocations: 3788)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.8ms | Allocations: 6346)
Completed 200 OK in 49ms (Views: 16.0ms | ActiveRecord: 13.1ms | Allocations: 12102)


Started POST "/posts/4/upvote" for ::1 at 2022-02-19 13:00:21 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 6], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (2.8ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 6], ["value", 1], ["votable_type", "Post"], ["votable_id", 4], ["created_at", "2022-02-19 06:00:22.012216"], ["updated_at", "2022-02-19 06:00:22.012216"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 32ms (ActiveRecord: 10.9ms | Allocations: 8001)


Started GET "/posts/4" for ::1 at 2022-02-19 13:00:22 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 4], ["id", 5]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 4]]
  ↳ app/models/post.rb:34:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:21:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.4ms | Allocations: 874)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.3ms | Allocations: 3783)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.6ms | Allocations: 6342)
Completed 200 OK in 42ms (Views: 16.7ms | ActiveRecord: 11.1ms | Allocations: 12118)


Started GET "/subs" for ::1 at 2022-02-19 13:00:23 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 6.9ms | Allocations: 1103)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.4ms | Allocations: 3804)
Completed 200 OK in 20ms (Views: 16.7ms | ActiveRecord: 2.5ms | Allocations: 4101)


Started GET "/subs/1" for ::1 at 2022-02-19 13:00:25 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (0.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.4ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 4.3ms | Allocations: 1083)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.4ms | Allocations: 3776)
Completed 200 OK in 23ms (Views: 11.0ms | ActiveRecord: 5.8ms | Allocations: 6031)


Started GET "/subs/1" for ::1 at 2022-02-19 13:00:58 +0700
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (3.6ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 8.3ms | Allocations: 1933)
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 88.5ms | Allocations: 13284)
Completed 200 OK in 208ms (Views: 76.9ms | ActiveRecord: 53.5ms | Allocations: 52574)


Started GET "/posts/5" for ::1 at 2022-02-19 13:01:11 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 5], ["id", 2]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:34:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:21:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.1ms | Allocations: 518)
  Rendered posts/show.html.erb within layouts/application (Duration: 15.0ms | Allocations: 8385)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.8ms | Allocations: 10947)
Completed 200 OK in 84ms (Views: 19.8ms | ActiveRecord: 23.6ms | Allocations: 33910)


Started POST "/posts/5/downvote" for ::1 at 2022-02-19 13:01:13 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"5"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 6], ["votable_type", "Post"], ["votable_id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in `downvote'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:58:in `downvote'
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:58:in `downvote'
  [1m[36mVote Create (1.5ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 6], ["value", -1], ["votable_type", "Post"], ["votable_id", 5], ["created_at", "2022-02-19 06:01:13.447419"], ["updated_at", "2022-02-19 06:01:13.447419"]]
  ↳ app/models/user.rb:58:in `downvote'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:58:in `downvote'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 35ms (ActiveRecord: 12.4ms | Allocations: 8240)


Started GET "/posts/5" for ::1 at 2022-02-19 13:01:13 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 5], ["id", 2]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mComment Load (2.9ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:34:in `vote_of_comment_by_post'
  [1m[36mVote Load (3.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:21:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 191)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.8ms | Allocations: 2548)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 23.9ms | Allocations: 5108)
Completed 200 OK in 57ms (Views: 21.1ms | ActiveRecord: 15.4ms | Allocations: 9764)


Started GET "/subs" for ::1 at 2022-02-19 13:01:21 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 5.2ms | Allocations: 1262)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.5ms | Allocations: 3962)
Completed 200 OK in 16ms (Views: 13.4ms | ActiveRecord: 2.3ms | Allocations: 4388)


Started GET "/subs/1" for ::1 at 2022-02-19 13:01:23 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (3.7ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" WHERE "post_subs"."sub_id" = $1[0m  [["sub_id", 1]]
  ↳ app/views/subs/show.html.erb:15
  Rendered subs/show.html.erb within layouts/application (Duration: 3.6ms | Allocations: 1084)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.0ms | Allocations: 3777)
Completed 200 OK in 30ms (Views: 12.5ms | ActiveRecord: 7.6ms | Allocations: 6035)


  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" ORDER BY "subs"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPost Load (2.8ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
Started GET "/subs/1" for ::1 at 2022-02-19 13:08:04 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (5.7ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  Rendered subs/show.html.erb within layouts/application (Duration: 4.4ms | Allocations: 3297)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | Allocations: 3383)
Completed 500 Internal Server Error in 120ms (ActiveRecord: 59.4ms | Allocations: 29325)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check <h1><%= @sub.title %></h1>
<h2>Description</h2>
<p>
<%= @sub.description %>
</p>
<br>
<a href="<%= new_sub_url %>">Make a new Sub</a>
<h3>all the posts in this sub</h2>
<ul>
    <% @vote_of_posts.each do |post,votes| %>
    <li>
        (<%= votes] %>)<a href="<%= post_url(post) %>"><%= post.title %></a>
    </li>
    <% end %>
</ul>:
  app/controllers/subs_controller.rb:10:in `show'

Started POST "/__better_errors/499a248c5f019454/variables" for ::1 at 2022-02-19 13:08:04 +0700
Started POST "/__better_errors/499a248c5f019454/eval" for ::1 at 2022-02-19 13:08:56 +0700
Started GET "/subs/1" for ::1 at 2022-02-19 13:09:43 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.6ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (3.2ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  Rendered subs/show.html.erb within layouts/application (Duration: 2.5ms | Allocations: 2713)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | Allocations: 2798)
Completed 500 Internal Server Error in 20ms (ActiveRecord: 4.7ms | Allocations: 5786)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check <h1><%= @sub.title %></h1>
<h2>Description</h2>
<p>
<%= @sub.description %>
</p>
<br>
<a href="<%= new_sub_url %>">Make a new Sub</a>
<h3>all the posts in this sub</h3>
<ul>
    <% @vote_of_posts.each do |post,votes| %>
    <li>
        (<%= votes] %>)<a href="<%= post_url(post) %>"><%= post.title %></a>
    </li>
    <% end %>
</ul>:
  app/controllers/subs_controller.rb:10:in `show'

Started POST "/__better_errors/ff7ace5aa48702ba/variables" for ::1 at 2022-02-19 13:09:44 +0700
Started GET "/" for ::1 at 2022-02-19 13:09:49 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 17.6ms | Allocations: 1260)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 58.2ms | Allocations: 15239)
Completed 200 OK in 67ms (Views: 62.4ms | ActiveRecord: 3.2ms | Allocations: 15663)


Started GET "/subs/1" for ::1 at 2022-02-19 13:09:50 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (3.2ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  Rendered subs/show.html.erb within layouts/application (Duration: 4.6ms | Allocations: 2699)
  Rendered layout layouts/application.html.erb (Duration: 5.4ms | Allocations: 2784)
Completed 500 Internal Server Error in 24ms (ActiveRecord: 5.0ms | Allocations: 5015)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check <h1><%= @sub.title %></h1>
<h2>Description</h2>
<p>
<%= @sub.description %>
</p>
<br>
<a href="<%= new_sub_url %>">Make a new Sub</a>
<h3>all the posts in this sub</h3>
<ul>
    <% @vote_of_posts.each do |post,votes| %>
    <li>
        (<%= votes] %>)<a href="<%= post_url(post) %>"><%= post.title %></a>
    </li>
    <% end %>
</ul>:
  app/controllers/subs_controller.rb:10:in `show'

Started POST "/__better_errors/28890e3ea010b9ae/variables" for ::1 at 2022-02-19 13:09:51 +0700
Started GET "/subs/1" for ::1 at 2022-02-19 13:10:55 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (0.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (3.3ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  Rendered subs/show.html.erb within layouts/application (Duration: 2.5ms | Allocations: 447)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.0ms | Allocations: 3419)
Completed 200 OK in 27ms (Views: 14.7ms | ActiveRecord: 5.4ms | Allocations: 6451)


Started GET "/posts/5" for ::1 at 2022-02-19 13:11:04 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mUser Load (11.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 5], ["id", 2]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mComment Load (2.8ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:34:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:21:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (5.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.2ms | Allocations: 502)
  Rendered posts/show.html.erb within layouts/application (Duration: 27.1ms | Allocations: 8329)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 33.5ms | Allocations: 10888)
Completed 200 OK in 90ms (Views: 27.8ms | ActiveRecord: 27.3ms | Allocations: 30638)


Started POST "/posts/5/upvote" for ::1 at 2022-02-19 13:11:05 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"5"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 6], ["votable_type", "Post"], ["votable_id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mVote Update (1.5ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 0], ["updated_at", "2022-02-19 06:11:05.864768"], ["id", 22]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:47:in `upvote'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 43ms (ActiveRecord: 13.5ms | Allocations: 9072)


Started GET "/posts/5" for ::1 at 2022-02-19 13:11:05 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 5], ["id", 2]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:34:in `vote_of_comment_by_post'
  [1m[36mVote Load (3.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:21:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 189)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.1ms | Allocations: 2546)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.9ms | Allocations: 5105)
Completed 200 OK in 37ms (Views: 11.6ms | ActiveRecord: 13.6ms | Allocations: 9757)


Started GET "/posts/5" for ::1 at 2022-02-19 13:11:08 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 5], ["id", 2]]
  ↳ app/models/post.rb:12:in `comment_by_parent_id'
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:34:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:21:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 189)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.3ms | Allocations: 2546)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.6ms | Allocations: 5104)
Completed 200 OK in 42ms (Views: 14.4ms | ActiveRecord: 11.8ms | Allocations: 9757)


Started GET "/subs/1" for ::1 at 2022-02-19 13:11:10 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.8ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  Rendered subs/show.html.erb within layouts/application (Duration: 1.2ms | Allocations: 209)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 7.8ms | Allocations: 2910)
Completed 200 OK in 20ms (Views: 7.6ms | ActiveRecord: 4.7ms | Allocations: 5166)


  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23], ["votable_id", 54], ["votable_id", 55]]
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23], ["votable_id", 54], ["votable_id", 55]]
  [1m[36mComment Load (0.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."post_id" = $1[0m  [["post_id", 1]]
  [1m[36mVote Load (2.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_type" = $1 AND "votes"."votable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26)[0m  [["votable_type", "Comment"], ["votable_id", 1], ["votable_id", 2], ["votable_id", 3], ["votable_id", 4], ["votable_id", 5], ["votable_id", 6], ["votable_id", 7], ["votable_id", 8], ["votable_id", 9], ["votable_id", 10], ["votable_id", 11], ["votable_id", 12], ["votable_id", 13], ["votable_id", 14], ["votable_id", 15], ["votable_id", 16], ["votable_id", 17], ["votable_id", 18], ["votable_id", 19], ["votable_id", 20], ["votable_id", 21], ["votable_id", 22], ["votable_id", 23], ["votable_id", 54], ["votable_id", 55]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPost Load (0.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mComment Load (44.4ms)[0m  [1m[34mSELECT comments.*,user*username AS author,COALESCE(SUM(votes.value),0) AS num FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (3.1ms)[0m  [1m[34mSELECT comments.*,user*username AS author,COALESCE(SUM(votes.value),0) AS num FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mPost Load (0.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mComment Load (2.8ms)[0m  [1m[34mSELECT comments.*,users*username AS author,COALESCE(SUM(votes.value),0) AS num FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPost Load (0.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mComment Load (3.7ms)[0m  [1m[34mSELECT comments.*,users.username AS author,COALESCE(SUM(votes.value),0) AS num FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mPost Load (0.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mPost Load (0.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" ORDER BY "posts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (3.1ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mComment Load (2.8ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num, a1.*,users.username as x FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num, a1.*,users.username as x FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" /* loading for inspect */ ORDER BY num DESC LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num, a1.*,users.username as x FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (2.6ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num, *,users.username as x FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (3.2ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num, *,users.username as x FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" /* loading for inspect */ ORDER BY num DESC LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (2.3ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num, *,users.username as x FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (2.1ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num, users.username as x FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (6.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num, users.username as x FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" /* loading for inspect */ ORDER BY num DESC LIMIT $3[0m  [["votable_type", "Comment"], ["post_id", 1], ["LIMIT", 11]]
  [1m[36mComment Load (2.4ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num, users.username as x FROM "comments" INNER JOIN "users" ON "users"."id" = "comments"."user_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mComment Load (5.5ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 5], ["id", 2]]
Started GET "/subs/1" for ::1 at 2022-02-19 13:37:21 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (4.3ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  Rendered subs/show.html.erb within layouts/application (Duration: 1.3ms | Allocations: 215)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.1ms | Allocations: 8728)
Completed 200 OK in 135ms (Views: 21.1ms | ActiveRecord: 23.8ms | Allocations: 34085)


Started GET "/posts/4" for ::1 at 2022-02-19 13:37:23 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.4ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 4]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 4]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 4], ["id", 5]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 4]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.2ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 91)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 1.4ms | Allocations: 873)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered posts/show.html.erb within layouts/application (Duration: 16.0ms | Allocations: 8620)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 22.3ms | Allocations: 11179)
Completed 200 OK in 72ms (Views: 19.3ms | ActiveRecord: 10.6ms | Allocations: 32957)


Started GET "/comments/25" for ::1 at 2022-02-19 13:37:31 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"25"}
  [1m[36mComment Load (1.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (2.0ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 6.8ms | Allocations: 1613)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | Allocations: 4169)
Completed 200 OK in 33ms (Views: 15.4ms | ActiveRecord: 6.7ms | Allocations: 6723)


Started POST "/comments/25/upvote" for ::1 at 2022-02-19 13:37:33 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"25"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 6], ["votable_type", "Comment"], ["votable_id", 25], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (1.6ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 6], ["value", 1], ["votable_type", "Comment"], ["votable_id", 25], ["created_at", "2022-02-19 06:37:33.350896"], ["updated_at", "2022-02-19 06:37:33.350896"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/comments/25
Completed 302 Found in 38ms (ActiveRecord: 16.4ms | Allocations: 8005)


Started GET "/comments/25" for ::1 at 2022-02-19 13:37:33 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"25"}
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.3ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 25], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 5.4ms | Allocations: 1158)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.9ms | Allocations: 3710)
Completed 200 OK in 21ms (Views: 11.0ms | ActiveRecord: 5.0ms | Allocations: 5550)


Started POST "/comments?reply=true" for ::1 at 2022-02-19 13:37:36 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"25", "post_id"=>"4", "content"=>"indeed"}, "reply"=>"true"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (1.6ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "indeed"], ["user_id", 6], ["post_id", 4], ["parent_id", 25], ["created_at", "2022-02-19 06:37:36.960388"], ["updated_at", "2022-02-19 06:37:36.960388"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (32.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 52ms (ActiveRecord: 37.0ms | Allocations: 4709)


Started GET "/posts/4" for ::1 at 2022-02-19 13:37:37 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.6ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 4]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 4]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3, $4)[0m  [["id", 4], ["id", 1], ["id", 5], ["id", 6]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 4]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 155)
  Rendered comments/_comment.html.erb (Duration: 1.0ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 2.3ms | Allocations: 873)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 14.8ms | Allocations: 3823)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 22.7ms | Allocations: 6382)
Completed 200 OK in 49ms (Views: 19.2ms | ActiveRecord: 11.3ms | Allocations: 13538)


Started GET "/subs" for ::1 at 2022-02-19 13:38:21 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 8.7ms | Allocations: 1260)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.9ms | Allocations: 3961)
Completed 200 OK in 18ms (Views: 14.5ms | ActiveRecord: 2.8ms | Allocations: 4387)


Started GET "/subs/2" for ::1 at 2022-02-19 13:38:23 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 2]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  Rendered subs/show.html.erb within layouts/application (Duration: 0.7ms | Allocations: 174)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 7.5ms | Allocations: 2868)
Completed 200 OK in 21ms (Views: 7.9ms | ActiveRecord: 4.7ms | Allocations: 5103)


Started GET "/posts/2" for ::1 at 2022-02-19 13:38:24 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.3ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 2]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 2]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 2]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (2.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 9.0ms | Allocations: 2283)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.5ms | Allocations: 4839)
Completed 200 OK in 47ms (Views: 12.6ms | ActiveRecord: 10.6ms | Allocations: 9280)


Started POST "/posts/2/downvote" for ::1 at 2022-02-19 13:38:27 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 6], ["votable_type", "Post"], ["votable_id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in `downvote'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:58:in `downvote'
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:58:in `downvote'
  [1m[36mVote Create (1.4ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 6], ["value", -1], ["votable_type", "Post"], ["votable_id", 2], ["created_at", "2022-02-19 06:38:27.472477"], ["updated_at", "2022-02-19 06:38:27.472477"]]
  ↳ app/models/user.rb:58:in `downvote'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:58:in `downvote'
Redirected to http://localhost:3000/posts/2
Completed 302 Found in 32ms (ActiveRecord: 9.1ms | Allocations: 6189)


Started GET "/posts/2" for ::1 at 2022-02-19 13:38:27 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 2]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 2]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 2]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 2], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 2]]
  ↳ app/views/posts/show.html.erb:16
  Rendered posts/show.html.erb within layouts/application (Duration: 10.7ms | Allocations: 2272)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.0ms | Allocations: 4824)
Completed 200 OK in 35ms (Views: 13.2ms | ActiveRecord: 9.2ms | Allocations: 9285)


Started GET "/subs" for ::1 at 2022-02-19 13:38:28 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 5.4ms | Allocations: 1099)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 14.9ms | Allocations: 3793)
Completed 200 OK in 16ms (Views: 13.6ms | ActiveRecord: 2.1ms | Allocations: 4088)


Started GET "/subs/3" for ::1 at 2022-02-19 13:38:30 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.2ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 3]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  Rendered subs/show.html.erb within layouts/application (Duration: 0.6ms | Allocations: 141)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 7.1ms | Allocations: 2836)
Completed 200 OK in 20ms (Views: 6.6ms | ActiveRecord: 4.7ms | Allocations: 5054)


Started GET "/posts/1" for ::1 at 2022-02-19 13:38:32 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 5], ["id", 2]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 1.1ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 1.4ms | Allocations: 464)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.9ms | Allocations: 3600)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.9ms | Allocations: 6158)
Completed 200 OK in 44ms (Views: 15.2ms | ActiveRecord: 9.0ms | Allocations: 12992)


Started POST "/posts/1/upvote" for ::1 at 2022-02-19 13:38:36 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"1"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 6], ["votable_type", "Post"], ["votable_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (1.2ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 6], ["value", 1], ["votable_type", "Post"], ["votable_id", 1], ["created_at", "2022-02-19 06:38:36.201026"], ["updated_at", "2022-02-19 06:38:36.201026"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 29ms (ActiveRecord: 10.8ms | Allocations: 6188)


Started GET "/posts/1" for ::1 at 2022-02-19 13:38:36 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 5], ["id", 2]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 1.8ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 1.6ms | Allocations: 464)
  Rendered posts/show.html.erb within layouts/application (Duration: 13.4ms | Allocations: 3605)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 24.2ms | Allocations: 6164)
Completed 200 OK in 49ms (Views: 20.8ms | ActiveRecord: 9.5ms | Allocations: 13020)


Started GET "/comments/12" for ::1 at 2022-02-19 13:38:46 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 12], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.8ms | Allocations: 1168)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.2ms | Allocations: 3725)
Completed 200 OK in 26ms (Views: 11.7ms | ActiveRecord: 5.3ms | Allocations: 5565)


Started POST "/comments/12/upvote" for ::1 at 2022-02-19 13:38:47 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"12"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (2.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 6], ["votable_type", "Comment"], ["votable_id", 12], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (1.4ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 6], ["value", 1], ["votable_type", "Comment"], ["votable_id", 12], ["created_at", "2022-02-19 06:38:47.672167"], ["updated_at", "2022-02-19 06:38:47.672167"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/comments/12
Completed 302 Found in 32ms (ActiveRecord: 12.1ms | Allocations: 6186)


Started GET "/comments/12" for ::1 at 2022-02-19 13:38:47 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 12], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 3.9ms | Allocations: 1159)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.7ms | Allocations: 3711)
Completed 200 OK in 23ms (Views: 12.4ms | ActiveRecord: 4.3ms | Allocations: 5550)


Started POST "/comments?reply=true" for ::1 at 2022-02-19 13:38:53 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"12", "post_id"=>"1", "content"=>"what is that?"}, "reply"=>"true"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (2.0ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "what is that?"], ["user_id", 6], ["post_id", 1], ["parent_id", 12], ["created_at", "2022-02-19 06:38:53.664042"], ["updated_at", "2022-02-19 06:38:53.664042"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 25ms (ActiveRecord: 7.0ms | Allocations: 4543)


Started GET "/posts/1" for ::1 at 2022-02-19 13:38:53 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.4ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3, $4)[0m  [["id", 1], ["id", 5], ["id", 6], ["id", 2]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 1.4ms | Allocations: 430)
  Rendered comments/_comment.html.erb (Duration: 1.4ms | Allocations: 497)
  Rendered posts/show.html.erb within layouts/application (Duration: 14.5ms | Allocations: 3638)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 22.6ms | Allocations: 6196)
Completed 200 OK in 53ms (Views: 20.7ms | ActiveRecord: 10.4ms | Allocations: 13141)


Started GET "/comments/1" for ::1 at 2022-02-19 13:39:13 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 6.2ms | Allocations: 1168)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | Allocations: 3724)
Completed 200 OK in 29ms (Views: 14.8ms | ActiveRecord: 4.4ms | Allocations: 5564)


Started POST "/comments/1/upvote" for ::1 at 2022-02-19 13:39:14 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"1"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (3.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 6], ["votable_type", "Comment"], ["votable_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (1.2ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 6], ["value", 1], ["votable_type", "Comment"], ["votable_id", 1], ["created_at", "2022-02-19 06:39:14.498859"], ["updated_at", "2022-02-19 06:39:14.498859"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/comments/1
Completed 302 Found in 39ms (ActiveRecord: 11.4ms | Allocations: 6189)


Started GET "/comments/1" for ::1 at 2022-02-19 13:39:14 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mComment Load (5.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (3.5ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (4.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 7.8ms | Allocations: 1159)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.2ms | Allocations: 3711)
Completed 200 OK in 65ms (Views: 11.6ms | ActiveRecord: 15.3ms | Allocations: 5552)


Started POST "/comments?reply=true" for ::1 at 2022-02-19 13:39:23 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"1", "post_id"=>"1", "content"=>"good"}, "reply"=>"true"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (3.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (1.4ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "good"], ["user_id", 6], ["post_id", 1], ["parent_id", 1], ["created_at", "2022-02-19 06:39:23.516120"], ["updated_at", "2022-02-19 06:39:23.516120"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 25ms (ActiveRecord: 10.1ms | Allocations: 4540)


Started GET "/posts/1" for ::1 at 2022-02-19 13:39:23 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.1ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3, $4)[0m  [["id", 1], ["id", 5], ["id", 6], ["id", 2]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.9ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.9ms | Allocations: 534)
  Rendered comments/_comment.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 430)
  Rendered posts/show.html.erb within layouts/application (Duration: 10.5ms | Allocations: 3674)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.4ms | Allocations: 6233)
Completed 200 OK in 61ms (Views: 14.7ms | ActiveRecord: 10.2ms | Allocations: 13238)


Started GET "/comments/64" for ::1 at 2022-02-19 13:39:43 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"64"}
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 64], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 3.8ms | Allocations: 1168)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 9.8ms | Allocations: 3724)
Completed 200 OK in 21ms (Views: 8.6ms | ActiveRecord: 5.0ms | Allocations: 5564)


Started POST "/comments/64/upvote" for ::1 at 2022-02-19 13:39:44 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"64"}
  [1m[36mUser Load (74.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (2.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 6], ["votable_type", "Comment"], ["votable_id", 64], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (21.8ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 6], ["value", 1], ["votable_type", "Comment"], ["votable_id", 64], ["created_at", "2022-02-19 06:39:44.578510"], ["updated_at", "2022-02-19 06:39:44.578510"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/comments/64
Completed 302 Found in 128ms (ActiveRecord: 108.8ms | Allocations: 6186)


Started GET "/comments/64" for ::1 at 2022-02-19 13:39:44 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"64"}
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 64], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (2.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 5.4ms | Allocations: 1159)
  [1m[36mUser Load (22.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 37.4ms | Allocations: 3711)
Completed 200 OK in 74ms (Views: 13.9ms | ActiveRecord: 28.3ms | Allocations: 5550)


Started POST "/comments?reply=true" for ::1 at 2022-02-19 13:39:50 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"64", "post_id"=>"1", "content"=>"i like it sort"}, "reply"=>"true"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (0.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (2.6ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "i like it sort"], ["user_id", 6], ["post_id", 1], ["parent_id", 64], ["created_at", "2022-02-19 06:39:50.435352"], ["updated_at", "2022-02-19 06:39:50.435352"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (42.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 62ms (ActiveRecord: 51.2ms | Allocations: 4540)


Started GET "/posts/1" for ::1 at 2022-02-19 13:39:50 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3, $4)[0m  [["id", 1], ["id", 6], ["id", 2], ["id", 5]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 1]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 1], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 1]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 1.1ms | Allocations: 564)
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 430)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.3ms | Allocations: 3705)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.0ms | Allocations: 6264)
Completed 200 OK in 42ms (Views: 14.9ms | ActiveRecord: 9.5ms | Allocations: 13324)


Started GET "/subs" for ::1 at 2022-02-19 13:40:09 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 4.2ms | Allocations: 1103)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.5ms | Allocations: 3805)
Completed 200 OK in 18ms (Views: 14.9ms | ActiveRecord: 2.3ms | Allocations: 4102)


Started GET "/subs/1" for ::1 at 2022-02-19 13:40:11 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.0ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  Rendered subs/show.html.erb within layouts/application (Duration: 0.9ms | Allocations: 206)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 8.6ms | Allocations: 2901)
Completed 200 OK in 18ms (Views: 8.5ms | ActiveRecord: 4.2ms | Allocations: 5157)


Started GET "/posts/5" for ::1 at 2022-02-19 13:40:16 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (1.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (4.2ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 5], ["id", 2]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 189)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.7ms | Allocations: 2547)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.8ms | Allocations: 5105)
Completed 200 OK in 46ms (Views: 15.0ms | ActiveRecord: 12.0ms | Allocations: 10698)


Started POST "/posts/5/upvote" for ::1 at 2022-02-19 13:40:17 +0700
Processing by PostsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"5"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:55:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 6], ["votable_type", "Post"], ["votable_id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mVote Update (1.3ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 1], ["updated_at", "2022-02-19 06:40:17.676239"], ["id", 22]]
  ↳ app/models/user.rb:47:in `upvote'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:47:in `upvote'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 28ms (ActiveRecord: 10.6ms | Allocations: 7227)


Started GET "/posts/5" for ::1 at 2022-02-19 13:40:17 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.9ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 5], ["id", 2]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 189)
  Rendered posts/show.html.erb within layouts/application (Duration: 9.1ms | Allocations: 2547)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 18.1ms | Allocations: 5106)
Completed 200 OK in 40ms (Views: 15.0ms | ActiveRecord: 9.6ms | Allocations: 10699)


Started GET "/subs" for ::1 at 2022-02-19 13:40:18 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 4.7ms | Allocations: 1103)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 16.1ms | Allocations: 3805)
Completed 200 OK in 17ms (Views: 13.9ms | ActiveRecord: 2.9ms | Allocations: 4102)


Started GET "/subs/1" for ::1 at 2022-02-19 13:40:20 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.9ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  Rendered subs/show.html.erb within layouts/application (Duration: 1.0ms | Allocations: 206)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | Allocations: 2900)
Completed 200 OK in 19ms (Views: 9.1ms | ActiveRecord: 4.0ms | Allocations: 5155)


Started GET "/posts/4" for ::1 at 2022-02-19 13:40:22 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (3.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 4]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 4]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3, $4)[0m  [["id", 4], ["id", 1], ["id", 5], ["id", 6]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 4]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 155)
  Rendered comments/_comment.html.erb (Duration: 0.6ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 1.5ms | Allocations: 873)
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 11.8ms | Allocations: 3818)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.1ms | Allocations: 6377)
Completed 200 OK in 48ms (Views: 16.9ms | ActiveRecord: 10.5ms | Allocations: 13532)


Started POST "/posts/4/downvote" for ::1 at 2022-02-19 13:40:24 +0700
Processing by PostsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (2.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:61:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.0ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 6], ["votable_type", "Post"], ["votable_id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in `downvote'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mVote Update (1.2ms)[0m  [1m[33mUPDATE "votes" SET "value" = $1, "updated_at" = $2 WHERE "votes"."id" = $3[0m  [["value", 0], ["updated_at", "2022-02-19 06:40:24.211276"], ["id", 21]]
  ↳ app/models/user.rb:62:in `downvote'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:62:in `downvote'
Redirected to http://localhost:3000/posts/4
Completed 302 Found in 31ms (ActiveRecord: 11.9ms | Allocations: 7061)


Started GET "/posts/4" for ::1 at 2022-02-19 13:40:24 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mPost Load (1.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.8ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 4]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 4]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3, $4)[0m  [["id", 4], ["id", 1], ["id", 5], ["id", 6]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 4]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 4], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 4]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.8ms | Allocations: 155)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 120)
  Rendered comments/_comment.html.erb (Duration: 2.4ms | Allocations: 873)
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 13.0ms | Allocations: 3818)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 19.7ms | Allocations: 6377)
Completed 200 OK in 45ms (Views: 16.7ms | ActiveRecord: 8.9ms | Allocations: 13533)


Started GET "/subs" for ::1 at 2022-02-19 13:40:25 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (1.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 4.5ms | Allocations: 1103)
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 12.9ms | Allocations: 3804)
Completed 200 OK in 14ms (Views: 10.5ms | ActiveRecord: 3.1ms | Allocations: 4100)


Started GET "/subs/1" for ::1 at 2022-02-19 13:40:27 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSub Load (1.3ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (2.4ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 1]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  Rendered subs/show.html.erb within layouts/application (Duration: 0.5ms | Allocations: 206)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 6.6ms | Allocations: 2900)
Completed 200 OK in 23ms (Views: 7.4ms | ActiveRecord: 4.8ms | Allocations: 5155)


Started GET "/posts/5" for ::1 at 2022-02-19 13:43:26 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (3.1ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 5], ["id", 2]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (0.9ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 1.4ms | Allocations: 501)
  Rendered posts/show.html.erb within layouts/application (Duration: 45.5ms | Allocations: 18270)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 56.1ms | Allocations: 21199)
Completed 200 OK in 177ms (Views: 43.9ms | ActiveRecord: 61.5ms | Allocations: 60056)


Started GET "/posts/5/comments/new" for ::1 at 2022-02-19 13:43:37 +0700
Processing by CommentsController#new as HTML
  Parameters: {"post_id"=>"5"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:13:in `new'
  Rendering layout layouts/application.html.erb
  Rendering comments/new.html.erb within layouts/application
  Rendered comments/new.html.erb within layouts/application (Duration: 2.3ms | Allocations: 260)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | Allocations: 2575)
Completed 200 OK in 28ms (Views: 12.3ms | ActiveRecord: 4.3ms | Allocations: 5262)


Started POST "/comments" for ::1 at 2022-02-19 13:43:44 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"content"=>"hey nod bad huh", "post_id"=>"5"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (2.7ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "hey nod bad huh"], ["user_id", 6], ["post_id", 5], ["created_at", "2022-02-19 06:43:44.445109"], ["updated_at", "2022-02-19 06:43:44.445109"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 23ms (ActiveRecord: 7.5ms | Allocations: 4685)


Started GET "/posts/5" for ::1 at 2022-02-19 13:43:44 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (2.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (1.7ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 5], ["id", 2], ["id", 6]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.5ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.4ms | Allocations: 189)
  Rendered comments/_comment.html.erb (Duration: 0.2ms | Allocations: 86)
  Rendered posts/show.html.erb within layouts/application (Duration: 8.4ms | Allocations: 2713)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 15.6ms | Allocations: 5272)
Completed 200 OK in 43ms (Views: 12.7ms | ActiveRecord: 11.1ms | Allocations: 10954)


Started GET "/comments/66" for ::1 at 2022-02-19 13:43:48 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"66"}
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 66], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (3.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 6.5ms | Allocations: 1435)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 13.9ms | Allocations: 3991)
Completed 200 OK in 25ms (Views: 11.6ms | ActiveRecord: 6.4ms | Allocations: 6085)


Started POST "/comments/66/upvote" for ::1 at 2022-02-19 13:43:50 +0700
Processing by CommentsController#upvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"66"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:41:in `upvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (2.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 6], ["votable_type", "Comment"], ["votable_id", 66], ["LIMIT", 1]]
  ↳ app/models/user.rb:41:in `upvote'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mVote Create (1.8ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 6], ["value", 1], ["votable_type", "Comment"], ["votable_id", 66], ["created_at", "2022-02-19 06:43:50.610852"], ["updated_at", "2022-02-19 06:43:50.610852"]]
  ↳ app/models/user.rb:43:in `upvote'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:43:in `upvote'
Redirected to http://localhost:3000/comments/66
Completed 302 Found in 31ms (ActiveRecord: 10.4ms | Allocations: 8001)


Started GET "/comments/66" for ::1 at 2022-02-19 13:43:50 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"66"}
  [1m[36mComment Load (0.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.7ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 66], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (2.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.7ms | Allocations: 1159)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.5ms | Allocations: 3710)
Completed 200 OK in 20ms (Views: 8.4ms | ActiveRecord: 5.3ms | Allocations: 5550)


Started GET "/subs" for ::1 at 2022-02-19 13:43:55 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 11.9ms | Allocations: 1258)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 21.9ms | Allocations: 3959)
Completed 200 OK in 26ms (Views: 22.1ms | ActiveRecord: 3.2ms | Allocations: 4839)


Started GET "/subs/5" for ::1 at 2022-02-19 13:43:58 +0700
Processing by SubsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mSub Load (3.1ms)[0m  [1m[34mSELECT "subs".* FROM "subs" WHERE "subs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/subs_controller.rb:8:in `show'
  [1m[36mPost Load (1.7ms)[0m  [1m[34mSELECT posts.*,COALESCE(SUM(votes.value),0) AS num FROM "posts" INNER JOIN "post_subs" ON "posts"."id" = "post_subs"."post_id" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "posts"."id" WHERE "post_subs"."sub_id" = $2 GROUP BY "posts"."id" ORDER BY num DESC[0m  [["votable_type", "Post"], ["sub_id", 5]]
  ↳ app/models/sub.rb:14:in `vote_of_post_by_sub'
  Rendering layout layouts/application.html.erb
  Rendering subs/show.html.erb within layouts/application
  Rendered subs/show.html.erb within layouts/application (Duration: 2.8ms | Allocations: 346)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.2ms | Allocations: 3048)
Completed 200 OK in 29ms (Views: 11.0ms | ActiveRecord: 5.9ms | Allocations: 7727)


Started GET "/posts/5" for ::1 at 2022-02-19 13:43:59 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.2ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 5], ["id", 6], ["id", 2]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (2.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.4ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 189)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 85)
  Rendered posts/show.html.erb within layouts/application (Duration: 12.2ms | Allocations: 2712)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.1ms | Allocations: 5270)
Completed 200 OK in 53ms (Views: 17.0ms | ActiveRecord: 11.0ms | Allocations: 10951)


Started GET "/comments/58" for ::1 at 2022-02-19 13:44:02 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"58"}
  [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 58], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 7.5ms | Allocations: 1167)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 17.1ms | Allocations: 3724)
Completed 200 OK in 40ms (Views: 17.3ms | ActiveRecord: 5.4ms | Allocations: 5565)


Started POST "/comments/58/downvote" for ::1 at 2022-02-19 13:44:03 +0700
Processing by CommentsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"58"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:47:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 6], ["votable_type", "Comment"], ["votable_id", 58], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in `downvote'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:58:in `downvote'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:58:in `downvote'
  [1m[36mVote Create (1.7ms)[0m  [1m[32mINSERT INTO "votes" ("user_id", "value", "votable_type", "votable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 6], ["value", -1], ["votable_type", "Comment"], ["votable_id", 58], ["created_at", "2022-02-19 06:44:03.578441"], ["updated_at", "2022-02-19 06:44:03.578441"]]
  ↳ app/models/user.rb:58:in `downvote'
  [1m[36mTRANSACTION (4.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:58:in `downvote'
Redirected to http://localhost:3000/comments/58
Completed 302 Found in 39ms (ActiveRecord: 14.1ms | Allocations: 6186)


Started GET "/comments/58" for ::1 at 2022-02-19 13:44:03 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"58"}
  [1m[36mComment Load (0.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.2ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 58], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 4.2ms | Allocations: 1160)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 10.3ms | Allocations: 3711)
Completed 200 OK in 18ms (Views: 8.6ms | ActiveRecord: 4.2ms | Allocations: 5550)


Started POST "/comments/58/downvote" for ::1 at 2022-02-19 13:44:08 +0700
Processing by CommentsController#downvote as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"58"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:47:in `downvote'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mVote Load (1.8ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."votable_type" = $2 AND "votes"."votable_id" = $3 LIMIT $4[0m  [["user_id", 6], ["votable_type", "Comment"], ["votable_id", 58], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in `downvote'
Redirected to http://localhost:3000/comments/58
Completed 302 Found in 13ms (ActiveRecord: 3.8ms | Allocations: 2894)


Started GET "/comments/58" for ::1 at 2022-02-19 13:44:08 +0700
Processing by CommentsController#show as HTML
  Parameters: {"id"=>"58"}
  [1m[36mComment Load (0.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:4:in `show'
  [1m[36mVote Load (1.4ms)[0m  [1m[34mSELECT SUM(votes.value) AS num FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 58], ["votable_type", "Comment"]]
  ↳ app/models/comment.rb:15:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering comments/show.html.erb within layouts/application
  [1m[36mPost Load (1.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/comments/show.html.erb:19
  Rendered comments/show.html.erb within layouts/application (Duration: 6.0ms | Allocations: 1160)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 11.8ms | Allocations: 3711)
Completed 200 OK in 20ms (Views: 10.4ms | ActiveRecord: 4.6ms | Allocations: 5550)


Started POST "/comments?reply=true" for ::1 at 2022-02-19 13:44:11 +0700
Processing by CommentsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "comment"=>{"parent_id"=>"58", "post_id"=>"5", "content"=>"lll"}, "reply"=>"true"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mPost Load (1.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/comments_controller.rb:22:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mComment Create (1.8ms)[0m  [1m[32mINSERT INTO "comments" ("content", "user_id", "post_id", "parent_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "lll"], ["user_id", 6], ["post_id", 5], ["parent_id", 58], ["created_at", "2022-02-19 06:44:11.543668"], ["updated_at", "2022-02-19 06:44:11.543668"]]
  ↳ app/controllers/comments_controller.rb:25:in `create'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/comments_controller.rb:25:in `create'
Redirected to http://localhost:3000/posts/5
Completed 302 Found in 99ms (ActiveRecord: 8.6ms | Allocations: 4541)


Started GET "/posts/5" for ::1 at 2022-02-19 13:44:11 +0700
Processing by PostsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mPost Load (1.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/posts_controller.rb:4:in `show'
  [1m[36mComment Load (2.6ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 6], ["id", 5], ["id", 2]]
  ↳ app/models/post.rb:14:in `comment_by_parent_id'
  [1m[36mCACHE Comment Load (0.0ms)[0m  [1m[34mSELECT comments.*,COALESCE(SUM(votes.value),0) AS num FROM "comments" LEFT OUTER JOIN "votes" ON "votes"."votable_type" = $1 AND "votes"."votable_id" = "comments"."id" WHERE "comments"."post_id" = $2 GROUP BY "comments"."id" ORDER BY num DESC[0m  [["votable_type", "Comment"], ["post_id", 5]]
  ↳ app/models/post.rb:38:in `vote_of_comment_by_post'
  [1m[36mVote Load (1.6ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."votable_id" = $1 AND "votes"."votable_type" = $2[0m  [["votable_id", 5], ["votable_type", "Post"]]
  ↳ app/models/post.rb:23:in `my_vote'
  Rendering layout layouts/application.html.erb
  Rendering posts/show.html.erb within layouts/application
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/posts/show.html.erb:1
  [1m[36mSub Load (1.8ms)[0m  [1m[34mSELECT "subs".* FROM "subs" INNER JOIN "post_subs" ON "subs"."id" = "post_subs"."sub_id" WHERE "post_subs"."post_id" = $1[0m  [["post_id", 5]]
  ↳ app/views/posts/show.html.erb:16
  Rendered comments/_comment.html.erb (Duration: 0.7ms | Allocations: 86)
  Rendered comments/_comment.html.erb (Duration: 0.5ms | Allocations: 224)
  Rendered posts/show.html.erb within layouts/application (Duration: 15.6ms | Allocations: 2743)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 27.4ms | Allocations: 5302)
Completed 200 OK in 60ms (Views: 22.7ms | ActiveRecord: 15.9ms | Allocations: 11040)


Started GET "/subs" for ::1 at 2022-02-19 13:44:20 +0700
Processing by SubsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering subs/index.html.erb within layouts/application
  [1m[36mSub Load (2.7ms)[0m  [1m[34mSELECT "subs".* FROM "subs"[0m
  ↳ app/views/subs/index.html.erb:3
  Rendered subs/index.html.erb within layouts/application (Duration: 12.3ms | Allocations: 1103)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  Rendered layout layouts/application.html.erb (Duration: 20.8ms | Allocations: 3804)
Completed 200 OK in 22ms (Views: 18.1ms | ActiveRecord: 3.6ms | Allocations: 4101)


Started DELETE "/session" for ::1 at 2022-02-19 13:44:21 +0700
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."session_token" = $1 LIMIT $2[0m  [["session_token", "IPjv6ZwcM9Zzsg"], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:16:in `current_user'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "vu3"], ["id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "session_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["session_token", "ADH0CMbpbA3UYw"], ["updated_at", "2022-02-19 06:44:21.062697"], ["id", 6]]
  ↳ app/models/user.rb:24:in `reset_session_token'
  [1m[36mTRANSACTION (41.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user.rb:24:in `reset_session_token'
Redirected to http://localhost:3000/session/new
Completed 302 Found in 63ms (ActiveRecord: 47.4ms | Allocations: 4604)


Started GET "/session/new" for ::1 at 2022-02-19 13:44:21 +0700
Processing by SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/new.html.erb within layouts/application
  Rendered shared/_errors.html.erb (Duration: 1.0ms | Allocations: 344)
  Rendered sessions/new.html.erb within layouts/application (Duration: 3.3ms | Allocations: 844)
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | Allocations: 2233)
Completed 200 OK in 9ms (Views: 8.6ms | ActiveRecord: 0.0ms | Allocations: 3041)


